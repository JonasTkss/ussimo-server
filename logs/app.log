2025-03-21 20:49:45 [INFO]: Logger initialized
2025-03-21 20:49:45 [INFO]: Server running on port 3000
2025-03-21 20:49:56 [INFO]: Successfully authenticated with Montonio
2025-03-21 20:49:56 [INFO]: Successfully fetched 10 orders from Montonio
2025-03-21 20:50:09 [INFO]: Successfully fetched order 0b6f1eff-c41d-470f-a0c3-20369943bc07 from Montonio
2025-03-21 20:50:31 [INFO]: Successfully fetched order f449ff1b-cb84-4f15-b82f-53a73ba3c759 from Montonio
2025-03-21 20:50:38 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-21 20:50:42 [INFO]: Successfully fetched 10 orders from Montonio
2025-03-21 20:50:44 [INFO]: Client connected to log stream
2025-03-21 20:50:58 [INFO]: Successfully fetched 10 orders from Montonio
2025-03-21 20:50:58 [INFO]: Client disconnected from log stream
2025-03-21 20:51:12 [INFO]: Starting order synchronization from 2025-03-20T18:51:12.129Z to 2025-03-21T18:51:12.129Z
2025-03-21 20:51:12 [INFO]: Successfully fetched 150 orders from Montonio
2025-03-21 20:51:12 [INFO]: Filtered 7 orders within the date range
2025-03-21 20:51:12 [INFO]: Found 7 orders to process
2025-03-21 20:51:12 [INFO]: Successfully fetched order 0b6f1eff-c41d-470f-a0c3-20369943bc07 from Montonio
2025-03-21 20:51:12 [INFO]: Transforming order 0b6f1eff-c41d-470f-a0c3-20369943bc07 to invoice format
2025-03-21 20:51:12 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-21 20:51:12 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-21 20:51:12 [ERROR]: Failed to process order 0b6f1eff-c41d-470f-a0c3-20369943bc07: Order does not contain customer email
2025-03-21 20:51:13 [INFO]: Successfully fetched order f449ff1b-cb84-4f15-b82f-53a73ba3c759 from Montonio
2025-03-21 20:51:13 [INFO]: Transforming order f449ff1b-cb84-4f15-b82f-53a73ba3c759 to invoice format
2025-03-21 20:51:13 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Failed to process order f449ff1b-cb84-4f15-b82f-53a73ba3c759: Order does not contain customer email
2025-03-21 20:51:13 [INFO]: Successfully fetched order df28b292-0ed3-4dd2-ac00-a5f347405ae5 from Montonio
2025-03-21 20:51:13 [INFO]: Transforming order df28b292-0ed3-4dd2-ac00-a5f347405ae5 to invoice format
2025-03-21 20:51:13 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Failed to process order df28b292-0ed3-4dd2-ac00-a5f347405ae5: Order does not contain customer email
2025-03-21 20:51:13 [INFO]: Successfully fetched order 1195c67d-b51f-41ae-9943-964a40042265 from Montonio
2025-03-21 20:51:13 [INFO]: Transforming order 1195c67d-b51f-41ae-9943-964a40042265 to invoice format
2025-03-21 20:51:13 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Failed to process order 1195c67d-b51f-41ae-9943-964a40042265: Order does not contain customer email
2025-03-21 20:51:13 [INFO]: Successfully fetched order dde2239c-14c4-455a-ad02-570fd056f260 from Montonio
2025-03-21 20:51:13 [INFO]: Transforming order dde2239c-14c4-455a-ad02-570fd056f260 to invoice format
2025-03-21 20:51:13 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Failed to process order dde2239c-14c4-455a-ad02-570fd056f260: Order does not contain customer email
2025-03-21 20:51:13 [INFO]: Successfully fetched order f7208a82-88ac-458d-9da2-52a74c414297 from Montonio
2025-03-21 20:51:13 [INFO]: Transforming order f7208a82-88ac-458d-9da2-52a74c414297 to invoice format
2025-03-21 20:51:13 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Failed to process order f7208a82-88ac-458d-9da2-52a74c414297: Order does not contain customer email
2025-03-21 20:51:13 [INFO]: Successfully fetched order 1df86c96-fdef-4ca1-a0cc-8abe8e37fb72 from Montonio
2025-03-21 20:51:13 [INFO]: Transforming order 1df86c96-fdef-4ca1-a0cc-8abe8e37fb72 to invoice format
2025-03-21 20:51:13 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-21 20:51:13 [ERROR]: Failed to process order 1df86c96-fdef-4ca1-a0cc-8abe8e37fb72: Order does not contain customer email
2025-03-21 20:51:13 [INFO]: Order synchronization completed. Results: {"total":7,"processed":7,"skipped":0,"failed":7,"succeeded":0}
2025-03-21 20:51:31 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-21 20:51:55 [INFO]: Successfully fetched 10 orders from Montonio
2025-03-21 20:52:02 [INFO]: Successfully fetched order c3cd8f97-1e5b-4988-be79-b26fc2233619 from Montonio
2025-03-21 20:52:09 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-21 20:52:12 [INFO]: Successfully fetched 10 orders from Montonio
2025-03-21 20:53:47 [INFO]: Logger initialized
2025-03-21 20:53:47 [INFO]: Automatic synchronization is disabled
2025-03-21 20:53:47 [INFO]: Server running on port 3000
2025-03-21 20:53:47 [INFO]: API-only mode enabled
2025-03-21 20:53:48 [INFO]: Logger initialized
2025-03-21 20:53:48 [INFO]: Automatic synchronization is disabled
2025-03-21 20:53:48 [INFO]: Server running on port 3000
2025-03-21 20:53:48 [INFO]: API-only mode enabled
2025-03-21 20:54:17 [INFO]: Logger initialized
2025-03-21 20:54:17 [INFO]: Automatic synchronization is disabled
2025-03-21 20:54:17 [INFO]: Server running on port 3000
2025-03-21 20:54:17 [INFO]: API-only mode enabled
2025-03-21 20:54:19 [INFO]: Logger initialized
2025-03-21 20:54:19 [INFO]: Automatic synchronization is disabled
2025-03-21 20:54:19 [INFO]: Server running on port 3000
2025-03-21 20:54:19 [INFO]: API-only mode enabled
2025-03-21 20:55:29 [INFO]: Logger initialized
2025-03-21 20:55:29 [INFO]: Automatic synchronization is disabled
2025-03-21 20:55:29 [INFO]: Server running on port 3000
2025-03-21 20:55:29 [INFO]: API-only mode enabled
2025-03-23 09:29:07 [INFO]: Logger initialized
2025-03-23 09:29:07 [INFO]: Automatic synchronization is disabled
2025-03-23 09:29:07 [INFO]: Server running on port 3000
2025-03-23 09:29:07 [INFO]: API-only mode enabled
2025-03-23 09:47:58 [INFO]: Logger initialized
2025-03-23 09:47:58 [INFO]: Automatic synchronization is disabled
2025-03-23 09:47:58 [ERROR]: Uncaught Exception: listen EADDRINUSE: address already in use :::3000
2025-03-23 09:47:58 [ERROR]: Error: listen EADDRINUSE: address already in use :::3000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at Server.listen (node:net:2099:7)
    at Object.<anonymous> (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/index.js:99:8)
    at Module._compile (node:internal/modules/cjs/loader:1554:14)
    at Object..js (node:internal/modules/cjs/loader:1706:10)
    at Module.load (node:internal/modules/cjs/loader:1289:32)
    at Function._load (node:internal/modules/cjs/loader:1108:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)
2025-03-23 09:48:22 [INFO]: Logger initialized
2025-03-23 09:48:22 [INFO]: Automatic synchronization is disabled
2025-03-23 09:48:22 [INFO]: Server running on port 3001
2025-03-23 09:48:22 [INFO]: API-only mode enabled
2025-03-23 09:50:34 [INFO]: Successfully authenticated with Montonio
2025-03-23 09:50:35 [INFO]: Successfully fetched 150 orders from Montonio
2025-03-23 10:06:39 [INFO]: Logger initialized
2025-03-23 10:06:39 [INFO]: Automatic synchronization is disabled
2025-03-23 10:06:39 [INFO]: Server running on port 3001
2025-03-23 10:06:39 [INFO]: API-only mode enabled
2025-03-23 10:08:15 [INFO]: Starting order synchronization from 2025-03-22T08:08:15.364Z to 2025-03-23T08:08:15.364Z
2025-03-23 10:08:16 [INFO]: Successfully authenticated with Montonio
2025-03-23 10:08:16 [INFO]: Successfully fetched 150 orders from Montonio
2025-03-23 10:08:16 [INFO]: Filtered 7 orders within the date range
2025-03-23 10:08:16 [INFO]: Found 7 orders to process
2025-03-23 10:08:16 [INFO]: Successfully fetched order d3cde93a-63ae-416f-87f4-d3e31626227b from Montonio
2025-03-23 10:08:16 [INFO]: Transforming order d3cde93a-63ae-416f-87f4-d3e31626227b to invoice format
2025-03-23 10:08:16 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-23 10:08:16 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-23 10:08:16 [ERROR]: Failed to process order d3cde93a-63ae-416f-87f4-d3e31626227b: Order does not contain customer email
2025-03-23 10:08:16 [INFO]: Successfully fetched order 261e8e52-e9e8-489e-b9d9-a375ee11c42c from Montonio
2025-03-23 10:08:16 [INFO]: Transforming order 261e8e52-e9e8-489e-b9d9-a375ee11c42c to invoice format
2025-03-23 10:08:16 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-23 10:08:16 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-23 10:08:16 [ERROR]: Failed to process order 261e8e52-e9e8-489e-b9d9-a375ee11c42c: Order does not contain customer email
2025-03-23 10:08:16 [INFO]: Successfully fetched order 1cadd46e-fd57-446d-97ed-ed41d35fae68 from Montonio
2025-03-23 10:08:16 [INFO]: Transforming order 1cadd46e-fd57-446d-97ed-ed41d35fae68 to invoice format
2025-03-23 10:08:16 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-23 10:08:16 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-23 10:08:16 [ERROR]: Failed to process order 1cadd46e-fd57-446d-97ed-ed41d35fae68: Order does not contain customer email
2025-03-23 10:08:17 [INFO]: Successfully fetched order 576e9690-a708-43fd-bf93-25dcf18750c0 from Montonio
2025-03-23 10:08:17 [INFO]: Transforming order 576e9690-a708-43fd-bf93-25dcf18750c0 to invoice format
2025-03-23 10:08:17 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Failed to process order 576e9690-a708-43fd-bf93-25dcf18750c0: Order does not contain customer email
2025-03-23 10:08:17 [INFO]: Successfully fetched order 2256272f-d421-434f-a988-be5e454c07ad from Montonio
2025-03-23 10:08:17 [INFO]: Transforming order 2256272f-d421-434f-a988-be5e454c07ad to invoice format
2025-03-23 10:08:17 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Failed to process order 2256272f-d421-434f-a988-be5e454c07ad: Order does not contain customer email
2025-03-23 10:08:17 [INFO]: Successfully fetched order abf38afb-1e35-40d8-8c97-d097786d1500 from Montonio
2025-03-23 10:08:17 [INFO]: Transforming order abf38afb-1e35-40d8-8c97-d097786d1500 to invoice format
2025-03-23 10:08:17 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Failed to process order abf38afb-1e35-40d8-8c97-d097786d1500: Order does not contain customer email
2025-03-23 10:08:17 [INFO]: Successfully fetched order ceee24e4-d345-4d17-917b-0ce56ec0d0d0 from Montonio
2025-03-23 10:08:17 [INFO]: Transforming order ceee24e4-d345-4d17-917b-0ce56ec0d0d0 to invoice format
2025-03-23 10:08:17 [ERROR]: Error finding/creating customer: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Error transforming order to invoice: Order does not contain customer email
2025-03-23 10:08:17 [ERROR]: Failed to process order ceee24e4-d345-4d17-917b-0ce56ec0d0d0: Order does not contain customer email
2025-03-23 10:08:17 [INFO]: Order synchronization completed. Results: {"total":7,"processed":7,"skipped":0,"failed":7,"succeeded":0}
2025-03-23 10:08:17 [INFO]: Manual sync completed: {"total":7,"processed":7,"skipped":0,"failed":7,"succeeded":0}
2025-03-23 10:17:47 [INFO]: Logger initialized
2025-03-23 10:17:47 [INFO]: Automatic synchronization is disabled
2025-03-23 10:17:47 [INFO]: Server running on port 3001
2025-03-23 10:17:47 [INFO]: API-only mode enabled
2025-03-23 10:18:00 [INFO]: Successfully authenticated with Montonio
2025-03-23 10:18:01 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:18:01 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:18:40 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:18:40 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:19:41 [INFO]: Successfully fetched order d3cde93a-63ae-416f-87f4-d3e31626227b from Montonio
2025-03-23 10:19:56 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:19:56 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:20:00 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:20:00 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:20:58 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:20:58 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:28:41 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:28:41 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:31:22 [INFO]: Logger initialized
2025-03-23 10:31:22 [INFO]: Automatic synchronization is disabled
2025-03-23 10:31:22 [INFO]: Server running on port 3001
2025-03-23 10:31:22 [INFO]: API-only mode enabled
2025-03-23 10:38:43 [INFO]: Logger initialized
2025-03-23 10:38:43 [INFO]: Automatic synchronization is disabled
2025-03-23 10:38:43 [INFO]: Server running on port 3001
2025-03-23 10:38:43 [INFO]: API-only mode enabled
2025-03-23 10:38:52 [INFO]: Successfully authenticated with Montonio
2025-03-23 10:38:52 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:38:53 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:39:12 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:39:12 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:39:28 [INFO]: Logger initialized
2025-03-23 10:39:28 [INFO]: Automatic synchronization is disabled
2025-03-23 10:39:28 [INFO]: Server running on port 3001
2025-03-23 10:39:28 [INFO]: API-only mode enabled
2025-03-23 10:45:02 [INFO]: Logger initialized
2025-03-23 10:45:02 [INFO]: Automatic synchronization is disabled
2025-03-23 10:45:02 [INFO]: Server running on port 3001
2025-03-23 10:45:02 [INFO]: API-only mode enabled
2025-03-23 10:45:26 [INFO]: Logger initialized
2025-03-23 10:45:26 [INFO]: Automatic synchronization is disabled
2025-03-23 10:45:26 [INFO]: Server running on port 3001
2025-03-23 10:45:26 [INFO]: API-only mode enabled
2025-03-23 10:45:35 [INFO]: Logger initialized
2025-03-23 10:45:35 [INFO]: Automatic synchronization is disabled
2025-03-23 10:45:35 [INFO]: Server running on port 3001
2025-03-23 10:45:35 [INFO]: API-only mode enabled
2025-03-23 10:45:42 [INFO]: Logger initialized
2025-03-23 10:45:42 [INFO]: Automatic synchronization is disabled
2025-03-23 10:45:42 [INFO]: Server running on port 3001
2025-03-23 10:45:42 [INFO]: API-only mode enabled
2025-03-23 10:45:46 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=10
2025-03-23 10:45:46 [ERROR]: Error fetching WooCommerce orders: Unexpected end of JSON input
2025-03-23 10:47:33 [INFO]: Logger initialized
2025-03-23 10:47:34 [INFO]: Automatic synchronization is disabled
2025-03-23 10:47:34 [INFO]: Server running on port 3001
2025-03-23 10:47:34 [INFO]: API-only mode enabled
2025-03-23 10:47:37 [INFO]: Logger initialized
2025-03-23 10:47:37 [INFO]: Automatic synchronization is disabled
2025-03-23 10:47:37 [INFO]: Server running on port 3001
2025-03-23 10:47:37 [INFO]: API-only mode enabled
2025-03-23 10:47:39 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=10
2025-03-23 10:47:48 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=10
2025-03-23 10:47:51 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=10
2025-03-23 10:47:55 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=10
2025-03-23 10:47:58 [INFO]: Fetching WooCommerce orders with params: page=64&per_page=10
2025-03-23 10:48:02 [INFO]: Fetching WooCommerce orders with params: page=60&per_page=10
2025-03-23 10:48:05 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=10
2025-03-23 10:48:22 [INFO]: Successfully authenticated with Montonio
2025-03-23 10:48:22 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:48:22 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:49:13 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:49:13 [INFO]: Successfully fetched 20 orders from Montonio
2025-03-23 10:51:38 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 10:51:39 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 10:51:44 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 10:51:45 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 10:56:16 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 10:56:17 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 10:56:36 [INFO]: Fetching WooCommerce order: 1751
2025-03-23 10:57:13 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 10:57:15 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:01:44 [INFO]: Logger initialized
2025-03-23 11:01:44 [INFO]: Automatic synchronization is disabled
2025-03-23 11:01:44 [INFO]: Server running on port 3001
2025-03-23 11:01:44 [INFO]: API-only mode enabled
2025-03-23 11:01:46 [INFO]: Logger initialized
2025-03-23 11:01:46 [INFO]: Automatic synchronization is disabled
2025-03-23 11:01:46 [INFO]: Server running on port 3001
2025-03-23 11:01:46 [INFO]: API-only mode enabled
2025-03-23 11:04:08 [INFO]: Logger initialized
2025-03-23 11:04:08 [INFO]: Automatic synchronization is disabled
2025-03-23 11:04:08 [INFO]: Server running on port 3001
2025-03-23 11:04:08 [INFO]: API-only mode enabled
2025-03-23 11:04:09 [INFO]: Logger initialized
2025-03-23 11:04:10 [INFO]: Automatic synchronization is disabled
2025-03-23 11:04:10 [INFO]: Server running on port 3001
2025-03-23 11:04:10 [INFO]: API-only mode enabled
2025-03-23 11:04:47 [INFO]: Logger initialized
2025-03-23 11:04:47 [INFO]: Automatic synchronization is disabled
2025-03-23 11:04:47 [INFO]: Server running on port 3001
2025-03-23 11:04:47 [INFO]: API-only mode enabled
2025-03-23 11:07:53 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:07:54 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:08:22 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:08:23 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:14:44 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:14:45 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:18:35 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:18:37 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:18:54 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20&status=on-hold
2025-03-23 11:18:55 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20&status=completed
2025-03-23 11:18:57 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20&status=on-hold
2025-03-23 11:19:01 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20&status=completed
2025-03-23 11:19:25 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:19:27 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:23:28 [INFO]: Logger initialized
2025-03-23 11:23:28 [INFO]: Automatic synchronization is disabled
2025-03-23 11:23:28 [INFO]: Server running on port 3001
2025-03-23 11:23:28 [INFO]: API-only mode enabled
2025-03-23 11:23:30 [INFO]: Logger initialized
2025-03-23 11:23:30 [INFO]: Automatic synchronization is disabled
2025-03-23 11:23:30 [INFO]: Server running on port 3001
2025-03-23 11:23:30 [INFO]: API-only mode enabled
2025-03-23 11:23:32 [INFO]: Logger initialized
2025-03-23 11:23:32 [INFO]: Automatic synchronization is disabled
2025-03-23 11:23:32 [INFO]: Server running on port 3001
2025-03-23 11:23:32 [INFO]: API-only mode enabled
2025-03-23 11:23:48 [INFO]: Logger initialized
2025-03-23 11:23:48 [INFO]: Automatic synchronization is disabled
2025-03-23 11:23:48 [INFO]: Server running on port 3001
2025-03-23 11:23:48 [INFO]: API-only mode enabled
2025-03-23 11:23:51 [INFO]: Logger initialized
2025-03-23 11:23:51 [INFO]: Automatic synchronization is disabled
2025-03-23 11:23:51 [INFO]: Server running on port 3001
2025-03-23 11:23:51 [INFO]: API-only mode enabled
2025-03-23 11:24:10 [INFO]: Logger initialized
2025-03-23 11:24:11 [INFO]: Automatic synchronization is disabled
2025-03-23 11:24:11 [INFO]: Server running on port 3001
2025-03-23 11:24:11 [INFO]: API-only mode enabled
2025-03-23 11:24:13 [INFO]: Logger initialized
2025-03-23 11:24:13 [INFO]: Automatic synchronization is disabled
2025-03-23 11:24:13 [INFO]: Server running on port 3001
2025-03-23 11:24:13 [INFO]: API-only mode enabled
2025-03-23 11:24:23 [INFO]: Logger initialized
2025-03-23 11:24:23 [INFO]: Automatic synchronization is disabled
2025-03-23 11:24:23 [INFO]: Server running on port 3001
2025-03-23 11:24:23 [INFO]: API-only mode enabled
2025-03-23 11:25:45 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:25:46 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:26:14 [INFO]: Logger initialized
2025-03-23 11:26:15 [INFO]: Automatic synchronization is disabled
2025-03-23 11:26:15 [INFO]: Server running on port 3001
2025-03-23 11:26:15 [INFO]: API-only mode enabled
2025-03-23 11:27:02 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:02 [INFO]: Fetching WooCommerce orders with params: per_page=100&after=2025-03-16T09%3A27%3A02.265Z&before=2025-03-23T09%3A27%3A02.265Z
2025-03-23 11:27:02 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:04 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:05 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:05 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:06 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:07 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:08 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:09 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:10 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:10 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:12 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:12 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:27:14 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:27:16 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:16 [INFO]: Fetching WooCommerce orders with params: per_page=100&after=2025-03-16T09%3A27%3A16.113Z&before=2025-03-23T09%3A27%3A16.113Z
2025-03-23 11:27:16 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:17 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:17 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:19 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:19 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:20 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:20 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:22 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:22 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:22 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:22 [INFO]: Fetching WooCommerce orders with params: per_page=100&after=2025-03-16T09%3A27%3A22.907Z&before=2025-03-23T09%3A27%3A22.907Z
2025-03-23 11:27:22 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:23 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:24 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:24 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:25 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:27:25 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:27:25 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:26 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:27 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:27 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:29 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:29 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:30 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:30 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:31 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:32 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:27:33 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:27:34 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:34 [INFO]: Fetching WooCommerce orders with params: per_page=100&after=2025-03-16T09%3A27%3A34.675Z&before=2025-03-23T09%3A27%3A34.675Z
2025-03-23 11:27:34 [INFO]: Fetching WooCommerce orders with params: per_page=100
2025-03-23 11:27:36 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:36 [INFO]: Fetching WooCommerce orders with params: page=2&per_page=100
2025-03-23 11:27:37 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:37 [INFO]: Fetching WooCommerce orders with params: page=3&per_page=100
2025-03-23 11:27:39 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:39 [INFO]: Fetching WooCommerce orders with params: page=4&per_page=100
2025-03-23 11:27:40 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:40 [INFO]: Fetching WooCommerce orders with params: page=5&per_page=100
2025-03-23 11:27:42 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:42 [INFO]: Fetching WooCommerce orders with params: page=6&per_page=100
2025-03-23 11:27:43 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:27:44 [INFO]: Fetching WooCommerce orders with params: page=7&per_page=100
2025-03-23 11:32:27 [INFO]: Logger initialized
2025-03-23 11:32:27 [INFO]: Automatic synchronization is disabled
2025-03-23 11:32:27 [INFO]: Server running on port 3001
2025-03-23 11:32:27 [INFO]: API-only mode enabled
2025-03-23 11:32:33 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:32:33 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:32:33 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:32:33 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:32:33 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:32:33 [ERROR]: Error fetching WooCommerce top sellers report:
2025-03-23 11:32:33 [ERROR]: Error getting orders summary: Invalid URI "/"
2025-03-23 11:32:33 [ERROR]: Error getting revenue chart data: Invalid URI "/"
2025-03-23 11:32:33 [ERROR]: Error getting popular products: Invalid URI "/"
2025-03-23 11:32:33 [ERROR]: Error in /api/analytics/dashboard: Invalid URI "/"
2025-03-23 11:32:33 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:32:33 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:32:33 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:32:33 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:32:33 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:32:33 [ERROR]: Error fetching WooCommerce top sellers report:
2025-03-23 11:32:33 [ERROR]: Error getting orders summary: Invalid URI "/"
2025-03-23 11:32:33 [ERROR]: Error getting revenue chart data: Invalid URI "/"
2025-03-23 11:32:33 [ERROR]: Error getting popular products: Invalid URI "/"
2025-03-23 11:32:33 [ERROR]: Error in /api/analytics/dashboard: Invalid URI "/"
2025-03-23 11:32:52 [INFO]: Logger initialized
2025-03-23 11:32:52 [INFO]: Automatic synchronization is disabled
2025-03-23 11:32:52 [INFO]: Server running on port 3001
2025-03-23 11:32:52 [INFO]: API-only mode enabled
2025-03-23 11:33:21 [INFO]: Logger initialized
2025-03-23 11:33:21 [INFO]: Automatic synchronization is disabled
2025-03-23 11:33:21 [INFO]: Server running on port 3001
2025-03-23 11:33:21 [INFO]: API-only mode enabled
2025-03-23 11:33:28 [INFO]: Logger initialized
2025-03-23 11:33:29 [INFO]: Automatic synchronization is disabled
2025-03-23 11:33:29 [INFO]: Server running on port 3001
2025-03-23 11:33:29 [INFO]: API-only mode enabled
2025-03-23 11:33:31 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:33:31 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:33:31 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:33:31 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:33:31 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:33:31 [ERROR]: Error fetching WooCommerce top sellers report:
2025-03-23 11:33:31 [ERROR]: Error getting orders summary: Invalid URI "/"
2025-03-23 11:33:31 [ERROR]: Error getting revenue chart data: Invalid URI "/"
2025-03-23 11:33:31 [ERROR]: Error getting popular products: Invalid URI "/"
2025-03-23 11:33:31 [ERROR]: Error in /api/analytics/dashboard: Invalid URI "/"
2025-03-23 11:33:31 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:33:31 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:33:31 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:33:31 [ERROR]: Error fetching WooCommerce sales report:
2025-03-23 11:33:31 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:33:31 [ERROR]: Error fetching WooCommerce top sellers report:
2025-03-23 11:33:31 [ERROR]: Error getting orders summary: Invalid URI "/"
2025-03-23 11:33:31 [ERROR]: Error getting revenue chart data: Invalid URI "/"
2025-03-23 11:33:31 [ERROR]: Error getting popular products: Invalid URI "/"
2025-03-23 11:33:31 [ERROR]: Error in /api/analytics/dashboard: Invalid URI "/"
2025-03-23 11:34:58 [INFO]: Logger initialized
2025-03-23 11:34:58 [INFO]: Automatic synchronization is disabled
2025-03-23 11:34:58 [INFO]: Server running on port 3001
2025-03-23 11:34:58 [INFO]: API-only mode enabled
2025-03-23 11:35:02 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:02 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:02 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:35:03 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:35:04 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:04 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:04 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:35:05 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:35:24 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:24 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:24 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:35:25 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:35:25 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:25 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:35:25 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:35:26 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:35:52 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:35:52 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:35:52 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2024-03-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:35:52 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:39:06 [INFO]: Logger initialized
2025-03-23 11:39:06 [INFO]: Automatic synchronization is disabled
2025-03-23 11:39:06 [INFO]: Server running on port 3001
2025-03-23 11:39:06 [INFO]: API-only mode enabled
2025-03-23 11:39:11 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:39:11 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:39:11 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:39:12 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:39:13 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:39:13 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:39:13 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:39:13 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:40:27 [INFO]: Logger initialized
2025-03-23 11:40:28 [INFO]: Automatic synchronization is disabled
2025-03-23 11:40:28 [INFO]: Server running on port 3001
2025-03-23 11:40:28 [INFO]: API-only mode enabled
2025-03-23 11:40:31 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:40:31 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:40:31 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:40:31 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:40:32 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:40:32 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:40:32 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:40:32 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:40:51 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:40:51 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:40:51 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2024-03-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:40:52 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:41:05 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:41:05 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:41:05 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:41:06 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:41:15 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:41:15 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:41:15 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2024-03-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:41:15 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:41:27 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:41:27 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:41:27 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:41:27 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:41:28 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:41:28 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:41:28 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:41:29 [INFO]: Fetching WooCommerce orders with params: per_page=1&status=pending
2025-03-23 11:44:23 [INFO]: Logger initialized
2025-03-23 11:44:23 [INFO]: Automatic synchronization is disabled
2025-03-23 11:44:23 [INFO]: Server running on port 3001
2025-03-23 11:44:23 [INFO]: API-only mode enabled
2025-03-23 11:45:12 [INFO]: Logger initialized
2025-03-23 11:45:12 [INFO]: Automatic synchronization is disabled
2025-03-23 11:45:12 [INFO]: Server running on port 3001
2025-03-23 11:45:12 [INFO]: API-only mode enabled
2025-03-23 11:45:17 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:17 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:45:17 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:17 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:45:18 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:45:18 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:45:18 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:45:18 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:45:18 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:45:20 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:45:33 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:45:35 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:45:41 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:41 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:45:41 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:41 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:42 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:45:43 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:45:43 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:45:43 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:45:43 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:45:43 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:45:49 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:49 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:45:49 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:49 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-23","date_max":"2025-03-23"}
2025-03-23 11:45:50 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2025-02-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:45:51 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:45:51 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:45:51 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:45:51 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:45:51 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:46:12 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:46:12 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:46:12 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-03-23","date_max":"2025-03-23"}
2025-03-23 11:46:12 [INFO]: Fetching WooCommerce top sellers report with params: {"date_min":"2024-03-23","date_max":"2025-03-23","limit":5}
2025-03-23 11:46:13 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:46:13 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:46:13 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:46:13 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:46:13 [INFO]: Fetching WooCommerce product details for ID: 127
2025-03-23 11:49:58 [INFO]: Logger initialized
2025-03-23 11:49:58 [INFO]: Automatic synchronization is disabled
2025-03-23 11:49:58 [INFO]: Server running on port 3001
2025-03-23 11:49:58 [INFO]: API-only mode enabled
2025-03-23 11:50:41 [INFO]: Logger initialized
2025-03-23 11:50:41 [INFO]: Automatic synchronization is disabled
2025-03-23 11:50:41 [INFO]: Server running on port 3001
2025-03-23 11:50:41 [INFO]: API-only mode enabled
2025-03-23 11:50:44 [INFO]: Logger initialized
2025-03-23 11:50:44 [INFO]: Automatic synchronization is disabled
2025-03-23 11:50:44 [INFO]: Server running on port 3001
2025-03-23 11:50:44 [INFO]: API-only mode enabled
2025-03-23 11:50:46 [INFO]: Analytics period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:46 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:46 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:50:46 [INFO]: Revenue chart period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:46 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:46 [INFO]: Popular products period: 30d, params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:46 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:48 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:50:48 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:50:48 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:50:48 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:50:48 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:50:49 [INFO]: Analytics period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:50:49 [INFO]: Revenue chart period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:49 [INFO]: Popular products period: 30d, params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:50:49 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:50:56 [INFO]: Analytics period: thisYear, params: {"date_min":"2024-12-31","date_max":"2025-03-23"}
2025-03-23 11:50:56 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-12-31","date_max":"2025-03-23"}
2025-03-23 11:50:56 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:50:56 [INFO]: Revenue chart period: thisYear, params: {"date_min":"2024-12-31","date_max":"2025-03-23"}
2025-03-23 11:50:56 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2024-12-31","date_max":"2025-03-23"}
2025-03-23 11:50:56 [INFO]: Popular products period: thisYear, params: {"limit":5,"date_min":"2024-12-31","date_max":"2025-03-23"}
2025-03-23 11:50:56 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"date_min":"2024-12-31","date_max":"2025-03-23"}
2025-03-23 11:50:57 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:50:57 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:50:57 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:50:57 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:50:57 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:51:19 [INFO]: Analytics period: allTime, params: {}
2025-03-23 11:51:19 [INFO]: Fetching WooCommerce sales report with params: {}
2025-03-23 11:51:19 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:51:19 [INFO]: Revenue chart period: allTime, params: {}
2025-03-23 11:51:19 [INFO]: Fetching WooCommerce sales report with params: {}
2025-03-23 11:51:19 [INFO]: Popular products period: allTime, params: {"limit":5}
2025-03-23 11:51:19 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5}
2025-03-23 11:51:19 [INFO]: Fetching WooCommerce product details for ID: 127
2025-03-23 11:51:19 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:51:26 [INFO]: Analytics period: today, params: {"date_min":"2025-03-22","date_max":"2025-03-23"}
2025-03-23 11:51:26 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-03-22","date_max":"2025-03-23"}
2025-03-23 11:51:26 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:51:26 [INFO]: Revenue chart period: today, params: {"date_min":"2025-03-22","date_max":"2025-03-23"}
2025-03-23 11:51:26 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-03-22","date_max":"2025-03-23"}
2025-03-23 11:51:26 [INFO]: Popular products period: today, params: {"limit":5,"date_min":"2025-03-22","date_max":"2025-03-23"}
2025-03-23 11:51:26 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"date_min":"2025-03-22","date_max":"2025-03-23"}
2025-03-23 11:51:27 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:51:27 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:51:27 [INFO]: Fetching WooCommerce product details for ID: 127
2025-03-23 11:51:27 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:51:27 [INFO]: Fetching WooCommerce product details for ID: 210
2025-03-23 11:51:41 [INFO]: Analytics period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:41 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:41 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:51:41 [INFO]: Revenue chart period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:41 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:41 [INFO]: Popular products period: 30d, params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:41 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:42 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:51:42 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:51:42 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:51:42 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:51:42 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:51:43 [INFO]: Analytics period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:51:43 [INFO]: Revenue chart period: 30d, params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce sales report with params: {"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:43 [INFO]: Popular products period: 30d, params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"date_min":"2025-02-21","date_max":"2025-03-23"}
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:51:43 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:54:09 [INFO]: Logger initialized
2025-03-23 11:54:09 [INFO]: Automatic synchronization is disabled
2025-03-23 11:54:09 [INFO]: Server running on port 3001
2025-03-23 11:54:09 [INFO]: API-only mode enabled
2025-03-23 11:54:10 [INFO]: Logger initialized
2025-03-23 11:54:11 [INFO]: Automatic synchronization is disabled
2025-03-23 11:54:11 [INFO]: Server running on port 3001
2025-03-23 11:54:11 [INFO]: API-only mode enabled
2025-03-23 11:54:13 [INFO]: Logger initialized
2025-03-23 11:54:13 [INFO]: Automatic synchronization is disabled
2025-03-23 11:54:13 [INFO]: Server running on port 3001
2025-03-23 11:54:13 [INFO]: API-only mode enabled
2025-03-23 11:54:15 [INFO]: Logger initialized
2025-03-23 11:54:15 [INFO]: Automatic synchronization is disabled
2025-03-23 11:54:15 [INFO]: Server running on port 3001
2025-03-23 11:54:15 [INFO]: API-only mode enabled
2025-03-23 11:54:22 [INFO]: Getting orders summary for period: 30d
2025-03-23 11:54:22 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 11:54:22 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 11:54:22 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:54:22 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 11:54:22 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 11:54:22 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 11:54:22 [INFO]: Getting popular products for period: 30d
2025-03-23 11:54:22 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 11:54:22 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 11:54:23 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:54:23 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:54:23 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:54:23 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:54:23 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:54:24 [INFO]: Getting orders summary for period: 30d
2025-03-23 11:54:24 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 11:54:24 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 11:54:24 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:54:24 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 11:54:24 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 11:54:24 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 11:54:24 [INFO]: Getting popular products for period: 30d
2025-03-23 11:54:24 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 11:54:24 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 11:54:25 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:54:25 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:54:25 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:54:25 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:54:25 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:55:03 [INFO]: Getting orders summary for period: thisYear
2025-03-23 11:55:03 [INFO]: Analytics request params: {"period":"year"}
2025-03-23 11:55:03 [INFO]: Fetching WooCommerce sales report with params: {"period":"year"}
2025-03-23 11:55:03 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:55:03 [INFO]: Getting revenue chart data for period: thisYear
2025-03-23 11:55:03 [INFO]: Revenue chart request params: {"period":"year"}
2025-03-23 11:55:03 [INFO]: Fetching WooCommerce sales report with params: {"period":"year"}
2025-03-23 11:55:03 [INFO]: Getting popular products for period: thisYear
2025-03-23 11:55:03 [INFO]: Popular products request params: {"limit":5,"period":"year"}
2025-03-23 11:55:03 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"year"}
2025-03-23 11:55:04 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:55:04 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:55:04 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:55:04 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 11:55:04 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:55:20 [INFO]: Getting orders summary for period: allTime
2025-03-23 11:55:20 [INFO]: Analytics request params: {}
2025-03-23 11:55:20 [INFO]: Fetching WooCommerce sales report with params: {}
2025-03-23 11:55:20 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:55:20 [INFO]: Getting revenue chart data for period: allTime
2025-03-23 11:55:20 [INFO]: Revenue chart request params: {}
2025-03-23 11:55:20 [INFO]: Fetching WooCommerce sales report with params: {}
2025-03-23 11:55:20 [INFO]: Getting popular products for period: allTime
2025-03-23 11:55:20 [INFO]: Popular products request params: {"limit":5}
2025-03-23 11:55:20 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5}
2025-03-23 11:55:21 [INFO]: Fetching WooCommerce product details for ID: 127
2025-03-23 11:55:21 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:55:25 [INFO]: Getting orders summary for period: today
2025-03-23 11:55:25 [INFO]: Analytics request params: {"period":"today"}
2025-03-23 11:55:25 [INFO]: Fetching WooCommerce sales report with params: {"period":"today"}
2025-03-23 11:55:25 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:55:25 [INFO]: Getting revenue chart data for period: today
2025-03-23 11:55:25 [INFO]: Revenue chart request params: {"period":"today"}
2025-03-23 11:55:25 [INFO]: Fetching WooCommerce sales report with params: {"period":"today"}
2025-03-23 11:55:25 [INFO]: Getting popular products for period: today
2025-03-23 11:55:25 [INFO]: Popular products request params: {"limit":5,"period":"today"}
2025-03-23 11:55:25 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"today"}
2025-03-23 11:55:29 [INFO]: Getting orders summary for period: 7d
2025-03-23 11:55:29 [INFO]: Analytics request params: {"period":"week"}
2025-03-23 11:55:29 [INFO]: Fetching WooCommerce sales report with params: {"period":"week"}
2025-03-23 11:55:29 [INFO]: Fetching WooCommerce orders totals
2025-03-23 11:55:29 [INFO]: Getting revenue chart data for period: 7d
2025-03-23 11:55:29 [INFO]: Revenue chart request params: {"period":"week"}
2025-03-23 11:55:29 [INFO]: Fetching WooCommerce sales report with params: {"period":"week"}
2025-03-23 11:55:29 [INFO]: Getting popular products for period: 7d
2025-03-23 11:55:29 [INFO]: Popular products request params: {"limit":5,"period":"week"}
2025-03-23 11:55:29 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"week"}
2025-03-23 11:55:30 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 11:55:30 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 11:55:30 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 11:55:30 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 11:55:30 [INFO]: Fetching WooCommerce product details for ID: 127
2025-03-23 11:55:44 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 11:55:45 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:00:32 [INFO]: Logger initialized
2025-03-23 12:00:32 [INFO]: Automatic synchronization is disabled
2025-03-23 12:00:32 [INFO]: Server running on port 3001
2025-03-23 12:00:32 [INFO]: API-only mode enabled
2025-03-23 12:00:51 [INFO]: Logger initialized
2025-03-23 12:00:51 [INFO]: Automatic synchronization is disabled
2025-03-23 12:00:51 [INFO]: Server running on port 3001
2025-03-23 12:00:51 [INFO]: API-only mode enabled
2025-03-23 12:01:07 [INFO]: Logger initialized
2025-03-23 12:01:07 [INFO]: Automatic synchronization is disabled
2025-03-23 12:01:07 [INFO]: Server running on port 3001
2025-03-23 12:01:07 [INFO]: API-only mode enabled
2025-03-23 12:01:10 [INFO]: Logger initialized
2025-03-23 12:01:10 [INFO]: Automatic synchronization is disabled
2025-03-23 12:01:10 [INFO]: Server running on port 3001
2025-03-23 12:01:10 [INFO]: API-only mode enabled
2025-03-23 12:01:22 [INFO]: Logger initialized
2025-03-23 12:01:22 [INFO]: Automatic synchronization is disabled
2025-03-23 12:01:22 [INFO]: Server running on port 3001
2025-03-23 12:01:22 [INFO]: API-only mode enabled
2025-03-23 12:01:44 [INFO]: Logger initialized
2025-03-23 12:01:44 [INFO]: Automatic synchronization is disabled
2025-03-23 12:01:44 [INFO]: Server running on port 3001
2025-03-23 12:01:44 [INFO]: API-only mode enabled
2025-03-23 12:02:17 [INFO]: Logger initialized
2025-03-23 12:02:17 [INFO]: Automatic synchronization is disabled
2025-03-23 12:02:17 [INFO]: Server running on port 3001
2025-03-23 12:02:17 [INFO]: API-only mode enabled
2025-03-23 12:04:09 [INFO]: Logger initialized
2025-03-23 12:04:09 [INFO]: Automatic synchronization is disabled
2025-03-23 12:04:09 [INFO]: Server running on port 3001
2025-03-23 12:04:09 [INFO]: API-only mode enabled
2025-03-23 12:04:20 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:04:21 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:05:52 [INFO]: Logger initialized
2025-03-23 12:05:52 [INFO]: Automatic synchronization is disabled
2025-03-23 12:05:52 [INFO]: Server running on port 3001
2025-03-23 12:05:52 [INFO]: API-only mode enabled
2025-03-23 12:06:56 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:06:56 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:06:57 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:06:57 [ERROR]: Error fetching invoices:
2025-03-23 12:07:01 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:07:01 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:07:01 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:07:01 [ERROR]: Error fetching invoices:
2025-03-23 12:07:01 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:07:01 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:07:01 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:07:01 [ERROR]: Error fetching invoices:
2025-03-23 12:09:16 [INFO]: Logger initialized
2025-03-23 12:09:16 [INFO]: Automatic synchronization is disabled
2025-03-23 12:09:16 [INFO]: Server running on port 3001
2025-03-23 12:09:16 [INFO]: API-only mode enabled
2025-03-23 12:09:18 [INFO]: Logger initialized
2025-03-23 12:09:18 [INFO]: Automatic synchronization is disabled
2025-03-23 12:09:18 [INFO]: Server running on port 3001
2025-03-23 12:09:18 [INFO]: API-only mode enabled
2025-03-23 12:09:21 [INFO]: Logger initialized
2025-03-23 12:09:21 [INFO]: Automatic synchronization is disabled
2025-03-23 12:09:21 [INFO]: Server running on port 3001
2025-03-23 12:09:21 [INFO]: API-only mode enabled
2025-03-23 12:09:26 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:09:26 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:09:26 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:09:26 [ERROR]: Error fetching invoices:
2025-03-23 12:09:26 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:09:26 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:09:27 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:09:27 [ERROR]: Error fetching invoices:
2025-03-23 12:09:53 [INFO]: Logger initialized
2025-03-23 12:09:53 [INFO]: Automatic synchronization is disabled
2025-03-23 12:09:53 [INFO]: Server running on port 3001
2025-03-23 12:09:53 [INFO]: API-only mode enabled
2025-03-23 12:09:57 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:09:57 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:09:58 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:09:58 [ERROR]: Error fetching invoices:
2025-03-23 12:09:58 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:09:58 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:09:58 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:09:58 [ERROR]: Error fetching invoices:
2025-03-23 12:10:48 [INFO]: Logger initialized
2025-03-23 12:10:48 [INFO]: Automatic synchronization is disabled
2025-03-23 12:10:48 [INFO]: Server running on port 3001
2025-03-23 12:10:48 [INFO]: API-only mode enabled
2025-03-23 12:11:14 [INFO]: Logger initialized
2025-03-23 12:11:14 [INFO]: Automatic synchronization is disabled
2025-03-23 12:11:14 [INFO]: Server running on port 3001
2025-03-23 12:11:14 [INFO]: API-only mode enabled
2025-03-23 12:13:45 [INFO]: Logger initialized
2025-03-23 12:13:46 [INFO]: Automatic synchronization is disabled
2025-03-23 12:13:46 [INFO]: Server running on port 3001
2025-03-23 12:13:46 [INFO]: API-only mode enabled
2025-03-23 12:13:46 [INFO]: Logger initialized
2025-03-23 12:13:46 [INFO]: Automatic synchronization is disabled
2025-03-23 12:13:46 [INFO]: Server running on port 3001
2025-03-23 12:13:46 [INFO]: API-only mode enabled
2025-03-23 12:13:51 [INFO]: Logger initialized
2025-03-23 12:13:51 [INFO]: Automatic synchronization is disabled
2025-03-23 12:13:51 [INFO]: Server running on port 3001
2025-03-23 12:13:51 [INFO]: API-only mode enabled
2025-03-23 12:13:55 [INFO]: Logger initialized
2025-03-23 12:13:55 [INFO]: Automatic synchronization is disabled
2025-03-23 12:13:55 [INFO]: Server running on port 3001
2025-03-23 12:13:55 [INFO]: API-only mode enabled
2025-03-23 12:13:57 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:13:57 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:13:57 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:13:57 [ERROR]: Error fetching invoices:
2025-03-23 12:13:57 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:13:57 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:13:57 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:13:57 [ERROR]: Error fetching invoices:
2025-03-23 12:14:56 [INFO]: Logger initialized
2025-03-23 12:14:56 [INFO]: Automatic synchronization is disabled
2025-03-23 12:14:56 [INFO]: Server running on port 3001
2025-03-23 12:14:56 [INFO]: API-only mode enabled
2025-03-23 12:15:13 [INFO]: Logger initialized
2025-03-23 12:15:13 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:13 [INFO]: Server running on port 3001
2025-03-23 12:15:13 [INFO]: API-only mode enabled
2025-03-23 12:15:13 [INFO]: Logger initialized
2025-03-23 12:15:13 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:13 [INFO]: Server running on port 3001
2025-03-23 12:15:13 [INFO]: API-only mode enabled
2025-03-23 12:15:15 [INFO]: Logger initialized
2025-03-23 12:15:16 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:16 [INFO]: Server running on port 3001
2025-03-23 12:15:16 [INFO]: API-only mode enabled
2025-03-23 12:15:18 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:15:18 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:15:18 [INFO]: Merit API URL: https://aktiva.merit.ee/api/v1/
2025-03-23 12:15:18 [INFO]: Merit API ID: c113c6ed...
2025-03-23 12:15:18 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:15:18 [ERROR]: API response status: 404
2025-03-23 12:15:18 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:15:18 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:15:18 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=48.417543822671306; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=0d76690ed6b3d9d56c4d3705a00b7910eed3abbf1c72843169c196b35d560478;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=0d76690ed6b3d9d56c4d3705a00b7910eed3abbf1c72843169c196b35d560478;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:15:18 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:15:18 [ERROR]: Error fetching invoices:
2025-03-23 12:15:18 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:15:18 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:15:18 [INFO]: Merit API URL: https://aktiva.merit.ee/api/v1/
2025-03-23 12:15:18 [INFO]: Merit API ID: c113c6ed...
2025-03-23 12:15:19 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:15:19 [ERROR]: API response status: 404
2025-03-23 12:15:19 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:15:19 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:15:18 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=31.151819168628947; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=9b73c624aac9b51068cd5e6310e873e63e15ea6eb47f8a05a8de18172f9ea325;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=9b73c624aac9b51068cd5e6310e873e63e15ea6eb47f8a05a8de18172f9ea325;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:15:19 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:15:19 [ERROR]: Error fetching invoices:
2025-03-23 12:15:22 [INFO]: Logger initialized
2025-03-23 12:15:22 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:22 [INFO]: Server running on port 3001
2025-03-23 12:15:22 [INFO]: API-only mode enabled
2025-03-23 12:15:37 [INFO]: Logger initialized
2025-03-23 12:15:37 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:37 [INFO]: Server running on port 3001
2025-03-23 12:15:37 [INFO]: API-only mode enabled
2025-03-23 12:15:39 [INFO]: Logger initialized
2025-03-23 12:15:40 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:40 [INFO]: Server running on port 3001
2025-03-23 12:15:40 [INFO]: API-only mode enabled
2025-03-23 12:15:41 [INFO]: Logger initialized
2025-03-23 12:15:41 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:41 [INFO]: Server running on port 3001
2025-03-23 12:15:41 [INFO]: API-only mode enabled
2025-03-23 12:15:46 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:15:46 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:15:46 [INFO]: Merit API URL: https://aktiva.merit.ee/api/v1/
2025-03-23 12:15:46 [INFO]: Merit API ID: c113c6ed...
2025-03-23 12:15:47 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:15:47 [ERROR]: API response status: 404
2025-03-23 12:15:47 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:15:47 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:15:47 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=96.34243116718895; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=9c4f412a05eda3ba410ecb109f46719fc2b6db05f8a149292c62bb587d9a76d2;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=9c4f412a05eda3ba410ecb109f46719fc2b6db05f8a149292c62bb587d9a76d2;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:15:47 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:15:47 [ERROR]: Error fetching invoices:
2025-03-23 12:15:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:15:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:15:47 [INFO]: Merit API URL: https://aktiva.merit.ee/api/v1/
2025-03-23 12:15:47 [INFO]: Merit API ID: c113c6ed...
2025-03-23 12:15:47 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:15:47 [ERROR]: API response status: 404
2025-03-23 12:15:47 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:15:47 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:15:46 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=87.99438964990436; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=6d0f50bfc407b789c77cddd81f56debb6c63fa7a698533ff3424dc516a7c7863;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=6d0f50bfc407b789c77cddd81f56debb6c63fa7a698533ff3424dc516a7c7863;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:15:47 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:15:47 [ERROR]: Error fetching invoices:
2025-03-23 12:15:50 [INFO]: Logger initialized
2025-03-23 12:15:50 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:50 [INFO]: Server running on port 3001
2025-03-23 12:15:50 [INFO]: API-only mode enabled
2025-03-23 12:15:59 [INFO]: Logger initialized
2025-03-23 12:15:59 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:15:59 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:15:59 [INFO]: Automatic synchronization is disabled
2025-03-23 12:15:59 [INFO]: Server running on port 3001
2025-03-23 12:15:59 [INFO]: API-only mode enabled
2025-03-23 12:16:02 [INFO]: Logger initialized
2025-03-23 12:16:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:02 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:02 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:02 [INFO]: Server running on port 3001
2025-03-23 12:16:02 [INFO]: API-only mode enabled
2025-03-23 12:16:11 [INFO]: Logger initialized
2025-03-23 12:16:12 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:12 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:12 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:12 [INFO]: Server running on port 3001
2025-03-23 12:16:12 [INFO]: API-only mode enabled
2025-03-23 12:16:14 [INFO]: Logger initialized
2025-03-23 12:16:14 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:14 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:14 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:14 [INFO]: Server running on port 3001
2025-03-23 12:16:14 [INFO]: API-only mode enabled
2025-03-23 12:16:15 [INFO]: Logger initialized
2025-03-23 12:16:15 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:15 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:15 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:15 [INFO]: Server running on port 3001
2025-03-23 12:16:15 [INFO]: API-only mode enabled
2025-03-23 12:16:16 [INFO]: Logger initialized
2025-03-23 12:16:16 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:16 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:16 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:16 [INFO]: Server running on port 3001
2025-03-23 12:16:16 [INFO]: API-only mode enabled
2025-03-23 12:16:17 [INFO]: Logger initialized
2025-03-23 12:16:17 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:17 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:17 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:17 [INFO]: Server running on port 3001
2025-03-23 12:16:17 [INFO]: API-only mode enabled
2025-03-23 12:16:20 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:16:20 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:16:20 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices
2025-03-23 12:16:21 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:16:21 [ERROR]: API response status: 404
2025-03-23 12:16:21 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:16:21 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:16:21 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=12.631174151321812; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=9711c419a659049fd2590cda84358b6b7fe4a165cdb6acbb6ef91d696e076af4;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=9711c419a659049fd2590cda84358b6b7fe4a165cdb6acbb6ef91d696e076af4;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:16:21 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:16:21 [ERROR]: Error fetching invoices:
2025-03-23 12:16:21 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:16:21 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:16:21 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices
2025-03-23 12:16:21 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:16:21 [ERROR]: API response status: 404
2025-03-23 12:16:21 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:16:21 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:16:20 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=14.674377186652542; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=6d0f50bfc407b789c77cddd81f56debb6c63fa7a698533ff3424dc516a7c7863;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=6d0f50bfc407b789c77cddd81f56debb6c63fa7a698533ff3424dc516a7c7863;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:16:21 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:16:21 [ERROR]: Error fetching invoices:
2025-03-23 12:16:30 [INFO]: Logger initialized
2025-03-23 12:16:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:31 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:31 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:31 [INFO]: Server running on port 3001
2025-03-23 12:16:31 [INFO]: API-only mode enabled
2025-03-23 12:16:54 [INFO]: Logger initialized
2025-03-23 12:16:54 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:54 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:54 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:54 [INFO]: Server running on port 3001
2025-03-23 12:16:54 [INFO]: API-only mode enabled
2025-03-23 12:16:56 [INFO]: Logger initialized
2025-03-23 12:16:56 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/api/v1
2025-03-23 12:16:56 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:16:56 [INFO]: Automatic synchronization is disabled
2025-03-23 12:16:56 [INFO]: Server running on port 3001
2025-03-23 12:16:56 [INFO]: API-only mode enabled
2025-03-23 12:17:02 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:17:02 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:17:02 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices
2025-03-23 12:17:03 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:17:03 [ERROR]: API response status: 404
2025-03-23 12:17:03 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:17:03 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:17:02 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=51.84195462825816; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=e62b947e6340589f02236fa9ca24cbc0ba3f5749107df36ea12aae4b8106c265;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=e62b947e6340589f02236fa9ca24cbc0ba3f5749107df36ea12aae4b8106c265;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:17:03 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:17:03 [ERROR]: Error fetching invoices:
2025-03-23 12:17:03 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:17:03 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:17:03 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices
2025-03-23 12:17:03 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:17:03 [ERROR]: API response status: 404
2025-03-23 12:17:03 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:17:03 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:17:03 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=39.66498993947859; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=f5fc5fc3d5b08f9d845fabe21e1789ffaac1d29e1628cab01c21b75a21e2da00;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=f5fc5fc3d5b08f9d845fabe21e1789ffaac1d29e1628cab01c21b75a21e2da00;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:17:03 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:17:03 [ERROR]: Error fetching invoices:
2025-03-23 12:17:41 [INFO]: Logger initialized
2025-03-23 12:17:41 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:17:41 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:17:41 [INFO]: Automatic synchronization is disabled
2025-03-23 12:17:41 [INFO]: Server running on port 3001
2025-03-23 12:17:41 [INFO]: API-only mode enabled
2025-03-23 12:17:52 [INFO]: Logger initialized
2025-03-23 12:17:52 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:17:52 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:17:52 [INFO]: Automatic synchronization is disabled
2025-03-23 12:17:52 [INFO]: Server running on port 3001
2025-03-23 12:17:52 [INFO]: API-only mode enabled
2025-03-23 12:18:02 [INFO]: Logger initialized
2025-03-23 12:18:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:18:02 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:18:02 [INFO]: Automatic synchronization is disabled
2025-03-23 12:18:02 [INFO]: Server running on port 3001
2025-03-23 12:18:02 [INFO]: API-only mode enabled
2025-03-23 12:18:11 [INFO]: Logger initialized
2025-03-23 12:18:11 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:18:11 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:18:11 [INFO]: Automatic synchronization is disabled
2025-03-23 12:18:11 [INFO]: Server running on port 3001
2025-03-23 12:18:11 [INFO]: API-only mode enabled
2025-03-23 12:18:28 [INFO]: Logger initialized
2025-03-23 12:18:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:18:29 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:18:29 [INFO]: Automatic synchronization is disabled
2025-03-23 12:18:29 [INFO]: Server running on port 3001
2025-03-23 12:18:29 [INFO]: API-only mode enabled
2025-03-23 12:19:02 [INFO]: Logger initialized
2025-03-23 12:19:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:19:02 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:19:02 [INFO]: Automatic synchronization is disabled
2025-03-23 12:19:02 [INFO]: Server running on port 3001
2025-03-23 12:19:02 [INFO]: API-only mode enabled
2025-03-23 12:19:05 [INFO]: Logger initialized
2025-03-23 12:19:05 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:19:05 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:19:05 [INFO]: Automatic synchronization is disabled
2025-03-23 12:19:05 [INFO]: Server running on port 3001
2025-03-23 12:19:05 [INFO]: API-only mode enabled
2025-03-23 12:19:09 [INFO]: Logger initialized
2025-03-23 12:19:09 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:19:09 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:19:09 [INFO]: Automatic synchronization is disabled
2025-03-23 12:19:09 [INFO]: Server running on port 3001
2025-03-23 12:19:09 [INFO]: API-only mode enabled
2025-03-23 12:19:12 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:19:12 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:19:12 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices
2025-03-23 12:19:12 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:19:12 [ERROR]: API response status: 404
2025-03-23 12:19:12 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:19:12 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:19:12 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=45.29564299677538; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=5a03bb185be0afa108d5f564015ac51ab3be6392be611aebfb46182c2f125b9f;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=5a03bb185be0afa108d5f564015ac51ab3be6392be611aebfb46182c2f125b9f;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:19:12 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:19:12 [ERROR]: Error fetching invoices:
2025-03-23 12:19:12 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:19:12 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:19:12 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices
2025-03-23 12:19:13 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:19:13 [ERROR]: API response status: 404
2025-03-23 12:19:13 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v1/getinvoices'.","MessageDetail":"No action was found on the controller 'V1' that matches the request."}
2025-03-23 12:19:13 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:19:12 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=52.651855339824685; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=f1b622a7b70f2283c2061a99ab719ff9ac5c24ddc605057d43c6cdd70dd99a0e;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=f1b622a7b70f2283c2061a99ab719ff9ac5c24ddc605057d43c6cdd70dd99a0e;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:19:13 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:19:13 [ERROR]: Error fetching invoices:
2025-03-23 12:19:39 [INFO]: Logger initialized
2025-03-23 12:19:39 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:19:39 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:19:39 [INFO]: Automatic synchronization is disabled
2025-03-23 12:19:39 [INFO]: Server running on port 3001
2025-03-23 12:19:39 [INFO]: API-only mode enabled
2025-03-23 12:20:22 [INFO]: Logger initialized
2025-03-23 12:20:22 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:20:22 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:20:22 [INFO]: Automatic synchronization is disabled
2025-03-23 12:20:22 [INFO]: Server running on port 3001
2025-03-23 12:20:22 [INFO]: API-only mode enabled
2025-03-23 12:20:24 [INFO]: Logger initialized
2025-03-23 12:20:24 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:20:24 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:20:24 [INFO]: Automatic synchronization is disabled
2025-03-23 12:20:24 [INFO]: Server running on port 3001
2025-03-23 12:20:24 [INFO]: API-only mode enabled
2025-03-23 12:20:28 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:20:28 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:20:28 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices
2025-03-23 12:20:28 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:20:28 [ERROR]: API response status: 404
2025-03-23 12:20:28 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v2/getinvoices'.","MessageDetail":"No action was found on the controller 'V2' that matches the request."}
2025-03-23 12:20:28 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:20:28 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=91.18726054694066; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=f1b622a7b70f2283c2061a99ab719ff9ac5c24ddc605057d43c6cdd70dd99a0e;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=f1b622a7b70f2283c2061a99ab719ff9ac5c24ddc605057d43c6cdd70dd99a0e;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:20:28 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:20:28 [ERROR]: Error fetching invoices:
2025-03-23 12:20:28 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:20:28 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:20:28 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices
2025-03-23 12:20:28 [ERROR]: Merit API request failed: Request failed with status code 404
2025-03-23 12:20:28 [ERROR]: API response status: 404
2025-03-23 12:20:28 [ERROR]: API response data: {"Message":"No HTTP resource was found that matches the request URI 'https://aktiva.merit.ee/api/v2/getinvoices'.","MessageDetail":"No action was found on the controller 'V2' that matches the request."}
2025-03-23 12:20:28 [ERROR]: API response headers: {"content-length":"202","content-type":"application/json; charset=utf-8","date":"Sun, 23 Mar 2025 10:20:28 GMT","access-control-expose-headers":"Request-Context","cache-control":"no-cache","expires":"-1","pragma":"no-cache","set-cookie":["TiPMix=65.80363527392181; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","x-ms-routing-name=self; path=/; HttpOnly; Domain=aktiva.merit.ee; Max-Age=3600; Secure; SameSite=None","ARRAffinity=8a1cd434e1d740a8223283af518185fdecf269b877c93f93ecec79255303670c;Path=/;HttpOnly;Secure;Domain=aktiva.merit.ee","ARRAffinitySameSite=8a1cd434e1d740a8223283af518185fdecf269b877c93f93ecec79255303670c;Path=/;HttpOnly;SameSite=None;Secure;Domain=aktiva.merit.ee"],"request-context":"appId=cid-v1:cad3baf8-9dd2-4099-9025-40fc7cccf3e6"}
2025-03-23 12:20:28 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:20:28 [ERROR]: Error fetching invoices:
2025-03-23 12:21:02 [INFO]: Logger initialized
2025-03-23 12:21:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee/
2025-03-23 12:21:02 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:21:02 [INFO]: Automatic synchronization is disabled
2025-03-23 12:21:02 [INFO]: Server running on port 3001
2025-03-23 12:21:02 [INFO]: API-only mode enabled
2025-03-23 12:21:05 [INFO]: Logger initialized
2025-03-23 12:21:05 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:21:05 [INFO]: Using API ID: c113c6ed...
2025-03-23 12:21:05 [INFO]: Automatic synchronization is disabled
2025-03-23 12:21:05 [INFO]: Server running on port 3001
2025-03-23 12:21:05 [INFO]: API-only mode enabled
2025-03-23 12:24:15 [INFO]: Logger initialized
2025-03-23 12:24:15 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:24:15 [INFO]: Automatic synchronization is disabled
2025-03-23 12:24:15 [INFO]: Server running on port 3001
2025-03-23 12:24:15 [INFO]: API-only mode enabled
2025-03-23 12:24:29 [INFO]: Logger initialized
2025-03-23 12:24:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:24:29 [INFO]: Automatic synchronization is disabled
2025-03-23 12:24:29 [INFO]: Server running on port 3001
2025-03-23 12:24:29 [INFO]: API-only mode enabled
2025-03-23 12:24:30 [INFO]: Logger initialized
2025-03-23 12:24:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:24:31 [INFO]: Automatic synchronization is disabled
2025-03-23 12:24:31 [INFO]: Server running on port 3001
2025-03-23 12:24:31 [INFO]: API-only mode enabled
2025-03-23 12:24:32 [INFO]: Logger initialized
2025-03-23 12:24:32 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:24:32 [INFO]: Automatic synchronization is disabled
2025-03-23 12:24:32 [INFO]: Server running on port 3001
2025-03-23 12:24:32 [INFO]: API-only mode enabled
2025-03-23 12:27:27 [INFO]: Logger initialized
2025-03-23 12:27:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:27:27 [INFO]: Automatic synchronization is disabled
2025-03-23 12:27:27 [INFO]: Server running on port 3001
2025-03-23 12:27:27 [INFO]: API-only mode enabled
2025-03-23 12:27:32 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:27:32 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:27:32 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323102732&signature=lwnmYWQ5U8TRgLfRsiBUXOdzh7LbBz0e0jhepIv4rQI%3D
2025-03-23 12:27:33 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:27:33 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:27:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323102733&signature=vCdxUYlDWiQYVknd01Y2HtUpvsoOI8%2BFu3Ou2C2rLIA%3D
2025-03-23 12:27:55 [INFO]: Logger initialized
2025-03-23 12:27:55 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:27:55 [INFO]: Automatic synchronization is disabled
2025-03-23 12:27:55 [INFO]: Server running on port 3001
2025-03-23 12:27:55 [INFO]: API-only mode enabled
2025-03-23 12:27:56 [INFO]: Logger initialized
2025-03-23 12:27:56 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:27:56 [INFO]: Automatic synchronization is disabled
2025-03-23 12:27:56 [INFO]: Server running on port 3001
2025-03-23 12:27:56 [INFO]: API-only mode enabled
2025-03-23 12:28:27 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:28:27 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:28:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323102827&signature=kog%2F2S86GajGhflNF1mAoIrSRXTEyzEB%2BqmIiI%2BXX38%3D
2025-03-23 12:28:27 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false}
2025-03-23 12:28:27 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:28:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323102827&signature=kog%2F2S86GajGhflNF1mAoIrSRXTEyzEB%2BqmIiI%2BXX38%3D
2025-03-23 12:31:10 [INFO]: Logger initialized
2025-03-23 12:31:10 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:31:10 [INFO]: Automatic synchronization is disabled
2025-03-23 12:31:10 [INFO]: Server running on port 3001
2025-03-23 12:31:10 [INFO]: API-only mode enabled
2025-03-23 12:31:28 [INFO]: Logger initialized
2025-03-23 12:31:28 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:31:28 [INFO]: Automatic synchronization is disabled
2025-03-23 12:31:28 [INFO]: Server running on port 3001
2025-03-23 12:31:28 [INFO]: API-only mode enabled
2025-03-23 12:32:39 [INFO]: Logger initialized
2025-03-23 12:32:39 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:32:39 [INFO]: Automatic synchronization is disabled
2025-03-23 12:32:39 [INFO]: Server running on port 3001
2025-03-23 12:32:39 [INFO]: API-only mode enabled
2025-03-23 12:32:42 [INFO]: Logger initialized
2025-03-23 12:32:42 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:32:42 [INFO]: Automatic synchronization is disabled
2025-03-23 12:32:42 [INFO]: Server running on port 3001
2025-03-23 12:32:42 [INFO]: API-only mode enabled
2025-03-23 12:32:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:32:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:32:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103247&signature=raMcEiv9gQ%2BaKep9jEYn8eeIUgxjbECmscR7iBVqXuQ%3D
2025-03-23 12:32:48 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:32:48 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:32:48 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103248&signature=DxlFy7NCSTXy6cblvcAb3essvzAAIV4R%2BBPuWShNHbk%3D
2025-03-23 12:33:31 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:33:31 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:33:31 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103331&signature=aVKD%2B%2FD5Kl5f2%2F3mi7bP71fhPqXSEeL8QchQo5%2B4dG8%3D
2025-03-23 12:33:41 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:33:41 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:33:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103341&signature=T%2Fn2XMD1Q4ZZLwZewv%2BDiSXrGLMvS%2F7FVu4Ljmt%2ByRc%3D
2025-03-23 12:33:59 [INFO]: Logger initialized
2025-03-23 12:34:00 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:34:00 [INFO]: Automatic synchronization is disabled
2025-03-23 12:34:00 [INFO]: Server running on port 3001
2025-03-23 12:34:00 [INFO]: API-only mode enabled
2025-03-23 12:34:02 [INFO]: Logger initialized
2025-03-23 12:34:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:34:02 [INFO]: Automatic synchronization is disabled
2025-03-23 12:34:02 [INFO]: Server running on port 3001
2025-03-23 12:34:02 [INFO]: API-only mode enabled
2025-03-23 12:34:14 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:34:14 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:14 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103414&signature=IkVH91nx5uk2ucOhIdAAu2N%2Fww0MyqXKcjQm7XfjP38%3D
2025-03-23 12:34:14 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:34:14 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:14 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103414&signature=IkVH91nx5uk2ucOhIdAAu2N%2Fww0MyqXKcjQm7XfjP38%3D
2025-03-23 12:34:28 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:34:28 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:28 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103428&signature=phK7uP2%2Fp9lOtRyv%2FRzzusB0YbnhNcfB2W%2Bcz6z%2F9Hg%3D
2025-03-23 12:34:31 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":2,"limit":10}
2025-03-23 12:34:31 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:31 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103431&signature=zMjiEpQ1PUdRJxmRsScJgW4ZIjJMUMmYJbtptcItUpQ%3D
2025-03-23 12:34:33 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":3,"limit":10}
2025-03-23 12:34:33 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103433&signature=PIYT72S6TyaDTWbPP%2B3e52ILM9%2BhIEKoURvgTAKPHeg%3D
2025-03-23 12:34:36 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":4,"limit":10}
2025-03-23 12:34:36 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:36 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103436&signature=mGo8H%2B7IORgTnK5QIgKHHlWEz3PA6r%2B%2Fkp99Hj8qnhg%3D
2025-03-23 12:34:39 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":5,"limit":10}
2025-03-23 12:34:39 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:39 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103439&signature=LTC920trvgn5ZOJY5dCmvKUiNTDPTOhS%2Fed5ZsAqDGA%3D
2025-03-23 12:34:41 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":6,"limit":10}
2025-03-23 12:34:41 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103441&signature=KTRbl6u3sAHtFA%2BskFcpPBoQ8izkpdz0Y7S9xJ7kWhU%3D
2025-03-23 12:34:43 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":7,"limit":10}
2025-03-23 12:34:43 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:43 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103443&signature=3PmOPxsDkP2no7ZwcgaaYRbfEQ7%2BNvUdmXH2aPhmC6w%3D
2025-03-23 12:34:45 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":6,"limit":10}
2025-03-23 12:34:45 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:45 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103445&signature=thoTFSREYPWiJaghl5MR2BdkUsKyHggxa5Z65gLhGgQ%3D
2025-03-23 12:34:46 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":5,"limit":10}
2025-03-23 12:34:46 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:46 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103446&signature=lXBLJRhoTR%2FaaIwLFkEuzT7BB3%2FvYMvHq8332PmDde8%3D
2025-03-23 12:34:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":4,"limit":10}
2025-03-23 12:34:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103447&signature=51I%2FbKHrj%2F9qzzdCztNDjeZozTTzrZXO%2B42TC74Uzw8%3D
2025-03-23 12:34:48 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":3,"limit":10}
2025-03-23 12:34:48 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:48 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103448&signature=jzOy%2Bwz0T3penuiwAA1ixneRTfs7NdJmlogk%2BPGpgFw%3D
2025-03-23 12:34:50 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":2,"limit":10}
2025-03-23 12:34:50 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:50 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103450&signature=%2F4cxny4lmb3bzzJkHzBVtiTpOcFvRtq2BugFgWTy5RM%3D
2025-03-23 12:34:51 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:34:51 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:34:51 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323103451&signature=qA%2FIBVetsJcPz%2FTabk%2BS7qzm8t4qwp5AZXCjfhMMwiU%3D
2025-03-23 12:43:19 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":true,"page":1,"limit":10}
2025-03-23 12:43:19 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":true}
2025-03-23 12:43:19 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104319&signature=r2xsvI5aOL1hvlgx%2B1FrclBCPUJE1OPJvt0i773Pz48%3D
2025-03-23 12:43:22 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:43:22 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:43:22 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104322&signature=sbtBhiXJ3V7dQINXzG4EdPwM7x5KgKhSZTRu05vIrTQ%3D
2025-03-23 12:43:58 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:43:59 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:44:11 [INFO]: Fetching WooCommerce order: 1752
2025-03-23 12:44:22 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:44:22 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:44:22 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:44:22 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:44:22 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:44:22 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:44:22 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:44:22 [INFO]: Getting popular products for period: 30d
2025-03-23 12:44:22 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:44:22 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:44:23 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:44:23 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:44:23 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:44:23 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:44:23 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:44:25 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:44:25 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:44:25 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:44:25 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:44:25 [INFO]: Getting popular products for period: 30d
2025-03-23 12:44:25 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:44:25 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:44:59 [INFO]: Getting orders summary for period: thisYear
2025-03-23 12:44:59 [INFO]: Analytics request params: {"period":"year"}
2025-03-23 12:44:59 [INFO]: Fetching WooCommerce sales report with params: {"period":"year"}
2025-03-23 12:44:59 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:44:59 [INFO]: Getting revenue chart data for period: thisYear
2025-03-23 12:44:59 [INFO]: Revenue chart request params: {"period":"year"}
2025-03-23 12:44:59 [INFO]: Fetching WooCommerce sales report with params: {"period":"year"}
2025-03-23 12:44:59 [INFO]: Getting popular products for period: thisYear
2025-03-23 12:44:59 [INFO]: Popular products request params: {"limit":5,"period":"year"}
2025-03-23 12:44:59 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"year"}
2025-03-23 12:45:01 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:45:01 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:45:01 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:45:01 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:45:01 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:45:04 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:45:04 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:45:04 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104504&signature=hhqMy2P2FCzGzRKzCgjP8AwSi%2FlH2Z0XtkK1ljbAzzs%3D
2025-03-23 12:45:05 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:45:05 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:45:05 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104505&signature=sX2BgywNf2Z78r5EAKDUtSB7HazFXAeCgRyMp2HgAUs%3D
2025-03-23 12:45:19 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:45:19 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:45:19 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:45:19 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:45:19 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:45:19 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:45:19 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:45:19 [INFO]: Getting popular products for period: 30d
2025-03-23 12:45:19 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:45:19 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:45:20 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:45:20 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:45:20 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:45:20 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:45:20 [INFO]: Getting popular products for period: 30d
2025-03-23 12:45:20 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:45:20 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:45:21 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:45:21 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:45:21 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:45:21 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:45:21 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:45:22 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:45:25 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:45:25 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:45:25 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104525&signature=ETsBnEa%2BuZVWIum9kVhR63LoXO%2FbyEvH5adUQPqQ11o%3D
2025-03-23 12:45:26 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:45:26 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:45:26 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104526&signature=Fd%2BcAHFRjI4xjhSZttFo1cCM%2BJvWoRyc7WA9oAsnphQ%3D
2025-03-23 12:45:32 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:45:32 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:45:32 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104532&signature=3u6ho7zXasFMPcA0PSlbvFSai6DUsolTn18qK27ZOv0%3D
2025-03-23 12:45:33 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:45:33 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:45:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104533&signature=Pc06xCeiAfO%2Faw1YgDndpCkmt%2BinhTZnwwkoetflvFU%3D
2025-03-23 12:45:56 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:45:57 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:46:19 [INFO]: Fetching WooCommerce order: 1739
2025-03-23 12:46:41 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:46:43 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:46:45 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:46:45 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:46:45 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104645&signature=O4n%2Bi344gNBMIR2D9YQ%2B7ndMbm4Xp3RXbhQ%2FvDurP0Y%3D
2025-03-23 12:46:46 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:46:46 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:46:46 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104646&signature=l3FovN3dfoA4p46OivsE0rAuGwmiI2O0tjAbmAqhdys%3D
2025-03-23 12:48:50 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":2,"limit":10}
2025-03-23 12:48:50 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:48:50 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104850&signature=DN3qFqmo0E9EnyfGlNMM6XvXDb5RQfm0pqAHg2R6dXU%3D
2025-03-23 12:48:54 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:48:54 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:48:54 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323104854&signature=hihoyu64ALqmXMzG2lEuyz0TdzqAWhLfUyxMeIxLchg%3D
2025-03-23 12:50:50 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:50:50 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:50:50 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105050&signature=5s7HZ%2FluEsk5p82dteptA%2BpGXW%2BLl8BuhEB4H58%2B6bY%3D
2025-03-23 12:50:51 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:50:51 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:50:51 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105051&signature=7rNQNyAHrLM6FfuvAZqqIKAONOmu9Vba6jIQOGD2Usw%3D
2025-03-23 12:51:36 [INFO]: Logger initialized
2025-03-23 12:51:37 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:51:37 [INFO]: Automatic synchronization is disabled
2025-03-23 12:51:37 [INFO]: Server running on port 3001
2025-03-23 12:51:37 [INFO]: API-only mode enabled
2025-03-23 12:51:38 [INFO]: Logger initialized
2025-03-23 12:51:38 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:51:38 [INFO]: Automatic synchronization is disabled
2025-03-23 12:51:38 [INFO]: Server running on port 3001
2025-03-23 12:51:38 [INFO]: API-only mode enabled
2025-03-23 12:51:41 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:51:41 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:51:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105141&signature=RHDLaOrj9mzzWSMAO9flmJhpSPuoUlV2n2ngqFst8uA%3D
2025-03-23 12:51:42 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:51:42 [ERROR]: Error fetching invoices:
2025-03-23 12:51:42 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:51:42 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:51:42 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105142&signature=XoaEzU0Nt%2FajNCpmh4uGt3C0ubnyBWJuqDMs2hu3chA%3D
2025-03-23 12:51:42 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:51:42 [ERROR]: Error fetching invoices:
2025-03-23 12:51:48 [INFO]: Logger initialized
2025-03-23 12:51:48 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:51:48 [INFO]: Automatic synchronization is disabled
2025-03-23 12:51:48 [INFO]: Server running on port 3001
2025-03-23 12:51:48 [INFO]: API-only mode enabled
2025-03-23 12:51:54 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:51:54 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:51:54 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105154&signature=1rfn%2F8KRwD2ij%2BP7F79VKVit7z4hsDdyBjR6325F3bI%3D
2025-03-23 12:51:55 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:51:55 [ERROR]: Error fetching invoices:
2025-03-23 12:51:55 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:51:55 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:51:55 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105155&signature=rCR0Zu6N7cEOK8GBNE41Ygdf9Ufpc%2Fa8I2wzidOH7v0%3D
2025-03-23 12:51:55 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 12:51:55 [ERROR]: Error fetching invoices:
2025-03-23 12:53:02 [INFO]: Logger initialized
2025-03-23 12:53:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:53:02 [INFO]: Automatic synchronization is disabled
2025-03-23 12:53:02 [INFO]: Server running on port 3001
2025-03-23 12:53:02 [INFO]: API-only mode enabled
2025-03-23 12:53:06 [INFO]: Logger initialized
2025-03-23 12:53:06 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:53:06 [INFO]: Automatic synchronization is disabled
2025-03-23 12:53:06 [INFO]: Server running on port 3001
2025-03-23 12:53:06 [INFO]: API-only mode enabled
2025-03-23 12:53:15 [INFO]: Logger initialized
2025-03-23 12:53:15 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:53:15 [INFO]: Automatic synchronization is disabled
2025-03-23 12:53:15 [INFO]: Server running on port 3001
2025-03-23 12:53:15 [INFO]: API-only mode enabled
2025-03-23 12:53:18 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:53:18 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:53:18 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105318&signature=QZmeV78p2ODk1rbMO0KPg0ZVULZVemviLPu5afOnUrw%3D
2025-03-23 12:53:18 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:53:18 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:53:18 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105318&signature=QZmeV78p2ODk1rbMO0KPg0ZVULZVemviLPu5afOnUrw%3D
2025-03-23 12:53:23 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:53:23 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:53:23 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105323&signature=Wn%2BIjvSafBW4HULL0yuWynfkQKxflHx3rCugRVIOn4k%3D
2025-03-23 12:53:30 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:53:30 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:53:30 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:53:30 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:53:30 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:53:30 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:53:30 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:53:30 [INFO]: Getting popular products for period: 30d
2025-03-23 12:53:30 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:53:30 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:53:31 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:53:31 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:53:31 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:53:31 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:53:31 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:53:32 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:53:32 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:53:32 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:53:32 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:53:32 [INFO]: Getting popular products for period: 30d
2025-03-23 12:53:32 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:53:32 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:58:12 [INFO]: Logger initialized
2025-03-23 12:58:12 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 12:58:12 [INFO]: Automatic synchronization is disabled
2025-03-23 12:58:12 [INFO]: Server running on port 3001
2025-03-23 12:58:12 [INFO]: API-only mode enabled
2025-03-23 12:58:17 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:58:17 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:58:17 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105817&signature=mFDeCio3wt4DePxQvJ98Hf4isu8cI4kTbIKChgwkqXc%3D
2025-03-23 12:58:18 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:58:18 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:58:18 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:58:18 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105818&signature=Vdjucpk9tCDmSaW7XRe6Onu96fozKTJtd5jdoCTyBgU%3D
2025-03-23 12:58:18 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:58:28 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:58:29 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 12:58:47 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:58:47 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:58:47 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:58:47 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:58:47 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:58:47 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:58:47 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:58:47 [INFO]: Getting popular products for period: 30d
2025-03-23 12:58:47 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:58:47 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:58:48 [INFO]: Getting orders summary for period: 30d
2025-03-23 12:58:48 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce orders totals
2025-03-23 12:58:48 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 12:58:48 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 12:58:48 [INFO]: Getting popular products for period: 30d
2025-03-23 12:58:48 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 12:58:48 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 12:58:49 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 12:58:49 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 12:58:49 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 12:58:49 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 12:58:49 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 12:58:55 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:58:55 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:58:55 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105855&signature=gLMkFwSBYFIWCnqDNLX%2FL5D3lIIChBnaEXpljSEaBRU%3D
2025-03-23 12:58:56 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 12:58:56 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 12:58:56 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323105856&signature=w%2FtPqis6hxV2zO%2BnEfmaqy4INbvw7%2B6cBwiallGwcVU%3D
2025-03-23 13:02:14 [INFO]: Logger initialized
2025-03-23 13:02:14 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:02:14 [INFO]: Automatic synchronization is disabled
2025-03-23 13:02:14 [INFO]: Server running on port 3001
2025-03-23 13:02:14 [INFO]: API-only mode enabled
2025-03-23 13:02:18 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:02:19 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:02:27 [INFO]: Fetching WooCommerce order: 1750
2025-03-23 13:08:05 [INFO]: Logger initialized
2025-03-23 13:08:06 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:08:06 [INFO]: Automatic synchronization is disabled
2025-03-23 13:08:06 [INFO]: Server running on port 3001
2025-03-23 13:08:06 [INFO]: API-only mode enabled
2025-03-23 13:08:10 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 13:08:33 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 13:08:44 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:08:45 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:08:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:08:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:08:47 [ERROR]: Merit API request failed: The "key" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
2025-03-23 13:08:47 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 13:08:47 [ERROR]: Error fetching invoices:
2025-03-23 13:08:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:08:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:08:47 [ERROR]: Merit API request failed: The "key" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
2025-03-23 13:08:47 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 13:08:47 [ERROR]: Error fetching invoices:
2025-03-23 13:09:09 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:09:09 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:09:09 [ERROR]: Merit API request failed: The "key" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
2025-03-23 13:09:09 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 13:09:09 [ERROR]: Error fetching invoices:
2025-03-23 13:09:09 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:09:09 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:09:09 [ERROR]: Merit API request failed: The "key" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
2025-03-23 13:09:09 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 13:09:09 [ERROR]: Error fetching invoices:
2025-03-23 13:09:39 [INFO]: Logger initialized
2025-03-23 13:09:39 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:09:39 [INFO]: Automatic synchronization is disabled
2025-03-23 13:09:39 [INFO]: Server running on port 3001
2025-03-23 13:09:39 [INFO]: API-only mode enabled
2025-03-23 13:09:42 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:09:42 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:09:42 [ERROR]: Merit API request failed: The "key" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
2025-03-23 13:09:42 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 13:09:42 [ERROR]: Error fetching invoices:
2025-03-23 13:09:42 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:09:42 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:09:42 [ERROR]: Merit API request failed: The "key" argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
2025-03-23 13:09:42 [ERROR]: Error fetching invoices from Merit Aktiva:
2025-03-23 13:09:42 [ERROR]: Error fetching invoices:
2025-03-23 13:10:25 [INFO]: Logger initialized
2025-03-23 13:10:25 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:10:25 [INFO]: Automatic synchronization is disabled
2025-03-23 13:10:25 [INFO]: Server running on port 3001
2025-03-23 13:10:25 [INFO]: API-only mode enabled
2025-03-23 13:10:50 [INFO]: Logger initialized
2025-03-23 13:10:51 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:10:51 [INFO]: Automatic synchronization is disabled
2025-03-23 13:10:51 [INFO]: Server running on port 3001
2025-03-23 13:10:51 [INFO]: API-only mode enabled
2025-03-23 13:10:52 [INFO]: Logger initialized
2025-03-23 13:10:52 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:10:52 [INFO]: Automatic synchronization is disabled
2025-03-23 13:10:53 [INFO]: Server running on port 3001
2025-03-23 13:10:53 [INFO]: API-only mode enabled
2025-03-23 13:10:56 [INFO]: Logger initialized
2025-03-23 13:10:56 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:10:56 [INFO]: Automatic synchronization is disabled
2025-03-23 13:10:56 [INFO]: Server running on port 3001
2025-03-23 13:10:56 [INFO]: API-only mode enabled
2025-03-23 13:10:59 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:10:59 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:10:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111059&signature=gZyIoZU8zNOxY3CsKapPz7Y1U988kVNJsaZHp5FggwE%3D
2025-03-23 13:10:59 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:10:59 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:10:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111059&signature=gZyIoZU8zNOxY3CsKapPz7Y1U988kVNJsaZHp5FggwE%3D
2025-03-23 13:11:02 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:11:03 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:11:08 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 13:12:12 [INFO]: Logger initialized
2025-03-23 13:12:12 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:12:12 [INFO]: Automatic synchronization is disabled
2025-03-23 13:12:12 [INFO]: Server running on port 3001
2025-03-23 13:12:12 [INFO]: API-only mode enabled
2025-03-23 13:12:13 [INFO]: Logger initialized
2025-03-23 13:12:13 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:12:13 [INFO]: Automatic synchronization is disabled
2025-03-23 13:12:13 [INFO]: Server running on port 3001
2025-03-23 13:12:13 [INFO]: API-only mode enabled
2025-03-23 13:12:14 [INFO]: Logger initialized
2025-03-23 13:12:14 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:12:14 [INFO]: Automatic synchronization is disabled
2025-03-23 13:12:14 [INFO]: Server running on port 3001
2025-03-23 13:12:14 [INFO]: API-only mode enabled
2025-03-23 13:12:15 [INFO]: Logger initialized
2025-03-23 13:12:16 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:12:16 [INFO]: Automatic synchronization is disabled
2025-03-23 13:12:16 [INFO]: Server running on port 3001
2025-03-23 13:12:16 [INFO]: API-only mode enabled
2025-03-23 13:12:17 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 13:12:17 [INFO]: WooCommerce config: URL=undefined, Key=Not Set, Secret=Not Set
2025-03-23 13:12:17 [ERROR]: WooCommerce API not configured. URL: undefined, Key: Missing, Secret: Missing
2025-03-23 13:12:33 [INFO]: Logger initialized
2025-03-23 13:12:34 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:12:34 [INFO]: Automatic synchronization is disabled
2025-03-23 13:12:34 [INFO]: Server running on port 3001
2025-03-23 13:12:34 [INFO]: API-only mode enabled
2025-03-23 13:13:13 [INFO]: Logger initialized
2025-03-23 13:13:13 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:13:13 [INFO]: Automatic synchronization is disabled
2025-03-23 13:13:13 [INFO]: Server running on port 3001
2025-03-23 13:13:13 [INFO]: API-only mode enabled
2025-03-23 13:13:20 [INFO]: Logger initialized
2025-03-23 13:13:20 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:13:20 [INFO]: Automatic synchronization is disabled
2025-03-23 13:13:20 [INFO]: Server running on port 3001
2025-03-23 13:13:20 [INFO]: API-only mode enabled
2025-03-23 13:13:24 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 13:13:24 [INFO]: Using order data from request body for order #1751
2025-03-23 13:13:24 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 13:13:24 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 13:13:24 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:13:24 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:13:24 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:13:24 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:13:24 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111324&signature=whzR4gLR6T1K5lz1RwB4paREUO0vuJQ4b06P8BboX24%3D
2025-03-23 13:13:25 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:13:25 [ERROR]: API response status: 400
2025-03-23 13:13:25 [ERROR]: API response data: {"Message":"KM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\nKM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\nKM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\n"}
2025-03-23 13:13:25 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:13:25 [ERROR]: API error details: {"Message":"KM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\nKM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\nKM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\n"}
2025-03-23 13:13:25 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:13:25 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:13:25 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:171:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:13:25 [ERROR]: API response data: {"Message":"KM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\nKM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\nKM koodiga 665f01a4-357a-4a6b-a565-2f17e6e1da13 puudub või on mitteaktiivne.\n"}
2025-03-23 13:14:21 [INFO]: Logger initialized
2025-03-23 13:14:21 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:14:21 [INFO]: Automatic synchronization is disabled
2025-03-23 13:14:21 [INFO]: Server running on port 3001
2025-03-23 13:14:21 [INFO]: API-only mode enabled
2025-03-23 13:14:27 [INFO]: Logger initialized
2025-03-23 13:14:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:14:27 [INFO]: Automatic synchronization is disabled
2025-03-23 13:14:27 [INFO]: Server running on port 3001
2025-03-23 13:14:27 [INFO]: API-only mode enabled
2025-03-23 13:14:32 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 13:14:32 [INFO]: Using order data from request body for order #1751
2025-03-23 13:14:32 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 13:14:32 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 13:14:32 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:14:32 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:14:32 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:14:32 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:14:32 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111432&signature=rBcQ2yiZtmgcB8xoIVHrcR9lL0sjwRntbUvBT7ezz%2FQ%3D
2025-03-23 13:14:33 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:14:33 [ERROR]: API response status: 400
2025-03-23 13:14:33 [ERROR]: API response data: {"Message":"Korduv arve number.\n"}
2025-03-23 13:14:33 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:14:33 [ERROR]: API error details: {"Message":"Korduv arve number.\n"}
2025-03-23 13:14:33 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:14:33 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:14:33 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:171:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:14:33 [ERROR]: API response data: {"Message":"Korduv arve number.\n"}
2025-03-23 13:14:39 [INFO]: Getting orders summary for period: 30d
2025-03-23 13:14:39 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 13:14:39 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 13:14:39 [INFO]: Fetching WooCommerce orders totals
2025-03-23 13:14:39 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 13:14:39 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 13:14:39 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 13:14:39 [INFO]: Getting popular products for period: 30d
2025-03-23 13:14:39 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 13:14:39 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 13:14:41 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:14:41 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:14:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111441&signature=JWmuBl8Of%2BNBQpPwoZ7lWHzKXqxJWcn344nnnEl%2B66A%3D
2025-03-23 13:14:41 [INFO]: Getting orders summary for period: 30d
2025-03-23 13:14:41 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce orders totals
2025-03-23 13:14:41 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 13:14:41 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 13:14:41 [INFO]: Getting popular products for period: 30d
2025-03-23 13:14:41 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 13:14:41 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 13:14:41 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:14:41 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:14:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111441&signature=JWmuBl8Of%2BNBQpPwoZ7lWHzKXqxJWcn344nnnEl%2B66A%3D
2025-03-23 13:14:42 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 13:14:42 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 13:14:42 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 13:14:42 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 13:14:42 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 13:14:46 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:14:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:14:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:14:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111447&signature=a%2BvZcABNWxXmOE4deMNlNZfYvkUkmnRffjf3dp3D4S4%3D
2025-03-23 13:14:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:14:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:14:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111447&signature=a%2BvZcABNWxXmOE4deMNlNZfYvkUkmnRffjf3dp3D4S4%3D
2025-03-23 13:14:47 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:14:51 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:14:52 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:15:01 [INFO]: Manually creating invoice for WooCommerce order #1752
2025-03-23 13:15:01 [INFO]: Using order data from request body for order #1752
2025-03-23 13:15:01 [INFO]: Creating Merit invoice for WooCommerce order #1752 from provided data
2025-03-23 13:15:01 [INFO]: Processing WooCommerce order #1752 to create Merit invoice
2025-03-23 13:15:01 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:15:01 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:15:01 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:15:01 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:15:01 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111501&signature=r8LjG72rl%2FdyBIQK5oIgT6ytTs3nchN0xTTNxjZd5qE%3D
2025-03-23 13:15:01 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:15:01 [ERROR]: API response status: 400
2025-03-23 13:15:01 [ERROR]: API response data: {"Message":"Korduv arve number.\n"}
2025-03-23 13:15:01 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:15:01 [ERROR]: API error details: {"Message":"Korduv arve number.\n"}
2025-03-23 13:15:01 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:15:01 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:15:01 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:171:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:15:01 [ERROR]: API response data: {"Message":"Korduv arve number.\n"}
2025-03-23 13:18:20 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:18:22 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:18:23 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:18:23 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:18:23 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111823&signature=sSKG6GNooEbU1VtKUV2dl5nUhuualLOrSiUzQkreMlk%3D
2025-03-23 13:18:24 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:18:24 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:18:24 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323111824&signature=YFBWpedVje8wb50ACoS56eGtAkCgh9A71b5GwXuh9BM%3D
2025-03-23 13:20:10 [INFO]: Logger initialized
2025-03-23 13:20:10 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:20:10 [INFO]: Automatic synchronization is disabled
2025-03-23 13:20:10 [INFO]: Server running on port 3001
2025-03-23 13:20:10 [INFO]: API-only mode enabled
2025-03-23 13:20:19 [INFO]: Logger initialized
2025-03-23 13:20:19 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:20:19 [INFO]: Automatic synchronization is disabled
2025-03-23 13:20:19 [INFO]: Server running on port 3001
2025-03-23 13:20:19 [INFO]: API-only mode enabled
2025-03-23 13:20:27 [INFO]: Logger initialized
2025-03-23 13:20:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:20:27 [INFO]: Automatic synchronization is disabled
2025-03-23 13:20:27 [INFO]: Server running on port 3001
2025-03-23 13:20:27 [INFO]: API-only mode enabled
2025-03-23 13:20:29 [INFO]: Logger initialized
2025-03-23 13:20:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:20:29 [INFO]: Automatic synchronization is disabled
2025-03-23 13:20:29 [INFO]: Server running on port 3001
2025-03-23 13:20:29 [INFO]: API-only mode enabled
2025-03-23 13:20:43 [INFO]: Logger initialized
2025-03-23 13:20:44 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:20:44 [INFO]: Automatic synchronization is disabled
2025-03-23 13:20:44 [INFO]: Server running on port 3001
2025-03-23 13:20:44 [INFO]: API-only mode enabled
2025-03-23 13:20:58 [INFO]: Logger initialized
2025-03-23 13:20:58 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:20:58 [INFO]: Automatic synchronization is disabled
2025-03-23 13:20:58 [INFO]: Server running on port 3001
2025-03-23 13:20:58 [INFO]: API-only mode enabled
2025-03-23 13:21:02 [INFO]: Logger initialized
2025-03-23 13:21:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:21:02 [INFO]: Automatic synchronization is disabled
2025-03-23 13:21:02 [INFO]: Server running on port 3001
2025-03-23 13:21:02 [INFO]: API-only mode enabled
2025-03-23 13:21:14 [INFO]: Logger initialized
2025-03-23 13:21:14 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:21:14 [INFO]: Automatic synchronization is disabled
2025-03-23 13:21:14 [INFO]: Server running on port 3001
2025-03-23 13:21:14 [INFO]: API-only mode enabled
2025-03-23 13:21:18 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:21:19 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:21:24 [INFO]: Fetching WooCommerce order: 1753
2025-03-23 13:21:26 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:21:26 [INFO]: Using order data from request body for order #1753
2025-03-23 13:21:26 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:21:26 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:21:26 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:21:26 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323112126&signature=lPGvlIdvV0jILqb0pPsrbIzLrz2pCXBiD%2Fe4lMHCkbs%3D
2025-03-23 13:21:27 [INFO]: Next invoice number will be: 1828
2025-03-23 13:21:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:27 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:21:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323112127&signature=5Ud%2FQoMMa9JQ1P2wj%2FvJh1c4dEh%2BDE%2FibgHC%2BdXlNqI%3D
2025-03-23 13:21:27 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:21:27 [ERROR]: API response status: 400
2025-03-23 13:21:27 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:21:27 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:21:27 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:21:27 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:21:27 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:21:27 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:229:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:21:27 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:21:42 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:21:42 [INFO]: Using order data from request body for order #1753
2025-03-23 13:21:42 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:21:42 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:21:42 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:21:42 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323112142&signature=hnSSKgqzYdZD96TdkIAu4pd70casrvscc7JMGpkrLPk%3D
2025-03-23 13:21:43 [INFO]: Next invoice number will be: 1828
2025-03-23 13:21:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:21:43 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:21:43 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323112143&signature=Vz1wFbFtP%2BFm4sciDouHgUIX7nuv9HWwnm8owD1gz14%3D
2025-03-23 13:21:43 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:21:43 [ERROR]: API response status: 400
2025-03-23 13:21:43 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:21:43 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:21:43 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:21:43 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:21:43 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:21:43 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:229:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:21:43 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:34:21 [INFO]: Logger initialized
2025-03-23 13:34:21 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:34:21 [INFO]: Automatic synchronization is disabled
2025-03-23 13:34:21 [INFO]: Server running on port 3001
2025-03-23 13:34:21 [INFO]: API-only mode enabled
2025-03-23 13:34:22 [INFO]: Logger initialized
2025-03-23 13:34:22 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:34:22 [INFO]: Automatic synchronization is disabled
2025-03-23 13:34:22 [INFO]: Server running on port 3001
2025-03-23 13:34:22 [INFO]: API-only mode enabled
2025-03-23 13:34:28 [INFO]: Logger initialized
2025-03-23 13:34:28 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:34:28 [INFO]: Automatic synchronization is disabled
2025-03-23 13:34:28 [INFO]: Server running on port 3001
2025-03-23 13:34:28 [INFO]: API-only mode enabled
2025-03-23 13:34:38 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:34:38 [INFO]: Using order data from request body for order #1753
2025-03-23 13:34:38 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:34:38 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:34:38 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:34:38 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113438&signature=GDv0tzXST2CPn%2FskdP2lMwMuomlcSrTfcIaE1pcC5nI%3D
2025-03-23 13:34:40 [INFO]: Next invoice number will be: 1828
2025-03-23 13:34:40 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:34:40 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:34:40 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:34:40 [INFO]: Calculated total from invoice rows: 8.44
2025-03-23 13:34:40 [INFO]: WooCommerce order total: 10.29
2025-03-23 13:34:40 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:34:40 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:34:40 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113440&signature=X%2FCFrx65PbDNN4VPGuoF1faloxj%2FK%2Bk4mdoKIrrRYw0%3D
2025-03-23 13:34:40 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:34:40 [ERROR]: API response status: 400
2025-03-23 13:34:40 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:34:40 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:34:40 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:34:40 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:34:40 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:34:40 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:250:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:34:40 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:34:44 [INFO]: Logger initialized
2025-03-23 13:34:44 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:34:44 [INFO]: Automatic synchronization is disabled
2025-03-23 13:34:44 [INFO]: Server running on port 3001
2025-03-23 13:34:44 [INFO]: API-only mode enabled
2025-03-23 13:34:48 [INFO]: Logger initialized
2025-03-23 13:34:48 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:34:48 [INFO]: Automatic synchronization is disabled
2025-03-23 13:34:48 [INFO]: Server running on port 3001
2025-03-23 13:34:48 [INFO]: API-only mode enabled
2025-03-23 13:35:31 [INFO]: Logger initialized
2025-03-23 13:35:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:35:31 [INFO]: Automatic synchronization is disabled
2025-03-23 13:35:31 [INFO]: Server running on port 3001
2025-03-23 13:35:31 [INFO]: API-only mode enabled
2025-03-23 13:35:34 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:35:34 [INFO]: Using order data from request body for order #1753
2025-03-23 13:35:34 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:35:34 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:35:34 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:35:34 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:35:34 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113534&signature=A7PR1sTVGv4Xvb5uupzurlvLiw4MiFCKLG5SAfNFi4A%3D
2025-03-23 13:35:35 [INFO]: Next invoice number will be: 1828
2025-03-23 13:35:35 [INFO]: Line item: Toalillemuld biohuumusega, Quantity: 2, Price: 1.76, Total: 3.52
2025-03-23 13:35:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:35:35 [INFO]: Line item: Biohuumuse kontsentraat mahekasvatuseks, Quantity: 1, Price: 2.58, Total: 2.58
2025-03-23 13:35:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:35:35 [INFO]: Shipping: Omniva pakiautomaat, Price: 2.33
2025-03-23 13:35:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:35:35 [INFO]: Row total for Toalillemuld biohuumusega: 1.76 × 2 = 3.52
2025-03-23 13:35:35 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks: 2.58 × 1 = 2.58
2025-03-23 13:35:35 [INFO]: Row total for Omniva pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 13:35:35 [INFO]: Calculated total from invoice rows: 8.43
2025-03-23 13:35:35 [INFO]: WooCommerce order total: 10.29
2025-03-23 13:35:35 [WARN]: Total mismatch! Calculated: 8.43, WooCommerce: 10.29, Difference: -1.86
2025-03-23 13:35:35 [INFO]: Tax line: EE-MAKSUD-1, Amount: 1.35
2025-03-23 13:35:35 [INFO]: Total tax amount: 1.35
2025-03-23 13:35:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:35:35 [INFO]: Sending invoice to Merit with 3 rows and total: 8.43
2025-03-23 13:35:35 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:35:35 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113535&signature=pS9SYzA7xhIzk4mexeOFdsnvuR7Zd7Pv%2BY0gDQ1TQEI%3D
2025-03-23 13:35:35 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"e985ac03-065b-451f-a5b9-4b5525675a3f","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 13:35:35 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 13:35:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:35:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:35:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113547&signature=u7Ytx467FzDPXc9cTMPGleMAM3mxSbQ7kx%2F7aaritCQ%3D
2025-03-23 13:35:47 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:35:47 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:35:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113547&signature=u7Ytx467FzDPXc9cTMPGleMAM3mxSbQ7kx%2F7aaritCQ%3D
2025-03-23 13:35:58 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:35:59 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:36:03 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:36:03 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:36:03 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113603&signature=%2FTAP9XkZBaoKGaVsqSH%2F36kncPFfdC%2BakK%2FgRW9nbJU%3D
2025-03-23 13:36:04 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:36:04 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:36:04 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323113604&signature=toz7Y9JZ0i7bdf047cBH0IBMq4Eqkbm02qGMjnRDAdw%3D
2025-03-23 13:39:19 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:39:20 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:40:15 [INFO]: Logger initialized
2025-03-23 13:40:15 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:40:15 [INFO]: Automatic synchronization is disabled
2025-03-23 13:40:15 [INFO]: Server running on port 3001
2025-03-23 13:40:15 [INFO]: API-only mode enabled
2025-03-23 13:40:25 [INFO]: Logger initialized
2025-03-23 13:40:25 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:40:25 [INFO]: Automatic synchronization is disabled
2025-03-23 13:40:25 [INFO]: Server running on port 3001
2025-03-23 13:40:25 [INFO]: API-only mode enabled
2025-03-23 13:40:43 [INFO]: Logger initialized
2025-03-23 13:40:43 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:40:43 [INFO]: Automatic synchronization is disabled
2025-03-23 13:40:43 [INFO]: Server running on port 3001
2025-03-23 13:40:43 [INFO]: API-only mode enabled
2025-03-23 13:40:46 [INFO]: Logger initialized
2025-03-23 13:40:46 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:40:46 [INFO]: Automatic synchronization is disabled
2025-03-23 13:40:46 [INFO]: Server running on port 3001
2025-03-23 13:40:46 [INFO]: API-only mode enabled
2025-03-23 13:41:16 [INFO]: Logger initialized
2025-03-23 13:41:16 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:41:16 [INFO]: Automatic synchronization is disabled
2025-03-23 13:41:16 [INFO]: Server running on port 3001
2025-03-23 13:41:16 [INFO]: API-only mode enabled
2025-03-23 13:41:18 [INFO]: Logger initialized
2025-03-23 13:41:18 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:41:18 [INFO]: Automatic synchronization is disabled
2025-03-23 13:41:18 [INFO]: Server running on port 3001
2025-03-23 13:41:18 [INFO]: API-only mode enabled
2025-03-23 13:41:33 [INFO]: Logger initialized
2025-03-23 13:41:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:41:33 [INFO]: Automatic synchronization is disabled
2025-03-23 13:41:33 [INFO]: Server running on port 3001
2025-03-23 13:41:33 [INFO]: API-only mode enabled
2025-03-23 13:41:37 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:41:37 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:41:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114137&signature=svueP5jeoORzZjZbbokA3dXgGY7XonheM7YRTu9A6wo%3D
2025-03-23 13:41:37 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:41:37 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:41:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114137&signature=svueP5jeoORzZjZbbokA3dXgGY7XonheM7YRTu9A6wo%3D
2025-03-23 13:41:52 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:41:53 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:41:58 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:41:58 [INFO]: Using order data from request body for order #1753
2025-03-23 13:41:58 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:41:58 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:41:58 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:41:58 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:41:58 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114158&signature=MjjLyWgMwN2NfScAq5s80AloCRX1y3eQ40JalkJ%2Fxic%3D
2025-03-23 13:41:59 [INFO]: Next invoice number will be: 1828
2025-03-23 13:41:59 [WARN]: SKU NOSKU not found in product catalog, using default product info
2025-03-23 13:41:59 [INFO]: Line item: SKU: NOSKU, Name: Teenus, Quantity: 2, Price: 1.76, Total: 3.52
2025-03-23 13:41:59 [WARN]: SKU 4742022540015 not found in product catalog, using default product info
2025-03-23 13:41:59 [INFO]: Line item: SKU: 4742022540015, Name: Teenus, Quantity: 1, Price: 2.58, Total: 2.58
2025-03-23 13:41:59 [INFO]: Shipping: Omniva pakiautomaat, Price: 2.33
2025-03-23 13:41:59 [INFO]: Row total for Teenus: 1.76 × 2 = 3.52
2025-03-23 13:41:59 [INFO]: Row total for Teenus: 2.58 × 1 = 2.58
2025-03-23 13:41:59 [INFO]: Row total for Eesti postiteenus: 2.33 × 1 = 2.33
2025-03-23 13:41:59 [INFO]: Rows total: 8.43
2025-03-23 13:41:59 [INFO]: WooCommerce total: 10.29
2025-03-23 13:41:59 [INFO]: Calculated base amount: 8.58
2025-03-23 13:41:59 [INFO]: Calculated tax amount: 1.71
2025-03-23 13:41:59 [WARN]: Rounding difference detected: 1.86
2025-03-23 13:41:59 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:41:59 [INFO]: Sending invoice to Merit with 3 rows and total: 10.29
2025-03-23 13:41:59 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:41:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114159&signature=F5RYGK3Hh4wDxUaq6VRDL5%2BWTHJUkRpAT4HDW4yVOiQ%3D
2025-03-23 13:41:59 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:41:59 [ERROR]: API response status: 400
2025-03-23 13:41:59 [ERROR]: API response data: {"Message":"KM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nArtiklil koodiga NOSKU on andmed puudulikud.\nKM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nKM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nArtiklil koodiga 10007 on andmed puudulikud.\n"}
2025-03-23 13:41:59 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:41:59 [ERROR]: Invoice data that caused error: InvoiceNo=1828, Total=10.29, Rows=3
2025-03-23 13:41:59 [ERROR]: Invoice rows total: 8.43, Invoice total: 10.29
2025-03-23 13:41:59 [ERROR]: API error details: {"Message":"KM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nArtiklil koodiga NOSKU on andmed puudulikud.\nKM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nKM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nArtiklil koodiga 10007 on andmed puudulikud.\n"}
2025-03-23 13:41:59 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:41:59 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:41:59 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:280:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:41:59 [ERROR]: API response data: {"Message":"KM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nArtiklil koodiga NOSKU on andmed puudulikud.\nKM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nKM koodiga 00000000-0000-0000-0000-000000000000 puudub või on mitteaktiivne.\nArtiklil koodiga 10007 on andmed puudulikud.\n"}
2025-03-23 13:43:32 [INFO]: Logger initialized
2025-03-23 13:43:32 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:43:32 [INFO]: Automatic synchronization is disabled
2025-03-23 13:43:32 [INFO]: Server running on port 3001
2025-03-23 13:43:32 [INFO]: API-only mode enabled
2025-03-23 13:43:55 [INFO]: Logger initialized
2025-03-23 13:43:55 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:43:55 [INFO]: Automatic synchronization is disabled
2025-03-23 13:43:55 [INFO]: Server running on port 3001
2025-03-23 13:43:55 [INFO]: API-only mode enabled
2025-03-23 13:43:57 [INFO]: Logger initialized
2025-03-23 13:43:57 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:43:57 [INFO]: Automatic synchronization is disabled
2025-03-23 13:43:57 [INFO]: Server running on port 3001
2025-03-23 13:43:57 [INFO]: API-only mode enabled
2025-03-23 13:44:19 [INFO]: Logger initialized
2025-03-23 13:44:19 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:44:19 [INFO]: Automatic synchronization is disabled
2025-03-23 13:44:19 [INFO]: Server running on port 3001
2025-03-23 13:44:19 [INFO]: API-only mode enabled
2025-03-23 13:44:20 [INFO]: Logger initialized
2025-03-23 13:44:20 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:44:20 [INFO]: Automatic synchronization is disabled
2025-03-23 13:44:20 [INFO]: Server running on port 3001
2025-03-23 13:44:20 [INFO]: API-only mode enabled
2025-03-23 13:44:32 [INFO]: Logger initialized
2025-03-23 13:44:32 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:44:32 [INFO]: Automatic synchronization is disabled
2025-03-23 13:44:32 [INFO]: Server running on port 3001
2025-03-23 13:44:32 [INFO]: API-only mode enabled
2025-03-23 13:44:34 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:44:34 [INFO]: Using order data from request body for order #1753
2025-03-23 13:44:34 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:44:34 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:44:34 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:44:34 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:44:34 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114434&signature=ayyXK%2BaTfX5d3IZY1IeniFafIv%2FxZzfPNV4ng%2F3jNYo%3D
2025-03-23 13:44:35 [INFO]: Next invoice number will be: 1828
2025-03-23 13:44:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:44:35 [INFO]: Using VAT Tax ID: 307000b4-f1f2-4bc7-a110-24cb18d77212
2025-03-23 13:44:35 [WARN]: SKU NOSKU not found in product catalog, using default product info
2025-03-23 13:44:35 [INFO]: Line item: SKU: NOSKU, Name: Teenus, Quantity: 2, Price: 1.76, Total: 3.52
2025-03-23 13:44:35 [WARN]: SKU 4742022540015 not found in product catalog, using default product info
2025-03-23 13:44:35 [INFO]: Line item: SKU: 4742022540015, Name: Teenus, Quantity: 1, Price: 2.58, Total: 2.58
2025-03-23 13:44:35 [INFO]: Shipping: Omniva pakiautomaat, Price: 2.33
2025-03-23 13:44:35 [INFO]: Row total for Teenus: 1.76 × 2 = 3.52
2025-03-23 13:44:35 [INFO]: Row total for Teenus: 2.58 × 1 = 2.58
2025-03-23 13:44:35 [INFO]: Row total for Eesti postiteenus: 2.33 × 1 = 2.33
2025-03-23 13:44:35 [INFO]: Rows total: 8.43
2025-03-23 13:44:35 [INFO]: WooCommerce total: 10.29
2025-03-23 13:44:35 [INFO]: Sending invoice to Merit with 3 rows and total: 10.29
2025-03-23 13:44:35 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:44:35 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114435&signature=b2pq3ikC322mTsT3XkrApY6DU7q0rOdroQR%2Fl2fPBbc%3D
2025-03-23 13:44:35 [ERROR]: Merit API request failed: Request failed with status code 500
2025-03-23 13:44:35 [ERROR]: API response status: 500
2025-03-23 13:44:35 [ERROR]: API response data: {"Id":"b846cbc4-4057-491c-ad63-d696224b45b3","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 13:44:35 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 500
2025-03-23 13:44:35 [ERROR]: Invoice data that caused error: InvoiceNo=1828, Total=10.29, Rows=3
2025-03-23 13:44:35 [ERROR]: Invoice rows total: 8.43, Invoice total: 10.29
2025-03-23 13:44:35 [ERROR]: API error details: {"Id":"b846cbc4-4057-491c-ad63-d696224b45b3","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 13:44:35 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 500
2025-03-23 13:44:35 [ERROR]: Error creating invoice for order: Request failed with status code 500
2025-03-23 13:44:35 [ERROR]: Stack trace: AxiosError: Request failed with status code 500
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:263:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:44:35 [ERROR]: API response data: {"Id":"b846cbc4-4057-491c-ad63-d696224b45b3","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 13:44:47 [INFO]: Logger initialized
2025-03-23 13:44:47 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:44:47 [INFO]: Automatic synchronization is disabled
2025-03-23 13:44:47 [INFO]: Server running on port 3001
2025-03-23 13:44:47 [INFO]: API-only mode enabled
2025-03-23 13:45:00 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:45:00 [INFO]: Using order data from request body for order #1753
2025-03-23 13:45:00 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:45:00 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:45:00 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:45:00 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:45:00 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114500&signature=G4vAeztV48FpGhHx3OvkFdZPvPricklxnk3YO%2FPkyKI%3D
2025-03-23 13:45:01 [INFO]: Next invoice number will be: 1828
2025-03-23 13:45:01 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:45:01 [INFO]: Using VAT Tax ID: 307000b4-f1f2-4bc7-a110-24cb18d77212
2025-03-23 13:45:01 [WARN]: SKU NOSKU not found in product catalog, using default product info
2025-03-23 13:45:01 [INFO]: Line item: SKU: NOSKU, Name: Teenus, Quantity: 2, Price: 1.76, Total: 3.52
2025-03-23 13:45:01 [WARN]: SKU 4742022540015 not found in product catalog, using default product info
2025-03-23 13:45:01 [INFO]: Line item: SKU: 4742022540015, Name: Teenus, Quantity: 1, Price: 2.58, Total: 2.58
2025-03-23 13:45:01 [INFO]: Shipping: Omniva pakiautomaat, Price: 2.33
2025-03-23 13:45:01 [INFO]: Row total for Teenus: 1.76 × 2 = 3.52
2025-03-23 13:45:01 [INFO]: Row total for Teenus: 2.58 × 1 = 2.58
2025-03-23 13:45:01 [INFO]: Row total for Eesti postiteenus: 2.33 × 1 = 2.33
2025-03-23 13:45:01 [INFO]: Rows total: 8.43
2025-03-23 13:45:01 [INFO]: WooCommerce total: 10.29
2025-03-23 13:45:01 [INFO]: Sending invoice to Merit with 3 rows and total: 10.29
2025-03-23 13:45:01 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:45:01 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114501&signature=x7rsEnytk5M2B7bFpWH6rsa1fxcv4KpuHXfbbCuhdk8%3D
2025-03-23 13:45:01 [ERROR]: Merit API request failed: Request failed with status code 500
2025-03-23 13:45:01 [ERROR]: API response status: 500
2025-03-23 13:45:01 [ERROR]: API response data: {"Id":"866d5019-6aca-4aa9-a866-f4395eb1e5fb","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 13:45:01 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 500
2025-03-23 13:45:01 [ERROR]: Invoice data that caused error: InvoiceNo=1828, Total=10.29, Rows=3
2025-03-23 13:45:01 [ERROR]: Invoice rows total: 8.43, Invoice total: 10.29
2025-03-23 13:45:01 [ERROR]: API error details: {"Id":"866d5019-6aca-4aa9-a866-f4395eb1e5fb","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 13:45:01 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 500
2025-03-23 13:45:01 [ERROR]: Error creating invoice for order: Request failed with status code 500
2025-03-23 13:45:01 [ERROR]: Stack trace: AxiosError: Request failed with status code 500
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:263:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:45:01 [ERROR]: API response data: {"Id":"866d5019-6aca-4aa9-a866-f4395eb1e5fb","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 13:46:37 [INFO]: Logger initialized
2025-03-23 13:46:37 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:46:37 [INFO]: Automatic synchronization is disabled
2025-03-23 13:46:37 [INFO]: Server running on port 3001
2025-03-23 13:46:37 [INFO]: API-only mode enabled
2025-03-23 13:46:38 [INFO]: Logger initialized
2025-03-23 13:46:38 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:46:38 [INFO]: Automatic synchronization is disabled
2025-03-23 13:46:38 [INFO]: Server running on port 3001
2025-03-23 13:46:38 [INFO]: API-only mode enabled
2025-03-23 13:46:43 [INFO]: Logger initialized
2025-03-23 13:46:43 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:46:43 [INFO]: Automatic synchronization is disabled
2025-03-23 13:46:43 [INFO]: Server running on port 3001
2025-03-23 13:46:43 [INFO]: API-only mode enabled
2025-03-23 13:46:47 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:46:47 [INFO]: Using order data from request body for order #1753
2025-03-23 13:46:47 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:46:47 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:46:47 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:46:47 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:46:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114647&signature=e8Dz9jR8W7%2B%2Fjz7z7ajaxqWtKleH%2FHozw9n8iS2184E%3D
2025-03-23 13:46:47 [INFO]: Next invoice number will be: 1828
2025-03-23 13:46:47 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:46:47 [INFO]: Using VAT Tax ID: 307000b4-f1f2-4bc7-a110-24cb18d77212
2025-03-23 13:46:47 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:46:47 [WARN]: SKU NOSKU not found in product catalog, using default product info
2025-03-23 13:46:47 [INFO]: Line item: SKU: NOSKU, Name: Teenus, Quantity: 2, Price: 1.76, Total: 3.52
2025-03-23 13:46:47 [WARN]: SKU 4742022540015 not found in product catalog, using default product info
2025-03-23 13:46:47 [INFO]: Line item: SKU: 4742022540015, Name: Teenus, Quantity: 1, Price: 2.58, Total: 2.58
2025-03-23 13:46:47 [INFO]: Shipping: Omniva pakiautomaat, Price: 2.33
2025-03-23 13:46:47 [INFO]: Row total for Teenus: 1.76 × 2 = 3.52
2025-03-23 13:46:47 [INFO]: Row total for Teenus: 2.58 × 1 = 2.58
2025-03-23 13:46:47 [INFO]: Row total for Eesti postiteenus: 2.33 × 1 = 2.33
2025-03-23 13:46:47 [INFO]: Rows total: 8.43
2025-03-23 13:46:47 [INFO]: WooCommerce total: 10.29
2025-03-23 13:46:47 [INFO]: Calculated tax amount: 1.71
2025-03-23 13:46:47 [WARN]: Rounding difference detected: 1.86
2025-03-23 13:46:47 [INFO]: Sending invoice to Merit with 3 rows and total: 10.29
2025-03-23 13:46:47 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:46:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114647&signature=WxknhLVe1y%2FdJPZ3tEvNrTqBg8JxDs7Keqcx52HvyV0%3D
2025-03-23 13:46:48 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 13:46:48 [ERROR]: API response status: 400
2025-03-23 13:46:48 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:46:48 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 13:46:48 [ERROR]: Invoice data that caused error: InvoiceNo=1828, Total=10.29, Rows=3
2025-03-23 13:46:48 [ERROR]: Invoice rows total: 8.43, Invoice total: 10.29
2025-03-23 13:46:48 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:46:48 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 13:46:48 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 13:46:48 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:445:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 13:46:48 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 13:47:29 [INFO]: Logger initialized
2025-03-23 13:47:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:47:29 [INFO]: Automatic synchronization is disabled
2025-03-23 13:47:29 [INFO]: Server running on port 3001
2025-03-23 13:47:29 [INFO]: API-only mode enabled
2025-03-23 13:47:31 [INFO]: Logger initialized
2025-03-23 13:47:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:47:31 [INFO]: Automatic synchronization is disabled
2025-03-23 13:47:31 [INFO]: Server running on port 3001
2025-03-23 13:47:31 [INFO]: API-only mode enabled
2025-03-23 13:47:35 [INFO]: Logger initialized
2025-03-23 13:47:35 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:47:35 [INFO]: Automatic synchronization is disabled
2025-03-23 13:47:35 [INFO]: Server running on port 3001
2025-03-23 13:47:35 [INFO]: API-only mode enabled
2025-03-23 13:47:37 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:47:37 [INFO]: Using order data from request body for order #1753
2025-03-23 13:47:37 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:47:37 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:47:37 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:47:37 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:47:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114737&signature=FmbyBDeHsqWAhvY6lVZW9NG8gKWte2oohfKvV3%2BUtRI%3D
2025-03-23 13:47:37 [INFO]: Next invoice number will be: 1828
2025-03-23 13:47:37 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:47:37 [INFO]: Using VAT Tax ID: 307000b4-f1f2-4bc7-a110-24cb18d77212
2025-03-23 13:47:37 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:47:37 [WARN]: SKU NOSKU not found in product catalog, using default product info
2025-03-23 13:47:37 [INFO]: Line item: SKU: NOSKU, Name: Teenus, Quantity: 2, Price: 1.76, Total: 3.52
2025-03-23 13:47:37 [WARN]: SKU 4742022540015 not found in product catalog, using default product info
2025-03-23 13:47:37 [INFO]: Line item: SKU: 4742022540015, Name: Teenus, Quantity: 1, Price: 2.58, Total: 2.58
2025-03-23 13:47:37 [INFO]: Shipping: Omniva pakiautomaat, Price: 2.33
2025-03-23 13:47:37 [INFO]: Row total for Teenus: 1.76 × 2 = 3.52
2025-03-23 13:47:37 [INFO]: Row total for Teenus: 2.58 × 1 = 2.58
2025-03-23 13:47:37 [INFO]: Row total for Eesti postiteenus: 2.33 × 1 = 2.33
2025-03-23 13:47:37 [INFO]: Rows total: 8.43
2025-03-23 13:47:37 [INFO]: WooCommerce total: 10.29
2025-03-23 13:47:37 [INFO]: Calculated tax amount: 1.41
2025-03-23 13:47:37 [INFO]: Sending invoice to Merit with 3 rows and total: 8.43
2025-03-23 13:47:37 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:47:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114737&signature=2Gty9UoTZAJMxhXZG6i3w8FkHkkEf1KKyKDdIiRM%2Fbs%3D
2025-03-23 13:47:38 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"0018004d-9994-41b0-8fe3-2f8bac5d6f1c","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 13:47:38 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 13:47:41 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:47:41 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:47:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114741&signature=Ef9iP7bvS3vcP8I4E1ajx1X1cyvnqVq5isU%2FmPCO0KU%3D
2025-03-23 13:47:42 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:47:42 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:47:42 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323114742&signature=coKIAqN3hfuo7oJQXBcmIn1iPKM0pelUH7AroEClX%2B4%3D
2025-03-23 13:48:09 [INFO]: Logger initialized
2025-03-23 13:48:09 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:48:09 [INFO]: Automatic synchronization is disabled
2025-03-23 13:48:09 [INFO]: Server running on port 3001
2025-03-23 13:48:09 [INFO]: API-only mode enabled
2025-03-23 13:50:06 [INFO]: Logger initialized
2025-03-23 13:50:06 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:50:06 [INFO]: Automatic synchronization is disabled
2025-03-23 13:50:06 [INFO]: Server running on port 3001
2025-03-23 13:50:06 [INFO]: API-only mode enabled
2025-03-23 13:50:10 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:50:11 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:54:11 [INFO]: Logger initialized
2025-03-23 13:54:11 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:54:11 [INFO]: Automatic synchronization is disabled
2025-03-23 13:54:11 [INFO]: Server running on port 3001
2025-03-23 13:54:11 [INFO]: API-only mode enabled
2025-03-23 13:54:19 [INFO]: Logger initialized
2025-03-23 13:54:19 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:54:19 [INFO]: Automatic synchronization is disabled
2025-03-23 13:54:19 [INFO]: Server running on port 3001
2025-03-23 13:54:19 [INFO]: API-only mode enabled
2025-03-23 13:54:24 [INFO]: Logger initialized
2025-03-23 13:54:24 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:54:24 [INFO]: Automatic synchronization is disabled
2025-03-23 13:54:24 [INFO]: Server running on port 3001
2025-03-23 13:54:24 [INFO]: API-only mode enabled
2025-03-23 13:54:30 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:54:30 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:54:30 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115430&signature=rRGK%2BKjU1Yb8YP%2BWnVnkp7rhw%2BqvulDzwP7855OVLuU%3D
2025-03-23 13:54:31 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:54:31 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:54:31 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115431&signature=iVlh6qT3LYkgAB9k8REG18dXQb5LTAQGsh%2BSdvCaHhI%3D
2025-03-23 13:54:52 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:54:53 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:54:57 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:54:57 [INFO]: Using order data from request body for order #1753
2025-03-23 13:54:57 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:54:57 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:54:57 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:54:57 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:54:57 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115457&signature=CkiafmpmJuJzE8%2BgrK4dGEjG8Q2iUO4b414MFC9i6sQ%3D
2025-03-23 13:54:57 [INFO]: Next invoice number will be: 1828
2025-03-23 13:54:57 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:54:57 [INFO]: Using VAT Tax ID: 307000b4-f1f2-4bc7-a110-24cb18d77212
2025-03-23 13:54:57 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:54:57 [INFO]: Line item: SKU=127, Name=Toalillemuld biohuumusega, Quantity=2, Price=1.76, Total=3.52
2025-03-23 13:54:57 [INFO]: Line item: SKU=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, Quantity=1, Price=2.58, Total=2.58
2025-03-23 13:54:57 [INFO]: Shipping: Omniva pakiautomaat, Price=2.33
2025-03-23 13:54:57 [INFO]: Row total for Toalillemuld biohuumusega: 1.76 × 2 = 3.52
2025-03-23 13:54:57 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks: 2.58 × 1 = 2.58
2025-03-23 13:54:57 [INFO]: Row total for Eesti postiteenus: 2.33 × 1 = 2.33
2025-03-23 13:54:57 [INFO]: Rows total: 8.43
2025-03-23 13:54:57 [INFO]: WooCommerce total: 10.29
2025-03-23 13:54:57 [INFO]: Calculated tax amount: 1.41
2025-03-23 13:54:57 [INFO]: Sending invoice to Merit with 3 rows and total: 8.43
2025-03-23 13:54:57 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:54:57 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115457&signature=eDYJ7QjAtKGbxBF%2B8PTgPEd3z9T3RkzfA0pFZO0PedU%3D
2025-03-23 13:54:57 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"ddba7fc4-03ba-4eeb-9ae1-5abe101f5dda","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 13:54:57 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 13:54:59 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:54:59 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:54:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115459&signature=2qegvF50m4fhbpHDghwxR9N1HYiFbSf1Wwdu4L8sLHQ%3D
2025-03-23 13:54:59 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 13:54:59 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 13:54:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115459&signature=2qegvF50m4fhbpHDghwxR9N1HYiFbSf1Wwdu4L8sLHQ%3D
2025-03-23 13:57:04 [INFO]: Logger initialized
2025-03-23 13:57:04 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:57:04 [INFO]: Automatic synchronization is disabled
2025-03-23 13:57:04 [INFO]: Server running on port 3001
2025-03-23 13:57:04 [INFO]: API-only mode enabled
2025-03-23 13:57:08 [INFO]: Logger initialized
2025-03-23 13:57:08 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:57:08 [INFO]: Automatic synchronization is disabled
2025-03-23 13:57:08 [INFO]: Server running on port 3001
2025-03-23 13:57:08 [INFO]: API-only mode enabled
2025-03-23 13:57:59 [INFO]: Logger initialized
2025-03-23 13:57:59 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:57:59 [INFO]: Automatic synchronization is disabled
2025-03-23 13:57:59 [INFO]: Server running on port 3001
2025-03-23 13:57:59 [INFO]: API-only mode enabled
2025-03-23 13:58:03 [INFO]: Logger initialized
2025-03-23 13:58:03 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:58:03 [INFO]: Automatic synchronization is disabled
2025-03-23 13:58:03 [INFO]: Server running on port 3001
2025-03-23 13:58:03 [INFO]: API-only mode enabled
2025-03-23 13:58:22 [INFO]: Logger initialized
2025-03-23 13:58:22 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 13:58:22 [INFO]: Automatic synchronization is disabled
2025-03-23 13:58:22 [INFO]: Server running on port 3001
2025-03-23 13:58:22 [INFO]: API-only mode enabled
2025-03-23 13:58:26 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:58:28 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 13:58:30 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 13:58:30 [INFO]: Using order data from request body for order #1753
2025-03-23 13:58:30 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 13:58:30 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 13:58:30 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 13:58:30 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 13:58:30 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115830&signature=4UUMF4taDkDO2jmYGT8Jn1iRpZ6mA%2FRbuC4XOpsSlGA%3D
2025-03-23 13:58:30 [INFO]: Next invoice number will be: 1828
2025-03-23 13:58:30 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:58:30 [INFO]: Using VAT Tax ID: 307000b4-f1f2-4bc7-a110-24cb18d77212
2025-03-23 13:58:30 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 13:58:30 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 13:58:30 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 13:58:30 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 13:58:30 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 13:58:30 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 13:58:30 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 13:58:30 [INFO]: Rows total: 8.43
2025-03-23 13:58:30 [INFO]: WooCommerce total: 10.29
2025-03-23 13:58:30 [INFO]: Calculated tax amount: 1.41
2025-03-23 13:58:30 [INFO]: Sending invoice to Merit with 3 rows and total: 8.43
2025-03-23 13:58:30 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 13:58:30 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323115830&signature=0rf653ef1h8BE3JzGRaH20Un5bukt6LYgb8j4XEwLlY%3D
2025-03-23 13:58:31 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"3b70873d-8ad9-4071-b0fa-b0c9cff7e5a2","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 13:58:31 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:01:06 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:01:06 [INFO]: Using order data from request body for order #1753
2025-03-23 14:01:06 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:01:06 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:01:06 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86, Fees: 0, Coupons: 0
2025-03-23 14:01:06 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:01:06 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323120106&signature=W7q1blrP%2FbXcx9zjGRkXOMo8daT9epXIAAHIu9KjOQc%3D
2025-03-23 14:01:07 [INFO]: Next invoice number will be: 1828
2025-03-23 14:01:07 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:01:07 [INFO]: Using VAT Tax ID: 307000b4-f1f2-4bc7-a110-24cb18d77212
2025-03-23 14:01:07 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:01:07 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:01:07 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:01:07 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:01:07 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:01:07 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:01:07 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:01:07 [INFO]: Rows total: 8.43
2025-03-23 14:01:07 [INFO]: WooCommerce total: 10.29
2025-03-23 14:01:07 [INFO]: Calculated tax amount: 1.41
2025-03-23 14:01:07 [INFO]: Sending invoice to Merit with 3 rows and total: 8.43
2025-03-23 14:01:07 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:01:07 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323120107&signature=hnrVM92%2FdJYZ5vtv9hzXlCGkF0WB8cM5UayffnrKjIE%3D
2025-03-23 14:01:07 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"71d86071-2e91-4c55-9fe0-4373f94c9514","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:01:07 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:03:32 [INFO]: Logger initialized
2025-03-23 14:03:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:03:33 [INFO]: Automatic synchronization is disabled
2025-03-23 14:03:33 [INFO]: Server running on port 3001
2025-03-23 14:03:33 [INFO]: API-only mode enabled
2025-03-23 14:03:50 [INFO]: Logger initialized
2025-03-23 14:03:50 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:03:50 [INFO]: Automatic synchronization is disabled
2025-03-23 14:03:50 [INFO]: Server running on port 3001
2025-03-23 14:03:50 [INFO]: API-only mode enabled
2025-03-23 14:04:27 [INFO]: Logger initialized
2025-03-23 14:04:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:04:27 [INFO]: Automatic synchronization is disabled
2025-03-23 14:04:27 [INFO]: Server running on port 3001
2025-03-23 14:04:27 [INFO]: API-only mode enabled
2025-03-23 14:04:37 [INFO]: Logger initialized
2025-03-23 14:04:37 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:04:37 [INFO]: Automatic synchronization is disabled
2025-03-23 14:04:37 [INFO]: Server running on port 3001
2025-03-23 14:04:37 [INFO]: API-only mode enabled
2025-03-23 14:04:51 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:04:51 [INFO]: Using order data from request body for order #1753
2025-03-23 14:04:51 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:04:51 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:04:51 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 14:04:51 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:04:51 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323120451&signature=WrhK1TFEpyViSOcTOjzQp0rE2thvVG0vrl53m4pkQpI%3D
2025-03-23 14:04:52 [INFO]: Next invoice number will be: 1828
2025-03-23 14:04:52 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:04:52 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:04:52 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:04:52 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:04:52 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:04:52 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:04:52 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:04:52 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:04:52 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:04:52 [INFO]: Rows total (calculated): 8.43
2025-03-23 14:04:52 [INFO]: WooCommerce total: 10.29
2025-03-23 14:04:52 [INFO]: Calculated tax amount: 1.41
2025-03-23 14:04:52 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:04:52 [INFO]: Sending invoice to Merit with 3 rows and total: 8.43
2025-03-23 14:04:52 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:04:52 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323120452&signature=U%2FwCCrQIqUddLoGW5yT1QHiluXaZ%2Fk4x4KUnmZDFB7Q%3D
2025-03-23 14:04:53 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"532ed3b8-9bdf-4e82-be1b-814b6da8e5e3","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:04:53 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:07:38 [INFO]: Logger initialized
2025-03-23 14:07:39 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:07:39 [INFO]: Automatic synchronization is disabled
2025-03-23 14:07:39 [INFO]: Server running on port 3001
2025-03-23 14:07:39 [INFO]: API-only mode enabled
2025-03-23 14:07:40 [INFO]: Logger initialized
2025-03-23 14:07:40 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:07:40 [INFO]: Automatic synchronization is disabled
2025-03-23 14:07:40 [INFO]: Server running on port 3001
2025-03-23 14:07:40 [INFO]: API-only mode enabled
2025-03-23 14:07:55 [INFO]: Logger initialized
2025-03-23 14:07:56 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:07:56 [INFO]: Automatic synchronization is disabled
2025-03-23 14:07:56 [INFO]: Server running on port 3001
2025-03-23 14:07:56 [INFO]: API-only mode enabled
2025-03-23 14:07:59 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:07:59 [INFO]: Using order data from request body for order #1753
2025-03-23 14:07:59 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:07:59 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:07:59 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 14:07:59 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:07:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323120759&signature=xuTbg5TO7kXgBI2v497YC6kC6XOWGPrDL2NRUwO4%2B6Y%3D
2025-03-23 14:07:59 [INFO]: Next invoice number will be: 1828
2025-03-23 14:07:59 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:07:59 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:07:59 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:07:59 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:07:59 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:07:59 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:07:59 [INFO]: ============ DETAILED ROUNDING ANALYSIS ============
2025-03-23 14:07:59 [INFO]: WooCommerce RAW - Total: 10.29, Subtotal: NaN, Tax: 1.86, Shipping: 2.33
2025-03-23 14:07:59 [INFO]: Sum of parts (Subtotal + Tax + Shipping): NaN
2025-03-23 14:07:59 [INFO]: Difference from total: NaN
2025-03-23 14:07:59 [INFO]: Line items breakdown:
2025-03-23 14:07:59 [INFO]:   - Toalillemuld biohuumusega: Subtotal=3.52, Tax=0.78, Total with tax=4.3
2025-03-23 14:07:59 [INFO]:   - Biohuumuse kontsentraat mahekasvatuseks: Subtotal=2.58, Tax=0.57, Total with tax=3.15
2025-03-23 14:07:59 [INFO]:   - Shipping: Subtotal=2.33, Tax=0.51, Total with tax=2.84
2025-03-23 14:07:59 [INFO]: Itemized total (sum of all line items with tax): 10.29
2025-03-23 14:07:59 [INFO]: Difference from WooCommerce total: 0
2025-03-23 14:07:59 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:07:59 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:07:59 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:07:59 [INFO]: Rows total (calculated): 8.43
2025-03-23 14:07:59 [INFO]: WooCommerce total (rounded): 10.29
2025-03-23 14:07:59 [INFO]: Difference: 1.8599999999999994
2025-03-23 14:07:59 [INFO]: Rounding difference: 1.86
2025-03-23 14:07:59 [INFO]: Using rows total for invoice: 8.43
2025-03-23 14:07:59 [INFO]: ============ END ROUNDING ANALYSIS ============
2025-03-23 14:07:59 [INFO]: Calculated tax amount: 1.41
2025-03-23 14:07:59 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:07:59 [INFO]: Sending invoice to Merit with 3 rows and total: 8.43
2025-03-23 14:07:59 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:07:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323120759&signature=gtH%2F8ebtk463jGbGAlBR474sXv1Fb5jdfftkepV0bMQ%3D
2025-03-23 14:08:00 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"bd2e206d-9285-408a-8445-66e83df989f8","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:08:00 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:10:10 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:10:11 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:10:20 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:10:20 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:10:20 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121020&signature=QLURw54Fy9gzm7Jr5cG53i0Pew%2BHIewFs2Wae%2FViYeM%3D
2025-03-23 14:10:21 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:10:21 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:10:21 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121021&signature=cDKluDTXaVE23OETz3DALC6%2Ft5P%2FrS0DAEvHGiic2v0%3D
2025-03-23 14:10:27 [INFO]: Logger initialized
2025-03-23 14:10:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:10:27 [INFO]: Automatic synchronization is disabled
2025-03-23 14:10:27 [INFO]: Server running on port 3001
2025-03-23 14:10:27 [INFO]: API-only mode enabled
2025-03-23 14:10:32 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:10:33 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:10:54 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:10:54 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:10:54 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121054&signature=MbLUSJlwJ9vEROizHMqYwFv7ZS%2F6hj6oVgiqlCwoIWM%3D
2025-03-23 14:10:55 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:10:55 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:10:55 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121055&signature=FsiKibzrnZ2rxtSFeV6qnDcjciM46huTxnPHPVsu63o%3D
2025-03-23 14:11:15 [INFO]: Logger initialized
2025-03-23 14:11:15 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:11:15 [INFO]: Automatic synchronization is disabled
2025-03-23 14:11:15 [INFO]: Server running on port 3001
2025-03-23 14:11:15 [INFO]: API-only mode enabled
2025-03-23 14:11:19 [INFO]: Logger initialized
2025-03-23 14:11:19 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:11:19 [INFO]: Automatic synchronization is disabled
2025-03-23 14:11:19 [INFO]: Server running on port 3001
2025-03-23 14:11:19 [INFO]: API-only mode enabled
2025-03-23 14:11:38 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:11:40 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:11:42 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:11:42 [INFO]: Using order data from request body for order #1753
2025-03-23 14:11:42 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:11:42 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:11:42 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 14:11:42 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:11:42 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121142&signature=Yxs6tRWILKApVkpJ6E0H7TM46x4GlrX53TtY80xhcN8%3D
2025-03-23 14:11:43 [INFO]: Next invoice number will be: 1828
2025-03-23 14:11:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:11:43 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:11:43 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:11:43 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:11:43 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:11:43 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:11:43 [INFO]: ============ DETAILED ROUNDING ANALYSIS ============
2025-03-23 14:11:43 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:11:43 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:11:43 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:11:43 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:11:43 [INFO]: Calculated tax amount: 1.69
2025-03-23 14:11:43 [INFO]: Expected total with tax: 10.12
2025-03-23 14:11:43 [INFO]: WooCommerce total: 10.29
2025-03-23 14:11:43 [INFO]: True rounding difference: 0.17
2025-03-23 14:11:43 [INFO]: ============ END ROUNDING ANALYSIS ============
2025-03-23 14:11:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:11:43 [INFO]: Sending invoice to Merit with 3 rows, pre-tax total: 8.43, tax: 1.69, rounding: 0.17, final total: 10.29
2025-03-23 14:11:43 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:11:43 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121143&signature=d0lFh0YYiHvxrmGFx%2B9Vzhi96n7edwqQowq%2BZaEf1LQ%3D
2025-03-23 14:11:43 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 14:11:43 [ERROR]: API response status: 400
2025-03-23 14:11:43 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 14:11:43 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 14:11:43 [ERROR]: Invoice data that caused error: InvoiceNo=1828, Total=10.29, Rows=3
2025-03-23 14:11:43 [ERROR]: Invoice rows total: 8.43, Invoice total: 10.29
2025-03-23 14:11:43 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 14:11:43 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 14:11:43 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 14:11:43 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:485:22)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 14:11:43 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 14:13:08 [INFO]: Logger initialized
2025-03-23 14:13:08 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:13:08 [INFO]: Automatic synchronization is disabled
2025-03-23 14:13:08 [INFO]: Server running on port 3001
2025-03-23 14:13:08 [INFO]: API-only mode enabled
2025-03-23 14:13:11 [INFO]: Logger initialized
2025-03-23 14:13:11 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:13:11 [INFO]: Automatic synchronization is disabled
2025-03-23 14:13:11 [INFO]: Server running on port 3001
2025-03-23 14:13:11 [INFO]: API-only mode enabled
2025-03-23 14:13:17 [INFO]: Logger initialized
2025-03-23 14:13:17 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:13:17 [INFO]: Automatic synchronization is disabled
2025-03-23 14:13:17 [INFO]: Server running on port 3001
2025-03-23 14:13:17 [INFO]: API-only mode enabled
2025-03-23 14:13:19 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:13:19 [INFO]: Using order data from request body for order #1753
2025-03-23 14:13:19 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:13:19 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:13:19 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 14:13:19 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:13:19 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121319&signature=X1lxOjOmIDvHl4J1qEwAmCbEb8KBX49%2BUUDj212lgGM%3D
2025-03-23 14:13:20 [INFO]: Next invoice number will be: 1828
2025-03-23 14:13:20 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:13:20 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:13:20 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:13:20 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:13:20 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:13:20 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:13:20 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:13:20 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:13:20 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:13:20 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:13:20 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:13:20 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:13:20 [INFO]: Total with tax: 10.28
2025-03-23 14:13:20 [INFO]: Sending invoice to Merit with 3 rows, total: 8.43, tax: 1.85
2025-03-23 14:13:20 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:13:20 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121320&signature=JekuNrGOgJeAVw2Ny9gFa7zegZq4Oqd2p%2BsEmiLcM70%3D
2025-03-23 14:13:20 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"e0cb0fac-b1f5-4389-8203-bbc7399b86a0","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:13:20 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:13:23 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:13:23 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:13:23 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121323&signature=XXosnAheF0GpGAi3cd5i7Gsi6gXLMebM3t1gGRB521s%3D
2025-03-23 14:13:23 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:13:23 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:13:23 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323121323&signature=XXosnAheF0GpGAi3cd5i7Gsi6gXLMebM3t1gGRB521s%3D
2025-03-23 14:20:38 [INFO]: Logger initialized
2025-03-23 14:20:38 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:20:38 [INFO]: Automatic synchronization is disabled
2025-03-23 14:20:38 [INFO]: Server running on port 3001
2025-03-23 14:20:38 [INFO]: API-only mode enabled
2025-03-23 14:22:05 [INFO]: Logger initialized
2025-03-23 14:22:05 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:22:05 [INFO]: Automatic synchronization is disabled
2025-03-23 14:22:05 [INFO]: Server running on port 3001
2025-03-23 14:22:05 [INFO]: API-only mode enabled
2025-03-23 14:22:10 [INFO]: Logger initialized
2025-03-23 14:22:10 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:22:10 [INFO]: Automatic synchronization is disabled
2025-03-23 14:22:10 [INFO]: Server running on port 3001
2025-03-23 14:22:10 [INFO]: API-only mode enabled
2025-03-23 14:22:34 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:22:36 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:22:38 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:22:38 [INFO]: Using order data from request body for order #1753
2025-03-23 14:22:38 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:22:38 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:22:38 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 14:22:38 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:22:38 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122238&signature=BgY1qKDivcQRyMd%2FRzgnjfMAg0LisSfapZIxUvQhaAw%3D
2025-03-23 14:22:39 [INFO]: Next invoice number will be: 1828
2025-03-23 14:22:39 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:22:39 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:22:39 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:22:39 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:22:39 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:22:39 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:22:39 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:22:39 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:22:39 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:22:39 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:22:39 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:22:39 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:22:39 [INFO]: Rounding difference: 0
2025-03-23 14:22:39 [INFO]: Total with tax and rounding: 10.28
2025-03-23 14:22:39 [INFO]: Sending invoice to Merit with 3 rows, total: 8.43, tax: 1.85, rounding: 0
2025-03-23 14:22:39 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:22:39 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122239&signature=OmsFr6KA66RepSUs8tPjajesqh6FRQbQxJ0uUGMDOPA%3D
2025-03-23 14:22:39 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"677f380d-e2fc-4a22-a340-9b3114981f38","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:22:39 [INFO]: Fetching invoice details for ID: undefined
2025-03-23 14:22:39 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122239&signature=UDgOk4N16Q2LMQtVryoPrfU3Rk2lTve6KvG71txmXaE%3D
2025-03-23 14:22:39 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 14:22:39 [ERROR]: API response status: 400
2025-03-23 14:22:39 [ERROR]: API response data: "Id is required."
2025-03-23 14:22:39 [ERROR]: Error fetching invoice details: Request failed with status code 400
2025-03-23 14:22:39 [ERROR]: Error during verification: Request failed with status code 400
2025-03-23 14:22:39 [INFO]: Using original invoice despite verification error
2025-03-23 14:22:39 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:26:56 [INFO]: Logger initialized
2025-03-23 14:26:56 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:26:56 [INFO]: Automatic synchronization is disabled
2025-03-23 14:26:56 [INFO]: Server running on port 3001
2025-03-23 14:26:56 [INFO]: API-only mode enabled
2025-03-23 14:27:00 [INFO]: Logger initialized
2025-03-23 14:27:00 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:27:00 [INFO]: Automatic synchronization is disabled
2025-03-23 14:27:00 [INFO]: Server running on port 3001
2025-03-23 14:27:00 [INFO]: API-only mode enabled
2025-03-23 14:27:09 [INFO]: Logger initialized
2025-03-23 14:27:09 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:27:09 [INFO]: Automatic synchronization is disabled
2025-03-23 14:27:09 [INFO]: Server running on port 3001
2025-03-23 14:27:09 [INFO]: API-only mode enabled
2025-03-23 14:27:27 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:27:27 [INFO]: Using order data from request body for order #1753
2025-03-23 14:27:27 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:27:27 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:27:27 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 14:27:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:27:27 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:27:27 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:27:27 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:27:27 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:27:27 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:27:27 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:27:27 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:27:27 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:27:27 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:27:27 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:27:27 [INFO]: Total with tax: 10.28
2025-03-23 14:27:27 [INFO]: Pre-creation check: WooCommerce total=10.29, Our calculated total=10.28, Initial rounding difference=0.01
2025-03-23 14:27:27 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:27:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122727&signature=dW%2Bm32tnFmIQ%2BkptbO3zwnGROen43SzV9rhJSQf3nzE%3D
2025-03-23 14:27:28 [INFO]: Next invoice number will be: 1828
2025-03-23 14:27:28 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:27:28 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:27:28 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:27:28 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:27:28 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:27:28 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:27:28 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:27:28 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:27:28 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:27:28 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:27:28 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:27:28 [INFO]: Total with tax: 10.28
2025-03-23 14:27:28 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:27:28 [INFO]: Applying rounding difference: 0.01
2025-03-23 14:27:28 [INFO]: Total with tax and rounding: 10.29
2025-03-23 14:27:28 [INFO]: Sending invoice to Merit with 3 rows, total: 8.43, tax: 1.85, rounding: 0.01
2025-03-23 14:27:28 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:27:28 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122728&signature=SFtCD3D8vNpIYkYYC8NJQR51Fg6FvX09%2F86D1NKybuc%3D
2025-03-23 14:27:28 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"99bb9288-a37a-4ced-9ca8-2779157252a5","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:27:28 [INFO]: Fetching invoice details for ID: 99bb9288-a37a-4ced-9ca8-2779157252a5
2025-03-23 14:27:28 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122728&signature=2mtUWnhb%2BkQfg2vgXU%2BWWh3ItiO19N2FSH%2B%2FpVyKTP4%3D
2025-03-23 14:27:29 [INFO]: Retrieved invoice details: Total=undefined, WooCommerce Total=10.29
2025-03-23 14:27:29 [INFO]: Total mismatch detected: Merit=0, WooCommerce=10.29, Difference=10.29
2025-03-23 14:27:29 [INFO]: Deleting invoice with ID: 99bb9288-a37a-4ced-9ca8-2779157252a5
2025-03-23 14:27:29 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/deleteinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122729&signature=bhTRUEsBB1%2FdN2i716jxGtVsrhiWyrY8yfKtSCURp%2BY%3D
2025-03-23 14:27:29 [INFO]: Invoice deleted successfully: 99bb9288-a37a-4ced-9ca8-2779157252a5
2025-03-23 14:27:29 [INFO]: Recreating with adjusted rounding: 10.3
2025-03-23 14:27:29 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:27:29 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122729&signature=2rEKi7kDUnYH2it8nn%2BKzKXbg1GloHVBMp3upuiwK6E%3D
2025-03-23 14:27:29 [INFO]: Next invoice number will be: 1828
2025-03-23 14:27:29 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:27:29 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:27:29 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:27:29 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:27:29 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:27:29 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:27:29 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:27:29 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:27:29 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:27:29 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:27:29 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:27:29 [INFO]: Total with tax: 10.28
2025-03-23 14:27:29 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:27:29 [INFO]: Applying rounding difference: 10.3
2025-03-23 14:27:29 [INFO]: Total with tax and rounding: 20.58
2025-03-23 14:27:29 [INFO]: Sending invoice to Merit with 3 rows, total: 8.43, tax: 1.85, rounding: 10.3
2025-03-23 14:27:29 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:27:29 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323122729&signature=yNfsRMuyjueuRlIczMPbqFbX8ou3pU3FVJVRyDZ0TQQ%3D
2025-03-23 14:27:29 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"f9195b31-2490-4c47-94fd-e2c116b386e1","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:27:29 [INFO]: Invoice recreated with adjusted rounding: 10.3
2025-03-23 14:27:29 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:30:02 [INFO]: Logger initialized
2025-03-23 14:30:03 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:30:03 [INFO]: Automatic synchronization is disabled
2025-03-23 14:30:03 [INFO]: Server running on port 3001
2025-03-23 14:30:03 [INFO]: API-only mode enabled
2025-03-23 14:30:08 [INFO]: Logger initialized
2025-03-23 14:30:09 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:30:09 [INFO]: Automatic synchronization is disabled
2025-03-23 14:30:09 [INFO]: Server running on port 3001
2025-03-23 14:30:09 [INFO]: API-only mode enabled
2025-03-23 14:30:11 [INFO]: Logger initialized
2025-03-23 14:30:11 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:30:11 [INFO]: Automatic synchronization is disabled
2025-03-23 14:30:11 [INFO]: Server running on port 3001
2025-03-23 14:30:11 [INFO]: API-only mode enabled
2025-03-23 14:30:16 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:30:16 [INFO]: Using order data from request body for order #1753
2025-03-23 14:30:16 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:30:16 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:30:16 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 14:30:16 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:30:16 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:30:16 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:30:16 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:30:16 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:30:16 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:30:16 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:30:16 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:30:16 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:30:16 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:30:16 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:30:16 [INFO]: Calculated total (with tax): 10.28
2025-03-23 14:30:16 [INFO]: WooCommerce total: 10.29, subtotal: undefined, tax: 1.86
2025-03-23 14:30:16 [INFO]: Pre-creation check: WooCommerce total=10.29, Our calculated total=10.28, Initial rounding difference=0.01
2025-03-23 14:30:16 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:30:16 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123016&signature=yTyW55g8cc8RsLME1bALL2yV3YAIim0mPpD7EYiQdn8%3D
2025-03-23 14:30:17 [INFO]: Next invoice number will be: 1828
2025-03-23 14:30:17 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:30:17 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:30:17 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:30:17 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:30:17 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:30:17 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:30:17 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:30:17 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:30:17 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:30:17 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:30:17 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:30:17 [INFO]: Calculated total (with tax): 10.28
2025-03-23 14:30:17 [INFO]: WooCommerce total: 10.29, subtotal: undefined, tax: 1.86
2025-03-23 14:30:17 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:30:17 [INFO]: Applying exact rounding difference: 0.01
2025-03-23 14:30:17 [INFO]: Final total with tax and rounding: 10.29 (should match WooCommerce total: 10.29)
2025-03-23 14:30:17 [INFO]: Sending invoice to Merit: Total=8.43, Tax=1.85, Rounding=0.01, Final=10.29
2025-03-23 14:30:17 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:30:17 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123017&signature=kBXdJxqRGozRM1yT6cjL5KkjFtsapj8uG71xDxG%2BMKs%3D
2025-03-23 14:30:17 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"93cff222-0f79-48bf-bf97-3ae5a71513ad","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:30:17 [INFO]: Fetching invoice details for ID: 93cff222-0f79-48bf-bf97-3ae5a71513ad
2025-03-23 14:30:17 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123017&signature=pEEeqMuTZIjyzQzgcGxsBuQQF2c4lII8atiBLprXIp4%3D
2025-03-23 14:30:17 [INFO]: Retrieved invoice details: Total=undefined, WooCommerce Total=10.29
2025-03-23 14:30:17 [INFO]: Total mismatch detected: Merit=0, WooCommerce=10.29, Difference=10.29
2025-03-23 14:30:17 [INFO]: Deleting invoice with ID: 93cff222-0f79-48bf-bf97-3ae5a71513ad
2025-03-23 14:30:17 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/deleteinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123017&signature=pEEeqMuTZIjyzQzgcGxsBuQQF2c4lII8atiBLprXIp4%3D
2025-03-23 14:30:17 [INFO]: Invoice deleted successfully: 93cff222-0f79-48bf-bf97-3ae5a71513ad
2025-03-23 14:30:17 [INFO]: Recreating with adjusted rounding: 10.3
2025-03-23 14:30:17 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:30:17 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123017&signature=GVU4MJopvEd%2B1GY5dMk3UBnmxQYzne549aeYmyHSqsA%3D
2025-03-23 14:30:18 [INFO]: Next invoice number will be: 1828
2025-03-23 14:30:18 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:30:18 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:30:18 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:30:18 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:30:18 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:30:18 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:30:18 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:30:18 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:30:18 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:30:18 [INFO]: Rows total (pre-tax): 8.43
2025-03-23 14:30:18 [INFO]: Tax amount (22%): 1.85
2025-03-23 14:30:18 [INFO]: Calculated total (with tax): 10.28
2025-03-23 14:30:18 [INFO]: WooCommerce total: 10.29, subtotal: undefined, tax: 1.86
2025-03-23 14:30:18 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:30:18 [INFO]: Applying exact rounding difference: 10.3
2025-03-23 14:30:18 [INFO]: Final total with tax and rounding: 20.58 (should match WooCommerce total: 10.29)
2025-03-23 14:30:18 [INFO]: Sending invoice to Merit: Total=8.43, Tax=1.85, Rounding=10.3, Final=20.58
2025-03-23 14:30:18 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:30:18 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123018&signature=7%2BIQbBUVnSIFyzmKmp0D0QAZo8Um3IXGLGdPvvi1aWg%3D
2025-03-23 14:30:18 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"1b5f522b-ad79-4b53-a02d-ed7ac8b152da","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:30:18 [INFO]: Invoice recreated with adjusted rounding: 10.3
2025-03-23 14:30:18 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:34:33 [INFO]: Logger initialized
2025-03-23 14:34:34 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:34:34 [INFO]: Automatic synchronization is disabled
2025-03-23 14:34:34 [INFO]: Server running on port 3001
2025-03-23 14:34:34 [INFO]: API-only mode enabled
2025-03-23 14:34:36 [INFO]: Logger initialized
2025-03-23 14:34:36 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:34:36 [INFO]: Automatic synchronization is disabled
2025-03-23 14:34:36 [INFO]: Server running on port 3001
2025-03-23 14:34:36 [INFO]: API-only mode enabled
2025-03-23 14:34:41 [INFO]: Logger initialized
2025-03-23 14:34:41 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 14:34:41 [INFO]: Automatic synchronization is disabled
2025-03-23 14:34:41 [INFO]: Server running on port 3001
2025-03-23 14:34:41 [INFO]: API-only mode enabled
2025-03-23 14:34:51 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 14:34:51 [INFO]: Using order data from request body for order #1753
2025-03-23 14:34:51 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 14:34:51 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 14:34:51 [INFO]: WooCommerce order total: 10.29
2025-03-23 14:34:51 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:34:51 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 14:34:51 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 14:34:51 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 14:34:51 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 14:34:51 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:34:51 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 14:34:51 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 14:34:51 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:34:51 [INFO]: INVOICE TOTALS:
2025-03-23 14:34:51 [INFO]: - Row sum (pre-tax): 8.43
2025-03-23 14:34:51 [INFO]: - Tax amount (22%): 1.85
2025-03-23 14:34:51 [INFO]: - Calculated total: 10.28
2025-03-23 14:34:51 [INFO]: - WooCommerce total: 10.29
2025-03-23 14:34:51 [INFO]: - Rounding difference: 0.01
2025-03-23 14:34:51 [INFO]: - Final total: 10.29
2025-03-23 14:34:51 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:34:51 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123451&signature=xte%2FDk%2BI28pdy99O1PCpJl9qee%2FBLit7rv%2B9AxDDOF0%3D
2025-03-23 14:34:52 [INFO]: Next invoice number will be: 1828
2025-03-23 14:34:52 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:34:52 [INFO]: Sending invoice to Merit with exact values:
2025-03-23 14:34:52 [INFO]: - Pre-tax total: 8.43
2025-03-23 14:34:52 [INFO]: - Tax: 1.85
2025-03-23 14:34:52 [INFO]: - Rounding: 0.01
2025-03-23 14:34:52 [INFO]: - Final should be: 10.29
2025-03-23 14:34:52 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:34:52 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123452&signature=mOgGTf2aD6MZvw3%2FbHcLHggTsHCiuMM63Gy00PQBZv4%3D
2025-03-23 14:34:52 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"9393e600-d6d2-496a-8682-1df063581fe3","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 14:34:52 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 14:35:11 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:35:12 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:35:22 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 14:35:22 [INFO]: Using order data from request body for order #1751
2025-03-23 14:35:22 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 14:35:22 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 14:35:22 [INFO]: WooCommerce order total: 20.84
2025-03-23 14:35:22 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:35:22 [INFO]: Item: Toataimede Uus Algus, Original price: 7.377049, Calculated price: 8.2
2025-03-23 14:35:22 [INFO]: Line item: Code=1226, Name=Toataimede Uus Algus, Quantity=2, Price=8.2, Total=16.40
2025-03-23 14:35:22 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 14:35:22 [INFO]: Discount: aednik, Amount=-1.64
2025-03-23 14:35:22 [INFO]: Row total for Toataimede Uus Algus: 8.2 × 2 = 16.40
2025-03-23 14:35:22 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 14:35:22 [INFO]: Row total for Allahindlus (aednik): -1.64 × 1 = -1.64
2025-03-23 14:35:22 [INFO]: INVOICE TOTALS:
2025-03-23 14:35:22 [INFO]: - Row sum (pre-tax): 17.09
2025-03-23 14:35:22 [INFO]: - Tax amount (22%): 3.76
2025-03-23 14:35:22 [INFO]: - Calculated total: 20.85
2025-03-23 14:35:22 [INFO]: - WooCommerce total: 20.84
2025-03-23 14:35:22 [INFO]: - Rounding difference: -0.01
2025-03-23 14:35:22 [INFO]: - Final total: 20.84
2025-03-23 14:35:22 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:35:22 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123522&signature=6UHP404yBc7tU5jFjBZnFrj34ZToIreG%2FM7%2B5u0N914%3D
2025-03-23 14:35:23 [INFO]: Next invoice number will be: 1829
2025-03-23 14:35:23 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:35:23 [INFO]: Sending invoice to Merit with exact values:
2025-03-23 14:35:23 [INFO]: - Pre-tax total: 17.09
2025-03-23 14:35:23 [INFO]: - Tax: 3.76
2025-03-23 14:35:23 [INFO]: - Rounding: -0.01
2025-03-23 14:35:23 [INFO]: - Final should be: 20.84
2025-03-23 14:35:23 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:35:23 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323123523&signature=vcPBnQQEw0QwloBGZZRE23i5RAVOpR%2FyBQ8XnV3%2B9M0%3D
2025-03-23 14:35:23 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"d49bb0e2-560f-432d-b43f-8cd2dce8ff67","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 14:35:23 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 14:39:23 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:39:24 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:43:16 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:43:17 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:44:01 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:44:01 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:44:01 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124401&signature=xPiAMDCM%2FXEbgC7%2Bnejr6z6GomRYtdKxNMBOrbrZQLU%3D
2025-03-23 14:44:01 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:44:01 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:44:01 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124401&signature=xPiAMDCM%2FXEbgC7%2Bnejr6z6GomRYtdKxNMBOrbrZQLU%3D
2025-03-23 14:44:20 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":true,"page":1,"limit":10}
2025-03-23 14:44:20 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":true}
2025-03-23 14:44:20 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124420&signature=qt7%2Fwzb0yZZ4NRs4%2BsdYkAHr7w%2FYUrlxk2gEa8OSWEk%3D
2025-03-23 14:44:23 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:44:23 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:44:23 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124423&signature=ImWRLXazHy1o%2BxPlcClAwzHOYMqvaLx1UG%2F2mer1Z2Y%3D
2025-03-23 14:44:31 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:44:32 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:44:45 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:44:45 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:44:45 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124445&signature=qx5%2BRWFVAEQ75RuGzkSxY2j7H30NKOjZ9%2BJ2phnr3J8%3D
2025-03-23 14:44:45 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:44:45 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:44:45 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124445&signature=qx5%2BRWFVAEQ75RuGzkSxY2j7H30NKOjZ9%2BJ2phnr3J8%3D
2025-03-23 14:45:42 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:45:42 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:45:42 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124542&signature=3YirRWqAe0sTees%2FT9%2FAKFg6o0hACMK2K0rEenlRj3w%3D
2025-03-23 14:45:42 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:45:42 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:45:42 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124542&signature=3YirRWqAe0sTees%2FT9%2FAKFg6o0hACMK2K0rEenlRj3w%3D
2025-03-23 14:49:47 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:49:48 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:49:58 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:49:58 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:49:58 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124958&signature=Gonq3rIv0VKnk8GXjFjY%2Fuzj45VIbnzuEqBBjGrmyKM%3D
2025-03-23 14:49:59 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:49:59 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:49:59 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323124959&signature=ybj1IzdZkU1whcKOsD7NTZeBOMBdFFP4qbInW9zDtUo%3D
2025-03-23 14:50:02 [INFO]: Getting orders summary for period: 30d
2025-03-23 14:50:02 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 14:50:02 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 14:50:02 [INFO]: Fetching WooCommerce orders totals
2025-03-23 14:50:02 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 14:50:02 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 14:50:02 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 14:50:02 [INFO]: Getting popular products for period: 30d
2025-03-23 14:50:02 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 14:50:02 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 14:50:03 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 14:50:03 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 14:50:03 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 14:50:03 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 14:50:03 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 14:50:05 [INFO]: Getting orders summary for period: 30d
2025-03-23 14:50:05 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce orders totals
2025-03-23 14:50:05 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 14:50:05 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 14:50:05 [INFO]: Getting popular products for period: 30d
2025-03-23 14:50:05 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 14:50:05 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 14:50:08 [INFO]: Getting orders summary for period: today
2025-03-23 14:50:08 [INFO]: Analytics request params: {"period":"today"}
2025-03-23 14:50:08 [INFO]: Fetching WooCommerce sales report with params: {"period":"today"}
2025-03-23 14:50:08 [INFO]: Fetching WooCommerce orders totals
2025-03-23 14:50:08 [INFO]: Getting revenue chart data for period: today
2025-03-23 14:50:08 [INFO]: Revenue chart request params: {"period":"today"}
2025-03-23 14:50:08 [INFO]: Fetching WooCommerce sales report with params: {"period":"today"}
2025-03-23 14:50:08 [INFO]: Getting popular products for period: today
2025-03-23 14:50:08 [INFO]: Popular products request params: {"limit":5,"period":"today"}
2025-03-23 14:50:08 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"today"}
2025-03-23 14:50:14 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:50:14 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:50:14 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125014&signature=s9WI%2Fj6fiaN6XRteJDeFG3%2BqwFvAuzLYY04jUlLVpvw%3D
2025-03-23 14:50:15 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:50:15 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:50:15 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125015&signature=5XPilDMCturYDwMYi6Jql%2Fg7r18O1YG4j6O36KcQNug%3D
2025-03-23 14:50:18 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:50:19 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:50:29 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:50:30 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:50:33 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:50:34 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 14:52:44 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 14:52:44 [INFO]: Using order data from request body for order #1750
2025-03-23 14:52:44 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 14:52:44 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 14:52:44 [INFO]: WooCommerce order total: 24.00
2025-03-23 14:52:44 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:52:44 [INFO]: Item: Toataimede Uus Algus, Original price: 6.557377, Calculated price: 8.2
2025-03-23 14:52:44 [INFO]: Line item: Code=1226, Name=Toataimede Uus Algus, Quantity=3, Price=8.2, Total=24.60
2025-03-23 14:52:44 [INFO]: Discount: seemned20, Amount=-4.92
2025-03-23 14:52:44 [INFO]: Row total for Toataimede Uus Algus: 8.2 × 3 = 24.60
2025-03-23 14:52:44 [INFO]: Row total for Allahindlus (seemned20): -4.92 × 1 = -4.92
2025-03-23 14:52:44 [INFO]: INVOICE TOTALS:
2025-03-23 14:52:44 [INFO]: - Row sum (pre-tax): 19.68
2025-03-23 14:52:44 [INFO]: - Tax amount (22%): 4.33
2025-03-23 14:52:44 [INFO]: - Calculated total: 24.01
2025-03-23 14:52:44 [INFO]: - WooCommerce total: 24.00
2025-03-23 14:52:44 [INFO]: - Rounding difference: -0.01
2025-03-23 14:52:44 [INFO]: - Final total: 24.00
2025-03-23 14:52:44 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 14:52:44 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125244&signature=MQ0lIyFb68MlqKgZxZl4hovgum3hK8UVMKulspJ41Hc%3D
2025-03-23 14:52:44 [INFO]: Next invoice number will be: 1829
2025-03-23 14:52:44 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 14:52:44 [INFO]: Sending invoice to Merit with exact values:
2025-03-23 14:52:44 [INFO]: - Pre-tax total: 19.68
2025-03-23 14:52:44 [INFO]: - Tax: 4.33
2025-03-23 14:52:44 [INFO]: - Rounding: -0.01
2025-03-23 14:52:44 [INFO]: - Final should be: 24.00
2025-03-23 14:52:44 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 14:52:44 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125244&signature=aLV8aE1WABgiIFnj5aNIsC5E7e%2B7l1gj9iQHUWfgwmk%3D
2025-03-23 14:52:45 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"1f597e65-1858-41d2-88f2-97f117432961","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 14:52:45 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1829
2025-03-23 14:52:49 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:52:49 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:52:49 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125249&signature=79epwo8K1%2Fn7NGzGKa2OTlsItXC8i4BdEKyu9rhcu1M%3D
2025-03-23 14:52:49 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:52:49 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:52:49 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125249&signature=79epwo8K1%2Fn7NGzGKa2OTlsItXC8i4BdEKyu9rhcu1M%3D
2025-03-23 14:59:05 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:59:05 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:59:05 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125905&signature=pcc%2FyGeIWWeWHfT57ukOeHU5rie4Pn%2Bn4%2FLlOUp3YKg%3D
2025-03-23 14:59:06 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 14:59:06 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 14:59:06 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323125906&signature=jGzF10R6YuG5sodmYHG6z9JqiJFrIN5kAafEwtcIWzA%3D
2025-03-23 15:11:50 [INFO]: Logger initialized
2025-03-23 15:11:50 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:11:50 [INFO]: Automatic synchronization is disabled
2025-03-23 15:11:50 [INFO]: Server running on port 3001
2025-03-23 15:11:50 [INFO]: API-only mode enabled
2025-03-23 15:12:05 [INFO]: Logger initialized
2025-03-23 15:12:06 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:12:06 [INFO]: Automatic synchronization is disabled
2025-03-23 15:12:06 [INFO]: Server running on port 3001
2025-03-23 15:12:06 [INFO]: API-only mode enabled
2025-03-23 15:12:17 [INFO]: Logger initialized
2025-03-23 15:12:17 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:12:17 [INFO]: Automatic synchronization is disabled
2025-03-23 15:12:17 [INFO]: Server running on port 3001
2025-03-23 15:12:17 [INFO]: API-only mode enabled
2025-03-23 15:12:31 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:12:33 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:12:33 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:12:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131233&signature=gVm57N4iwfT24DF1KmigCiegd6fE6TrQKcZ1WHCFKHg%3D
2025-03-23 15:12:33 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:12:33 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:12:33 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:12:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131233&signature=gVm57N4iwfT24DF1KmigCiegd6fE6TrQKcZ1WHCFKHg%3D
2025-03-23 15:12:36 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:12:37 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:12:52 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:12:53 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:12:57 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:12:57 [INFO]: Using order data from request body for order #1753
2025-03-23 15:12:57 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:12:57 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:12:57 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:12:57 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:12:57 [INFO]: Item: Toalillemuld biohuumusega, Original price with VAT: 1.762295, Calculated price: 1.76
2025-03-23 15:12:57 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 15:12:57 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price with VAT: 2.581967, Calculated price: 2.58
2025-03-23 15:12:57 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 15:12:57 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 15:12:57 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 15:12:57 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 15:12:57 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 15:12:57 [INFO]: INVOICE TOTALS (VAT-inclusive):
2025-03-23 15:12:57 [INFO]: - Row sum: 8.43
2025-03-23 15:12:57 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:12:57 [INFO]: - Rounding difference: 1.86
2025-03-23 15:12:57 [INFO]: - Final total: 10.29
2025-03-23 15:12:57 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:12:57 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131257&signature=%2F2C3ntb5d%2F%2FlRk6Nd%2BLOHGAy0%2FpjMIYFSV31fkXASG8%3D
2025-03-23 15:12:57 [INFO]: Next invoice number will be: 1828
2025-03-23 15:12:57 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:12:57 [INFO]: Sending invoice to Merit with VAT-inclusive prices:
2025-03-23 15:12:57 [INFO]: - Total (with VAT): 8.43
2025-03-23 15:12:57 [INFO]: - Rounding: 1.86
2025-03-23 15:12:57 [INFO]: - Final should be: 10.29
2025-03-23 15:12:57 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:12:57 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131257&signature=BTJ54qZDvL%2FcgFPx02r7JKhTgMyCPZnSNCyP%2Bq0VP0o%3D
2025-03-23 15:12:58 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"faedb0d8-b3f8-424d-90a9-f3513ffad302","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:12:58 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 15:16:13 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:16:13 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:16:13 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131613&signature=Li42gaDRJ8%2BZikEDFtdl7aBq7DjOEmr%2BRP2yo06eitk%3D
2025-03-23 15:16:14 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:16:14 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:16:14 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131614&signature=6I2OZh1xZ1HXZwaksSGq%2BllV40Pp37R3nTlabOcwL7M%3D
2025-03-23 15:16:22 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:16:22 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:16:22 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131622&signature=yBnR1D7V8lOXBh8ZCp8%2BLHaQqrCpWkZ5rLY4VIldzNk%3D
2025-03-23 15:16:22 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:16:22 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:16:22 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131622&signature=yBnR1D7V8lOXBh8ZCp8%2BLHaQqrCpWkZ5rLY4VIldzNk%3D
2025-03-23 15:17:13 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:17:15 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:17:20 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:17:20 [INFO]: Using order data from request body for order #1753
2025-03-23 15:17:20 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:17:20 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:17:20 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:17:20 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:17:20 [INFO]: Item: Toalillemuld biohuumusega, Original price with VAT: 1.762295, Calculated price: 1.76
2025-03-23 15:17:20 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 15:17:20 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price with VAT: 2.581967, Calculated price: 2.58
2025-03-23 15:17:20 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 15:17:20 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 15:17:20 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 15:17:20 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 15:17:20 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 15:17:20 [INFO]: INVOICE TOTALS (VAT-inclusive):
2025-03-23 15:17:20 [INFO]: - Row sum: 8.43
2025-03-23 15:17:20 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:17:20 [INFO]: - Rounding difference: 1.86
2025-03-23 15:17:20 [INFO]: - Final total: 10.29
2025-03-23 15:17:20 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:17:20 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131720&signature=yCHc%2FQNjquaGQbNtVacu71TWxNvVQyUuG1V7r%2BQKG2U%3D
2025-03-23 15:17:21 [INFO]: Next invoice number will be: 1828
2025-03-23 15:17:21 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:17:21 [INFO]: Sending invoice to Merit with VAT-inclusive prices:
2025-03-23 15:17:21 [INFO]: - Total (with VAT): 8.43
2025-03-23 15:17:21 [INFO]: - Rounding: 1.86
2025-03-23 15:17:21 [INFO]: - Final should be: 10.29
2025-03-23 15:17:21 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:17:21 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131721&signature=3B6mCtOsWPhE9CxVKn6wMtayV5n75HqUlSG82%2B195SQ%3D
2025-03-23 15:17:21 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"45f7e2c6-a147-49fc-95a0-56f2f8663b71","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:17:21 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 15:17:29 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:17:29 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:17:29 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131729&signature=PiPxDMrICStswDp2lFQw4g0AqLQfqxdMoCivUgWCrdk%3D
2025-03-23 15:17:30 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:17:30 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:17:30 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131730&signature=YgTh9elC54bPWi%2Fx4q2fmRr1IpNmYy2jVk9qKny%2B0jE%3D
2025-03-23 15:17:36 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:17:36 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:17:36 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131736&signature=0bAJmUNa2Nzbk7VxIBKj2%2BY2iFhELRUFRrR1Ejnxxxg%3D
2025-03-23 15:17:36 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:17:36 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:17:36 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323131736&signature=0bAJmUNa2Nzbk7VxIBKj2%2BY2iFhELRUFRrR1Ejnxxxg%3D
2025-03-23 15:31:18 [INFO]: Logger initialized
2025-03-23 15:31:18 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:31:18 [INFO]: Automatic synchronization is disabled
2025-03-23 15:31:18 [INFO]: Server running on port 3001
2025-03-23 15:31:18 [INFO]: API-only mode enabled
2025-03-23 15:31:26 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:31:27 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:31:30 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:31:30 [INFO]: Using order data from request body for order #1753
2025-03-23 15:31:30 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:31:30 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:31:30 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:31:30 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:31:30 [INFO]: Item: Toalillemuld biohuumusega, Original price with VAT: 1.762295, Calculated price: 1.76
2025-03-23 15:31:30 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 15:31:30 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price with VAT: 2.581967, Calculated price: 2.58
2025-03-23 15:31:30 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 15:31:30 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 15:31:30 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 15:31:30 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 15:31:30 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 15:31:30 [INFO]: INVOICE TOTALS (VAT-inclusive):
2025-03-23 15:31:30 [INFO]: - Row sum: 8.43
2025-03-23 15:31:30 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:31:30 [INFO]: - Rounding difference: 1.86
2025-03-23 15:31:30 [INFO]: - Final total: 10.29
2025-03-23 15:31:30 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:31:30 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323133130&signature=if7Kd1xeCMH%2B13fT5ETl4tvj6N9a%2Fcjr4Yzp0FnqJa8%3D
2025-03-23 15:31:32 [INFO]: Next invoice number will be: 1828
2025-03-23 15:31:32 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:31:32 [INFO]: Sending invoice to Merit with VAT-inclusive prices:
2025-03-23 15:31:32 [INFO]: - Total (with VAT): 8.43
2025-03-23 15:31:32 [INFO]: - Rounding: 1.86
2025-03-23 15:31:32 [INFO]: - Final should be: 10.29
2025-03-23 15:31:32 [INFO]: - PriceInclVat: true
2025-03-23 15:31:32 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:31:32 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323133132&signature=gG8EKxpoyF5Luhb3rv%2BLAf7cIELAxyEYo9dL858Nf8s%3D
2025-03-23 15:31:33 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"9b999ef9-1e6b-4e2d-80b1-f14f6d3dc6a1","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:31:33 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 15:33:21 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:33:21 [INFO]: Using order data from request body for order #1753
2025-03-23 15:33:21 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:33:21 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:33:21 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:33:21 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:33:21 [INFO]: Item: Toalillemuld biohuumusega, Original price with VAT: 1.762295, Calculated price: 1.76
2025-03-23 15:33:21 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 15:33:21 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price with VAT: 2.581967, Calculated price: 2.58
2025-03-23 15:33:21 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 15:33:21 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 15:33:21 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 15:33:21 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 15:33:21 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 15:33:21 [INFO]: INVOICE TOTALS (VAT-inclusive):
2025-03-23 15:33:21 [INFO]: - Row sum: 8.43
2025-03-23 15:33:21 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:33:21 [INFO]: - Rounding difference: 1.86
2025-03-23 15:33:21 [INFO]: - Final total: 10.29
2025-03-23 15:33:21 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:33:21 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323133321&signature=ru2uJtjOcF4vWHi8JG4UonDU%2FMl8HEUCMqK1DJEHuRw%3D
2025-03-23 15:33:22 [INFO]: Next invoice number will be: 1828
2025-03-23 15:33:22 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:33:22 [INFO]: Sending invoice to Merit with VAT-inclusive prices:
2025-03-23 15:33:22 [INFO]: - Total (with VAT): 8.43
2025-03-23 15:33:22 [INFO]: - Rounding: 1.86
2025-03-23 15:33:22 [INFO]: - Final should be: 10.29
2025-03-23 15:33:22 [INFO]: - PriceInclVat: true
2025-03-23 15:33:22 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:33:22 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323133322&signature=TtU6W2w9WDrS2cJAu%2FJhxAHyMb0klziinKoYvTClXI0%3D
2025-03-23 15:33:23 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"8c47002b-e6f5-4e8e-9860-975d65349967","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:33:23 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 15:44:20 [INFO]: Logger initialized
2025-03-23 15:44:20 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:44:20 [INFO]: Automatic synchronization is disabled
2025-03-23 15:44:20 [INFO]: Server running on port 3001
2025-03-23 15:44:20 [INFO]: API-only mode enabled
2025-03-23 15:44:44 [INFO]: Logger initialized
2025-03-23 15:44:44 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:44:44 [INFO]: Automatic synchronization is disabled
2025-03-23 15:44:44 [INFO]: Server running on port 3001
2025-03-23 15:44:44 [INFO]: API-only mode enabled
2025-03-23 15:44:52 [INFO]: Logger initialized
2025-03-23 15:44:53 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:44:53 [INFO]: Automatic synchronization is disabled
2025-03-23 15:44:53 [INFO]: Server running on port 3001
2025-03-23 15:44:53 [INFO]: API-only mode enabled
2025-03-23 15:45:01 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:45:02 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:45:02 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:45:02 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323134502&signature=SDv%2F97p4dAV%2BFit2QwTwaFp4A1IqRlyH2Tcx3j7wNmA%3D
2025-03-23 15:45:03 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:45:03 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 15:45:03 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 15:45:03 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323134503&signature=4TTCYOMduQ60amK3YNXdV41cmEcxGoN%2FrEUEuzlvi4c%3D
2025-03-23 15:45:03 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:45:04 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 15:45:07 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:45:07 [INFO]: Using order data from request body for order #1753
2025-03-23 15:45:07 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:45:07 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:45:07 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:45:07 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:45:07 [INFO]: Item: Toalillemuld biohuumusega, Price with VAT: 1.76, Price without VAT: 1.44
2025-03-23 15:45:07 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Total excluding VAT=2.88
2025-03-23 15:45:07 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Price with VAT: 2.58, Price without VAT: 2.11
2025-03-23 15:45:07 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Total excluding VAT=2.11
2025-03-23 15:45:07 [INFO]: Shipping: Transport Pakiautomaat, Price with VAT: 2.33, Price without VAT: 1.91
2025-03-23 15:45:07 [INFO]: Row calculation for Toalillemuld 2, 5 l:
2025-03-23 15:45:07 [INFO]: - Price excl. VAT: 1.44
2025-03-23 15:45:07 [INFO]: - Quantity: 2
2025-03-23 15:45:07 [INFO]: - Total excl. VAT: 2.88
2025-03-23 15:45:07 [INFO]: - VAT amount: 0.63
2025-03-23 15:45:07 [INFO]: - Total with VAT: 3.51
2025-03-23 15:45:07 [INFO]: Row calculation for Biohuumuse kontsentraat mahekasvatuseks, 500ml:
2025-03-23 15:45:07 [INFO]: - Price excl. VAT: 2.11
2025-03-23 15:45:07 [INFO]: - Quantity: 1
2025-03-23 15:45:07 [INFO]: - Total excl. VAT: 2.11
2025-03-23 15:45:07 [INFO]: - VAT amount: 0.46
2025-03-23 15:45:07 [INFO]: - Total with VAT: 2.57
2025-03-23 15:45:07 [INFO]: Row calculation for Pakiautomaat:
2025-03-23 15:45:07 [INFO]: - Price excl. VAT: 1.91
2025-03-23 15:45:07 [INFO]: - Quantity: 1
2025-03-23 15:45:07 [INFO]: - Total excl. VAT: 1.91
2025-03-23 15:45:07 [INFO]: - VAT amount: 0.42
2025-03-23 15:45:07 [INFO]: - Total with VAT: 2.33
2025-03-23 15:45:07 [INFO]: INVOICE TOTALS (Merit calculation):
2025-03-23 15:45:07 [INFO]: - Total excl. VAT: 6.90
2025-03-23 15:45:07 [INFO]: - VAT amount: 1.51
2025-03-23 15:45:07 [INFO]: - Total with VAT: 8.41
2025-03-23 15:45:07 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:45:07 [INFO]: - Rounding difference: 1.88
2025-03-23 15:45:07 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:45:07 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323134507&signature=PJdJCm1ov%2FIBCdTPfDc%2B2IzFJ8%2BSIq5PcslcI07oLKw%3D
2025-03-23 15:45:07 [INFO]: Next invoice number will be: 1828
2025-03-23 15:45:07 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:45:07 [INFO]: Sending invoice to Merit API v2:
2025-03-23 15:45:07 [INFO]: - Total excl. VAT: 6.90
2025-03-23 15:45:07 [INFO]: - VAT amount: 1.51
2025-03-23 15:45:07 [INFO]: - Rounding: 1.88
2025-03-23 15:45:07 [INFO]: - Total with VAT + rounding: 10.29
2025-03-23 15:45:07 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:45:07 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323134507&signature=hOyfgx6ozXjiWvu2mYZ3RAk5EKlFa2nLKvjW%2Fe10XPs%3D
2025-03-23 15:45:08 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"0106b482-885d-4143-8f18-c7bdcfa0ba3c","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:45:08 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 15:48:06 [INFO]: Logger initialized
2025-03-23 15:48:06 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:48:06 [INFO]: Automatic synchronization is disabled
2025-03-23 15:48:06 [INFO]: Server running on port 3001
2025-03-23 15:48:06 [INFO]: API-only mode enabled
2025-03-23 15:48:21 [INFO]: Logger initialized
2025-03-23 15:48:21 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:48:21 [INFO]: Automatic synchronization is disabled
2025-03-23 15:48:21 [INFO]: Server running on port 3001
2025-03-23 15:48:21 [INFO]: API-only mode enabled
2025-03-23 15:48:24 [INFO]: Logger initialized
2025-03-23 15:48:24 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:48:24 [INFO]: Automatic synchronization is disabled
2025-03-23 15:48:24 [INFO]: Server running on port 3001
2025-03-23 15:48:24 [INFO]: API-only mode enabled
2025-03-23 15:48:35 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:48:35 [INFO]: Using order data from request body for order #1753
2025-03-23 15:48:35 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:48:35 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:48:35 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:48:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:48:35 [INFO]: Item: Toalillemuld biohuumusega, Price (with VAT): 2.15
2025-03-23 15:48:35 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Total with VAT=4.30
2025-03-23 15:48:35 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Price (with VAT): 3.15
2025-03-23 15:48:35 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Total with VAT=3.15
2025-03-23 15:48:35 [INFO]: Shipping: Transport Pakiautomaat, Price with VAT: 2.33
2025-03-23 15:48:35 [INFO]: Row total for Toalillemuld 2, 5 l: 2.15 × 2 = 4.30
2025-03-23 15:48:35 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 3.15 × 1 = 3.15
2025-03-23 15:48:35 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 15:48:35 [INFO]: INVOICE TOTALS (VAT-inclusive):
2025-03-23 15:48:35 [INFO]: - Row sum: 9.78
2025-03-23 15:48:35 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:48:35 [INFO]: - Rounding difference: 0.51
2025-03-23 15:48:35 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:48:35 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323134835&signature=fl41oM0y8k7i9XMZrhzzmQrJHLNlUGBivblUInkB1Ig%3D
2025-03-23 15:48:37 [INFO]: Next invoice number will be: 1828
2025-03-23 15:48:37 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:48:37 [INFO]: Sending invoice to Merit with VAT-inclusive prices:
2025-03-23 15:48:37 [INFO]: - Total (with VAT): 9.78
2025-03-23 15:48:37 [INFO]: - Rounding: 0.51
2025-03-23 15:48:37 [INFO]: - Final total: 10.29
2025-03-23 15:48:37 [INFO]: - PriceInclVat: true
2025-03-23 15:48:37 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:48:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v2/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323134837&signature=yDPligmrKA%2FAWet%2Fsc57VoMWOmvUBxwJQSVgT7UAfzk%3D
2025-03-23 15:48:37 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"fa7ec563-3819-4ca9-9d4c-0ea746252526","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:48:37 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 15:50:19 [INFO]: Logger initialized
2025-03-23 15:50:19 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:50:19 [INFO]: Automatic synchronization is disabled
2025-03-23 15:50:19 [INFO]: Server running on port 3001
2025-03-23 15:50:19 [INFO]: API-only mode enabled
2025-03-23 15:52:13 [INFO]: Logger initialized
2025-03-23 15:52:13 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:52:13 [INFO]: Automatic synchronization is disabled
2025-03-23 15:52:13 [INFO]: Server running on port 3001
2025-03-23 15:52:13 [INFO]: API-only mode enabled
2025-03-23 15:52:17 [INFO]: Logger initialized
2025-03-23 15:52:17 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:52:17 [INFO]: Automatic synchronization is disabled
2025-03-23 15:52:17 [INFO]: Server running on port 3001
2025-03-23 15:52:17 [INFO]: API-only mode enabled
2025-03-23 15:52:18 [INFO]: Logger initialized
2025-03-23 15:52:18 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:52:18 [INFO]: Automatic synchronization is disabled
2025-03-23 15:52:18 [INFO]: Server running on port 3001
2025-03-23 15:52:18 [INFO]: API-only mode enabled
2025-03-23 15:52:26 [INFO]: Logger initialized
2025-03-23 15:52:26 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:52:26 [INFO]: Automatic synchronization is disabled
2025-03-23 15:52:26 [INFO]: Server running on port 3001
2025-03-23 15:52:26 [INFO]: API-only mode enabled
2025-03-23 15:52:33 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:52:33 [INFO]: Using order data from request body for order #1753
2025-03-23 15:52:33 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:52:33 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:52:33 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:52:33 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:52:33 [INFO]: Item: Toalillemuld biohuumusega
2025-03-23 15:52:33 [INFO]: - Price with VAT: 2.15
2025-03-23 15:52:33 [INFO]: - Price without VAT: 1.76
2025-03-23 15:52:33 [INFO]: - Quantity: 2
2025-03-23 15:52:33 [INFO]: - Total without VAT: 3.52
2025-03-23 15:52:33 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks
2025-03-23 15:52:33 [INFO]: - Price with VAT: 3.15
2025-03-23 15:52:33 [INFO]: - Price without VAT: 2.58
2025-03-23 15:52:33 [INFO]: - Quantity: 1
2025-03-23 15:52:33 [INFO]: - Total without VAT: 2.58
2025-03-23 15:52:33 [INFO]: Shipping: Transport Pakiautomaat
2025-03-23 15:52:33 [INFO]: - Price with VAT: 2.33
2025-03-23 15:52:33 [INFO]: - Price without VAT: 1.91
2025-03-23 15:52:33 [INFO]: INVOICE TOTALS:
2025-03-23 15:52:33 [INFO]: - Total amount without VAT: 8.01
2025-03-23 15:52:33 [INFO]: - VAT amount (22%): 1.76
2025-03-23 15:52:33 [INFO]: - Total amount with VAT: 9.77
2025-03-23 15:52:33 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:52:33 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:52:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323135233&signature=oeXoU0%2BrbBtPTuc3ly5qH%2BWQgbrT6LkotVN6QGW%2B9lA%3D
2025-03-23 15:52:34 [INFO]: Next invoice number will be: 1828
2025-03-23 15:52:34 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:52:34 [INFO]: Sending invoice to Merit with VAT-exclusive prices:
2025-03-23 15:52:34 [INFO]: - Total amount without VAT: 8.01
2025-03-23 15:52:34 [INFO]: - VAT amount: 1.76
2025-03-23 15:52:34 [INFO]: - No rounding amount applied as requested
2025-03-23 15:52:34 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:52:34 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323135234&signature=e85lG8yFn7A3HSsG8e4bCuv5WyQqUGJgA25fOhtyV50%3D
2025-03-23 15:52:34 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"6e67d2d9-858b-4ca1-af26-fd7d3136f054","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:52:34 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 15:53:29 [INFO]: Logger initialized
2025-03-23 15:53:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:53:29 [INFO]: Automatic synchronization is disabled
2025-03-23 15:53:29 [INFO]: Server running on port 3001
2025-03-23 15:53:29 [INFO]: API-only mode enabled
2025-03-23 15:53:34 [INFO]: Logger initialized
2025-03-23 15:53:34 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 15:53:34 [INFO]: Automatic synchronization is disabled
2025-03-23 15:53:34 [INFO]: Server running on port 3001
2025-03-23 15:53:34 [INFO]: API-only mode enabled
2025-03-23 15:53:50 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 15:53:50 [INFO]: Using order data from request body for order #1753
2025-03-23 15:53:50 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 15:53:50 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 15:53:50 [INFO]: WooCommerce order total: 10.29
2025-03-23 15:53:50 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:53:50 [INFO]: Item: Toalillemuld biohuumusega, Original price with VAT: 1.762295, Calculated price: 1.76
2025-03-23 15:53:50 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 15:53:50 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price with VAT: 2.581967, Calculated price: 2.58
2025-03-23 15:53:50 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 15:53:50 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 15:53:50 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 15:53:50 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 15:53:50 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 15:53:50 [INFO]: INVOICE TOTALS (VAT-inclusive):
2025-03-23 15:53:50 [INFO]: - Row sum: 8.43
2025-03-23 15:53:50 [INFO]: - WooCommerce total: 10.29
2025-03-23 15:53:50 [INFO]: - Rounding difference: 1.86
2025-03-23 15:53:50 [INFO]: - Final total: 10.29
2025-03-23 15:53:50 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 15:53:50 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323135350&signature=AdtCTON57memt1SAks06wV%2FW3LUs24n8S6lNFXeiXhs%3D
2025-03-23 15:53:51 [INFO]: Next invoice number will be: 1828
2025-03-23 15:53:51 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 15:53:51 [INFO]: Sending invoice to Merit with VAT-inclusive prices:
2025-03-23 15:53:51 [INFO]: - Total (with VAT): 8.43
2025-03-23 15:53:51 [INFO]: - Rounding: 1.86
2025-03-23 15:53:51 [INFO]: - Final should be: 10.29
2025-03-23 15:53:51 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 15:53:51 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323135351&signature=IBAd0WkT0ielVHQV%2BL10%2Bw7ZfwXbcHFgm3VxJbq2lms%3D
2025-03-23 15:53:51 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"d3238f86-efe1-4fca-9329-715541c648a9","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 15:53:51 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 16:03:14 [INFO]: Logger initialized
2025-03-23 16:03:14 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:03:14 [INFO]: Automatic synchronization is disabled
2025-03-23 16:03:14 [INFO]: Server running on port 3001
2025-03-23 16:03:14 [INFO]: API-only mode enabled
2025-03-23 16:03:31 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 16:03:31 [INFO]: Using order data from request body for order #1753
2025-03-23 16:03:31 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 16:03:31 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 16:03:31 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 16:03:31 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:03:31 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 16:03:31 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 16:03:31 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 16:03:31 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 16:03:31 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 16:03:31 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 16:03:31 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 16:03:31 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 16:03:31 [INFO]: TOTALS COMPARISON:
2025-03-23 16:03:31 [INFO]: - Rows total without VAT: 8.43
2025-03-23 16:03:31 [INFO]: - VAT amount (22%): 1.85
2025-03-23 16:03:31 [INFO]: - Merit calculated total: 10.28
2025-03-23 16:03:31 [INFO]: - WooCommerce total: 10.29
2025-03-23 16:03:31 [INFO]: - Rounding difference: 0.01
2025-03-23 16:03:31 [INFO]: - Final total with rounding: 10.29
2025-03-23 16:03:31 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:03:31 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323140331&signature=V8vz12VdfcuoVOIXkiXr68NzA2Ju6s3iWczbSleBBHI%3D
2025-03-23 16:03:32 [INFO]: Next invoice number will be: 1828
2025-03-23 16:03:32 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:03:32 [INFO]: Sending invoice to Merit:
2025-03-23 16:03:32 [INFO]: - Total amount without VAT: 8.43
2025-03-23 16:03:32 [INFO]: - VAT amount: 1.85
2025-03-23 16:03:32 [INFO]: - Rounding amount: 0.01
2025-03-23 16:03:32 [INFO]: - Final total should be: 10.29
2025-03-23 16:03:32 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:03:32 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323140332&signature=%2Fz4oWmTGez9%2BAhfBYf3AkCS7y1KwIfFWb%2FS%2BlIJqj9k%3D
2025-03-23 16:03:32 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"27665198-e961-463c-900b-2530e336cd30","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 16:03:32 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 16:03:51 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:03:53 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:03:56 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:03:56 [INFO]: Using order data from request body for order #1751
2025-03-23 16:03:56 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:03:56 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:03:56 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:03:56 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:03:56 [INFO]: Item: Toataimede Uus Algus, Original price: 7.377049, Calculated price: 8.2
2025-03-23 16:03:56 [INFO]: Line item: Code=1226, Name=Toataimede Uus Algus, Quantity=2, Price=8.2, Total=16.40
2025-03-23 16:03:56 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 16:03:56 [INFO]: Discount: aednik, Amount=-1.64
2025-03-23 16:03:56 [INFO]: Row total for Toataimede Uus Algus: 8.2 × 2 = 16.40
2025-03-23 16:03:56 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 16:03:56 [INFO]: Row total for Allahindlus (aednik): -1.64 × 1 = -1.64
2025-03-23 16:03:56 [INFO]: TOTALS COMPARISON:
2025-03-23 16:03:56 [INFO]: - Rows total without VAT: 17.09
2025-03-23 16:03:56 [INFO]: - VAT amount (22%): 3.76
2025-03-23 16:03:56 [INFO]: - Merit calculated total: 20.85
2025-03-23 16:03:56 [INFO]: - WooCommerce total: 20.84
2025-03-23 16:03:56 [INFO]: - Rounding difference: -0.01
2025-03-23 16:03:56 [INFO]: - Final total with rounding: 20.84
2025-03-23 16:03:56 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:03:56 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323140356&signature=mogu7RdL9pzwbWrv2yuRCBMx0uI5Zt7%2B67O7C45%2BPTw%3D
2025-03-23 16:03:56 [INFO]: Next invoice number will be: 1829
2025-03-23 16:03:56 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:03:56 [INFO]: Sending invoice to Merit:
2025-03-23 16:03:56 [INFO]: - Total amount without VAT: 17.09
2025-03-23 16:03:56 [INFO]: - VAT amount: 3.76
2025-03-23 16:03:56 [INFO]: - Rounding amount: -0.01
2025-03-23 16:03:56 [INFO]: - Final total should be: 20.84
2025-03-23 16:03:56 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:03:56 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323140356&signature=Ju63BdsKs8f1kcJ8GbnIORzGIvd6c6XrMfoocLu86f4%3D
2025-03-23 16:03:57 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"691f3b35-4d61-4412-9341-a06343dd5281","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:03:57 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 16:05:10 [INFO]: Logger initialized
2025-03-23 16:05:10 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:05:10 [INFO]: Automatic synchronization is disabled
2025-03-23 16:05:10 [INFO]: Server running on port 3001
2025-03-23 16:05:10 [INFO]: API-only mode enabled
2025-03-23 16:05:13 [INFO]: Logger initialized
2025-03-23 16:05:13 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:05:13 [INFO]: Automatic synchronization is disabled
2025-03-23 16:05:13 [INFO]: Server running on port 3001
2025-03-23 16:05:13 [INFO]: API-only mode enabled
2025-03-23 16:12:28 [INFO]: Logger initialized
2025-03-23 16:12:28 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:12:28 [INFO]: Automatic synchronization is disabled
2025-03-23 16:12:28 [INFO]: Server running on port 3001
2025-03-23 16:12:28 [INFO]: API-only mode enabled
2025-03-23 16:12:31 [INFO]: Logger initialized
2025-03-23 16:12:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:12:31 [INFO]: Automatic synchronization is disabled
2025-03-23 16:12:31 [INFO]: Server running on port 3001
2025-03-23 16:12:31 [INFO]: API-only mode enabled
2025-03-23 16:12:55 [INFO]: Logger initialized
2025-03-23 16:12:55 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:12:55 [INFO]: Automatic synchronization is disabled
2025-03-23 16:12:55 [INFO]: Server running on port 3001
2025-03-23 16:12:55 [INFO]: API-only mode enabled
2025-03-23 16:13:00 [INFO]: Logger initialized
2025-03-23 16:13:00 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:13:00 [INFO]: Automatic synchronization is disabled
2025-03-23 16:13:00 [INFO]: Server running on port 3001
2025-03-23 16:13:00 [INFO]: API-only mode enabled
2025-03-23 16:18:35 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:18:37 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:18:40 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 16:18:40 [INFO]: Using order data from request body for order #1753
2025-03-23 16:18:40 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 16:18:40 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 16:18:40 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 16:18:40 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:18:40 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.76
2025-03-23 16:18:40 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.76, Total=3.52
2025-03-23 16:18:40 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.58
2025-03-23 16:18:40 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.58, Total=2.58
2025-03-23 16:18:40 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 16:18:40 [INFO]: Row total for Toalillemuld 2, 5 l: 1.76 × 2 = 3.52
2025-03-23 16:18:40 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.58 × 1 = 2.58
2025-03-23 16:18:40 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 16:18:40 [INFO]: TOTALS COMPARISON:
2025-03-23 16:18:40 [INFO]: - Rows total without VAT: 8.43
2025-03-23 16:18:40 [INFO]: - VAT amount (22%): 1.85
2025-03-23 16:18:40 [INFO]: - Merit calculated total: 10.28
2025-03-23 16:18:40 [INFO]: - WooCommerce total: 10.29
2025-03-23 16:18:40 [INFO]: - Rounding difference: 0.01
2025-03-23 16:18:40 [INFO]: - Final total with rounding: 10.29
2025-03-23 16:18:40 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:18:40 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323141840&signature=q8rKQ1i01OUfpWw4Rfl0YFcdYS0Jvs2horGlCvKeb2k%3D
2025-03-23 16:18:41 [INFO]: Next invoice number will be: 1829
2025-03-23 16:18:41 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:18:41 [INFO]: Sending invoice to Merit:
2025-03-23 16:18:41 [INFO]: - Total amount without VAT: 8.43
2025-03-23 16:18:41 [INFO]: - VAT amount: 1.85
2025-03-23 16:18:41 [INFO]: - Rounding amount: 0.01
2025-03-23 16:18:41 [INFO]: - Final total should be: 10.29
2025-03-23 16:18:41 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:18:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323141841&signature=B4NzPFYxWUyzPkI7Drb8QZQDq6rg85RNxXHOq%2F9r51c%3D
2025-03-23 16:18:41 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"f9d41486-678e-49fa-aadb-0bb1cff601e5","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:18:41 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1829
2025-03-23 16:19:29 [INFO]: Logger initialized
2025-03-23 16:19:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:19:29 [INFO]: Automatic synchronization is disabled
2025-03-23 16:19:29 [INFO]: Server running on port 3001
2025-03-23 16:19:29 [INFO]: API-only mode enabled
2025-03-23 16:19:59 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:20:01 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:20:07 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:20:07 [INFO]: Using order data from request body for order #1751
2025-03-23 16:20:07 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:20:07 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:20:07 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:20:07 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:20:07 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:20:07 [INFO]: Original total price for Toataimede Uus Algus: 14.75
2025-03-23 16:20:07 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:20:07 [INFO]: - Quantity: 8
2025-03-23 16:20:07 [INFO]: - Unit price: 1.23
2025-03-23 16:20:07 [INFO]: - Total price: 9.83
2025-03-23 16:20:07 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:20:07 [INFO]: - Quantity: 4
2025-03-23 16:20:07 [INFO]: - Unit price: 1.23
2025-03-23 16:20:07 [INFO]: - Total price: 4.92
2025-03-23 16:20:07 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 16:20:07 [INFO]: Discount: aednik, Amount=-1.64
2025-03-23 16:20:07 [INFO]: Row total for Toalillemuld 2, 5 l: 1.23 × 8 = 9.84
2025-03-23 16:20:07 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.23 × 4 = 4.92
2025-03-23 16:20:07 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 16:20:07 [INFO]: Row total for Allahindlus (aednik): -1.64 × 1 = -1.64
2025-03-23 16:20:07 [INFO]: TOTALS COMPARISON:
2025-03-23 16:20:07 [INFO]: - Rows total without VAT: 15.45
2025-03-23 16:20:07 [INFO]: - VAT amount (22%): 3.40
2025-03-23 16:20:07 [INFO]: - Merit calculated total: 18.85
2025-03-23 16:20:07 [INFO]: - WooCommerce total: 20.84
2025-03-23 16:20:07 [INFO]: - Rounding difference: 1.99
2025-03-23 16:20:07 [INFO]: - Final total with rounding: 20.84
2025-03-23 16:20:07 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:20:07 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323142007&signature=Vfa8KRPK9ciJOy%2FXuw40P1BW6Ugh2OACXHOO42%2FDNF0%3D
2025-03-23 16:20:08 [INFO]: Next invoice number will be: 1829
2025-03-23 16:20:08 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:20:08 [INFO]: Sending invoice to Merit:
2025-03-23 16:20:08 [INFO]: - Total amount without VAT: 15.45
2025-03-23 16:20:08 [INFO]: - VAT amount: 3.40
2025-03-23 16:20:08 [INFO]: - Rounding amount: 1.99
2025-03-23 16:20:08 [INFO]: - Final total should be: 20.84
2025-03-23 16:20:08 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:20:08 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323142008&signature=8NAAHU80ayfGWtkk%2Fu5d1STh8Sv5E08SaJTlywRKgL4%3D
2025-03-23 16:20:08 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"0bdcf361-66a2-4498-875a-a641d68a563d","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:20:08 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 16:23:19 [INFO]: Logger initialized
2025-03-23 16:23:20 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:23:20 [INFO]: Automatic synchronization is disabled
2025-03-23 16:23:20 [INFO]: Server running on port 3001
2025-03-23 16:23:20 [INFO]: API-only mode enabled
2025-03-23 16:23:31 [INFO]: Logger initialized
2025-03-23 16:23:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:23:31 [INFO]: Automatic synchronization is disabled
2025-03-23 16:23:31 [INFO]: Server running on port 3001
2025-03-23 16:23:31 [INFO]: API-only mode enabled
2025-03-23 16:23:35 [INFO]: Logger initialized
2025-03-23 16:23:35 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:23:35 [INFO]: Automatic synchronization is disabled
2025-03-23 16:23:35 [INFO]: Server running on port 3001
2025-03-23 16:23:35 [INFO]: API-only mode enabled
2025-03-23 16:23:52 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:23:52 [INFO]: Using order data from request body for order #1751
2025-03-23 16:23:52 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:23:52 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:23:52 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:23:52 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:23:52 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:23:52 [INFO]: Original total price for Toataimede Uus Algus: 14.75
2025-03-23 16:23:52 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:23:52 [INFO]: - Quantity: 8
2025-03-23 16:23:52 [INFO]: - Unit price: 1.23
2025-03-23 16:23:52 [INFO]: - Total price: 9.83
2025-03-23 16:23:52 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:23:52 [INFO]: - Quantity: 4
2025-03-23 16:23:52 [INFO]: - Unit price: 1.23
2025-03-23 16:23:52 [INFO]: - Total price: 4.92
2025-03-23 16:23:52 [INFO]: Shipping: Transport Pakiautomaat, Price=2.33
2025-03-23 16:23:52 [INFO]: Discount: aednik, Amount=-1.64
2025-03-23 16:23:52 [INFO]: Row total for Toalillemuld 2, 5 l: 1.23 × 8 = 9.84
2025-03-23 16:23:52 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.23 × 4 = 4.92
2025-03-23 16:23:52 [INFO]: Row total for Pakiautomaat: 2.33 × 1 = 2.33
2025-03-23 16:23:52 [INFO]: Row total for Allahindlus (aednik): -1.64 × 1 = -1.64
2025-03-23 16:23:52 [WARN]: WARNING: Large rounding difference detected: 1.99. This might indicate a calculation error.
2025-03-23 16:23:52 [WARN]: Expected a small rounding value (e.g., 0.01). Check calculations.
2025-03-23 16:23:52 [INFO]: TOTALS COMPARISON:
2025-03-23 16:23:52 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:23:52 [INFO]: - Rows total without VAT: 15.45
2025-03-23 16:23:52 [INFO]: - VAT amount (22%): 3.40
2025-03-23 16:23:52 [INFO]: - Merit calculated total: 18.85
2025-03-23 16:23:52 [INFO]: - Rounding difference: 1.99
2025-03-23 16:23:52 [INFO]: - Final total with rounding: 20.84
2025-03-23 16:23:52 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:23:52 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323142352&signature=JpR7LbDV1EkJ063Hi5EsaiLn2JiTyd3cHPb0xY85%2Fkc%3D
2025-03-23 16:23:53 [INFO]: Next invoice number will be: 1829
2025-03-23 16:23:53 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:23:53 [INFO]: Sending invoice to Merit:
2025-03-23 16:23:53 [INFO]: - Total amount without VAT: 15.45
2025-03-23 16:23:53 [INFO]: - VAT amount: 3.40
2025-03-23 16:23:53 [INFO]: - Rounding amount: 1.99
2025-03-23 16:23:53 [INFO]: - Final total should be: 20.84
2025-03-23 16:23:53 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:23:53 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323142353&signature=A2gg1Ycaw5EC6yfaWeL17phbUBkt1%2FRtS0wveXvX%2B94%3D
2025-03-23 16:23:53 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"d4fcda6b-6db8-4f0d-8ab0-99be08e7f989","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:23:53 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 16:27:19 [INFO]: Logger initialized
2025-03-23 16:27:19 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:27:19 [INFO]: Automatic synchronization is disabled
2025-03-23 16:27:19 [INFO]: Server running on port 3001
2025-03-23 16:27:19 [INFO]: API-only mode enabled
2025-03-23 16:32:02 [INFO]: Logger initialized
2025-03-23 16:32:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:32:02 [INFO]: Automatic synchronization is disabled
2025-03-23 16:32:02 [INFO]: Server running on port 3001
2025-03-23 16:32:02 [INFO]: API-only mode enabled
2025-03-23 16:32:15 [INFO]: Logger initialized
2025-03-23 16:32:15 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:32:15 [INFO]: Automatic synchronization is disabled
2025-03-23 16:32:15 [INFO]: Server running on port 3001
2025-03-23 16:32:15 [INFO]: API-only mode enabled
2025-03-23 16:32:42 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:32:42 [INFO]: Using order data from request body for order #1751
2025-03-23 16:32:42 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:32:42 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:32:42 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:32:42 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:32:42 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:32:42 [INFO]: Calculating pre-tax amount: 14.75 - 3.25 = 11.5
2025-03-23 16:32:42 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 11.50
2025-03-23 16:32:42 [INFO]: Adjusted prices to match total exactly. Difference: -0.02
2025-03-23 16:32:42 [INFO]: Final total check: 11.52 (should equal 11.5)
2025-03-23 16:32:42 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:32:42 [INFO]: - Quantity: 8
2025-03-23 16:32:42 [INFO]: - Unit price: 0.96
2025-03-23 16:32:42 [INFO]: - Total price: 7.68
2025-03-23 16:32:42 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:32:42 [INFO]: - Quantity: 4
2025-03-23 16:32:42 [INFO]: - Unit price: 0.96
2025-03-23 16:32:42 [INFO]: - Total price: 3.84
2025-03-23 16:32:42 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 16:32:42 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 16:32:42 [INFO]: Adjusted discount from 1.64 to 1.28 (removed tax)
2025-03-23 16:32:42 [INFO]: Discount: aednik, Amount=-1.28
2025-03-23 16:32:42 [INFO]: Row total for Toalillemuld 2, 5 l: 0.96 × 8 = 7.68
2025-03-23 16:32:42 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 0.96 × 4 = 3.84
2025-03-23 16:32:42 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 16:32:42 [INFO]: Row total for Allahindlus (aednik): -1.28 × 1 = -1.28
2025-03-23 16:32:42 [WARN]: WARNING: Large rounding difference detected: 6.13. This might indicate a calculation error.
2025-03-23 16:32:42 [WARN]: Expected a small rounding value (e.g., 0.01). Check calculations.
2025-03-23 16:32:42 [INFO]: TOTALS COMPARISON:
2025-03-23 16:32:42 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:32:42 [INFO]: - Rows total without VAT: 12.06
2025-03-23 16:32:42 [INFO]: - VAT amount (22%): 2.65
2025-03-23 16:32:42 [INFO]: - Merit calculated total: 14.71
2025-03-23 16:32:42 [INFO]: - Rounding difference: 6.13
2025-03-23 16:32:42 [INFO]: - Final total with rounding: 20.84
2025-03-23 16:32:42 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:32:42 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323143242&signature=CCSdxFJrZRWfY4qmnk0Wp7dVExpICJVqQOv3e0sdSEo%3D
2025-03-23 16:32:43 [INFO]: Next invoice number will be: 1829
2025-03-23 16:32:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:32:43 [INFO]: Sending invoice to Merit:
2025-03-23 16:32:43 [INFO]: - Total amount without VAT: 12.06
2025-03-23 16:32:43 [INFO]: - VAT amount: 2.65
2025-03-23 16:32:43 [INFO]: - Rounding amount: 6.13
2025-03-23 16:32:43 [INFO]: - Final total should be: 20.84
2025-03-23 16:32:43 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:32:43 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323143243&signature=ox2El1ucHQ0GKTRaNHou2xBB7gG%2F6LcKrTvPKB%2FNUg0%3D
2025-03-23 16:32:43 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"e36ea06a-4bff-4e9a-a46b-66e4491738b6","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:32:43 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 16:39:30 [INFO]: Logger initialized
2025-03-23 16:39:30 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:39:30 [INFO]: Automatic synchronization is disabled
2025-03-23 16:39:30 [INFO]: Server running on port 3001
2025-03-23 16:39:30 [INFO]: API-only mode enabled
2025-03-23 16:40:09 [INFO]: Logger initialized
2025-03-23 16:40:09 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:40:09 [INFO]: Automatic synchronization is disabled
2025-03-23 16:40:09 [INFO]: Server running on port 3001
2025-03-23 16:40:09 [INFO]: API-only mode enabled
2025-03-23 16:40:17 [INFO]: Logger initialized
2025-03-23 16:40:17 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:40:17 [INFO]: Automatic synchronization is disabled
2025-03-23 16:40:17 [INFO]: Server running on port 3001
2025-03-23 16:40:17 [INFO]: API-only mode enabled
2025-03-23 16:40:36 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:40:38 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:40:44 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:40:44 [INFO]: Using order data from request body for order #1751
2025-03-23 16:40:44 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:40:44 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:40:44 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:40:44 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:40:44 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:40:44 [INFO]: Calculating pre-tax amount: 14.75 - 3.25 = 11.5
2025-03-23 16:40:44 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 11.50
2025-03-23 16:40:44 [INFO]: Retail component values:
2025-03-23 16:40:44 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 16:40:44 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 16:40:44 [INFO]: - Total retail value: 29.16
2025-03-23 16:40:44 [INFO]: Discount factor: 0.3944 (campaign price / retail price)
2025-03-23 16:40:44 [INFO]: Fine-tuned prices to match total exactly. Difference: -0.02
2025-03-23 16:40:44 [INFO]: Final total check: 11.52 (should equal 11.50)
2025-03-23 16:40:44 [INFO]: Final component prices (pre-tax):
2025-03-23 16:40:44 [INFO]: - Soil adjusted price: 0.85 (39.5% of retail)
2025-03-23 16:40:44 [INFO]: - Concentrate adjusted price: 1.18 (39.5% of retail)
2025-03-23 16:40:44 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:40:44 [INFO]: - Quantity: 8
2025-03-23 16:40:44 [INFO]: - Unit price: 0.85
2025-03-23 16:40:44 [INFO]: - Total price: 6.80
2025-03-23 16:40:44 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:40:44 [INFO]: - Quantity: 4
2025-03-23 16:40:44 [INFO]: - Unit price: 1.18
2025-03-23 16:40:44 [INFO]: - Total price: 4.72
2025-03-23 16:40:44 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 16:40:44 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 16:40:44 [INFO]: Adjusted discount from 1.64 to 1.28 (removed tax)
2025-03-23 16:40:44 [INFO]: Discount: aednik, Amount=-1.28
2025-03-23 16:40:44 [INFO]: Row total for Toalillemuld 2, 5 l: 0.85 × 8 = 6.80
2025-03-23 16:40:44 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.18 × 4 = 4.72
2025-03-23 16:40:44 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 16:40:44 [INFO]: Row total for Allahindlus (aednik): -1.28 × 1 = -1.28
2025-03-23 16:40:44 [WARN]: WARNING: Large rounding difference detected: 6.13. This might indicate a calculation error.
2025-03-23 16:40:44 [WARN]: Expected a small rounding value (e.g., 0.01). Check calculations.
2025-03-23 16:40:44 [INFO]: TOTALS COMPARISON:
2025-03-23 16:40:44 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:40:44 [INFO]: - Rows total without VAT: 12.06
2025-03-23 16:40:44 [INFO]: - VAT amount (22%): 2.65
2025-03-23 16:40:44 [INFO]: - Merit calculated total: 14.71
2025-03-23 16:40:44 [INFO]: - Rounding difference: 6.13
2025-03-23 16:40:44 [INFO]: - Final total with rounding: 20.84
2025-03-23 16:40:44 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:40:44 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323144044&signature=tJowJCHtCyP3IFIj1M5qOSumBfIS1wO84XfsEVEaORc%3D
2025-03-23 16:40:45 [INFO]: Next invoice number will be: 1829
2025-03-23 16:40:45 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:40:45 [INFO]: Sending invoice to Merit:
2025-03-23 16:40:45 [INFO]: - Total amount without VAT: 12.06
2025-03-23 16:40:45 [INFO]: - VAT amount: 2.65
2025-03-23 16:40:45 [INFO]: - Rounding amount: 6.13
2025-03-23 16:40:45 [INFO]: - Final total should be: 20.84
2025-03-23 16:40:45 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:40:45 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323144045&signature=GdUZtV0nlnRjWAnVfSWjkdSaYs0POKktNoq245fTTPE%3D
2025-03-23 16:40:45 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"64b4736b-37ac-48f6-9bb1-e53a2c4f5b4a","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:40:45 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 16:44:29 [INFO]: Logger initialized
2025-03-23 16:44:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:44:29 [INFO]: Automatic synchronization is disabled
2025-03-23 16:44:29 [INFO]: Server running on port 3001
2025-03-23 16:44:29 [INFO]: API-only mode enabled
2025-03-23 16:44:49 [INFO]: Logger initialized
2025-03-23 16:44:49 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:44:49 [INFO]: Automatic synchronization is disabled
2025-03-23 16:44:49 [INFO]: Server running on port 3001
2025-03-23 16:44:49 [INFO]: API-only mode enabled
2025-03-23 16:44:52 [INFO]: Logger initialized
2025-03-23 16:44:52 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:44:52 [INFO]: Automatic synchronization is disabled
2025-03-23 16:44:52 [INFO]: Server running on port 3001
2025-03-23 16:44:52 [INFO]: API-only mode enabled
2025-03-23 16:45:39 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:45:39 [INFO]: Using order data from request body for order #1751
2025-03-23 16:45:39 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:45:39 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:45:39 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:45:39 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:45:39 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:45:39 [INFO]: Calculating pre-tax amount: 14.75 - 3.25 = 11.5
2025-03-23 16:45:39 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 11.50
2025-03-23 16:45:39 [INFO]: Retail component values:
2025-03-23 16:45:39 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 16:45:39 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 16:45:39 [INFO]: - Total retail value: 29.16
2025-03-23 16:45:39 [INFO]: Discount factor: 0.3944 (campaign price / retail price)
2025-03-23 16:45:39 [INFO]: Fine-tuned prices to match total exactly. Difference: -0.02
2025-03-23 16:45:39 [INFO]: Final total check: 11.52 (should equal 11.50)
2025-03-23 16:45:39 [INFO]: Final component prices (pre-tax):
2025-03-23 16:45:39 [INFO]: - Soil adjusted price: 0.85 (39.5% of retail)
2025-03-23 16:45:39 [INFO]: - Concentrate adjusted price: 1.18 (39.5% of retail)
2025-03-23 16:45:39 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:45:39 [INFO]: - Quantity: 8
2025-03-23 16:45:39 [INFO]: - Unit price: 0.85
2025-03-23 16:45:39 [INFO]: - Total price: 6.80
2025-03-23 16:45:39 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:45:39 [INFO]: - Quantity: 4
2025-03-23 16:45:39 [INFO]: - Unit price: 1.18
2025-03-23 16:45:39 [INFO]: - Total price: 4.72
2025-03-23 16:45:39 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 16:45:39 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 16:45:39 [INFO]: Adjusted discount from 1.64 to 1.28 (removed tax)
2025-03-23 16:45:39 [INFO]: Discount: aednik, Amount=-1.28
2025-03-23 16:45:39 [INFO]: Row total for Toalillemuld 2, 5 l: 0.85 × 8 = 6.80
2025-03-23 16:45:39 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.18 × 4 = 4.72
2025-03-23 16:45:39 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 16:45:39 [INFO]: Row total for Allahindlus (aednik): -1.28 × 1 = -1.28
2025-03-23 16:45:39 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 16:45:39 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:45:39 [INFO]: - Rows total without VAT: 12.06
2025-03-23 16:45:39 [INFO]: - VAT amount (22%): 2.65
2025-03-23 16:45:39 [INFO]: - Merit calculated total: 14.71
2025-03-23 16:45:39 [INFO]: - Difference: 6.13
2025-03-23 16:45:39 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 16:45:39 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.85 to 1.48
2025-03-23 16:45:39 [INFO]: - Original item total: 6.80
2025-03-23 16:45:39 [INFO]: - Adjusted item total: 11.82
2025-03-23 16:45:39 [INFO]: - Adjustment: 5.02 (pre-tax)
2025-03-23 16:45:39 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 16:45:39 [INFO]: - Adjusted rows total without VAT: 17.10
2025-03-23 16:45:39 [INFO]: - Adjusted VAT amount (22%): 3.76
2025-03-23 16:45:39 [INFO]: - Adjusted Merit calculated total: 20.86
2025-03-23 16:45:39 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:45:39 [INFO]: - New difference: -0.02
2025-03-23 16:45:39 [ERROR]: Failed to create invoice from WooCommerce order: Assignment to constant variable.
2025-03-23 16:45:39 [ERROR]: Error creating invoice for order: Assignment to constant variable.
2025-03-23 16:45:39 [ERROR]: Stack trace: TypeError: Assignment to constant variable.
    at MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:916:21)
    at /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:42
    at Layer.handle [as handle_request] (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/layer.js:95:5)
    at /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:284:15
    at param (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:365:14)
    at param (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:421:3)
    at next (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:175:3)
    at router (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/express/lib/router/index.js:286:9
2025-03-23 16:46:42 [INFO]: Logger initialized
2025-03-23 16:46:42 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:46:42 [INFO]: Automatic synchronization is disabled
2025-03-23 16:46:42 [INFO]: Server running on port 3001
2025-03-23 16:46:42 [INFO]: API-only mode enabled
2025-03-23 16:46:45 [INFO]: Logger initialized
2025-03-23 16:46:45 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:46:45 [INFO]: Automatic synchronization is disabled
2025-03-23 16:46:45 [INFO]: Server running on port 3001
2025-03-23 16:46:45 [INFO]: API-only mode enabled
2025-03-23 16:46:54 [INFO]: Logger initialized
2025-03-23 16:46:54 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:46:54 [INFO]: Automatic synchronization is disabled
2025-03-23 16:46:54 [INFO]: Server running on port 3001
2025-03-23 16:46:54 [INFO]: API-only mode enabled
2025-03-23 16:46:56 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:46:56 [INFO]: Using order data from request body for order #1751
2025-03-23 16:46:56 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:46:56 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:46:56 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:46:56 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:46:56 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:46:56 [INFO]: Calculating pre-tax amount: 14.75 - 3.25 = 11.5
2025-03-23 16:46:56 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 11.50
2025-03-23 16:46:56 [INFO]: Retail component values:
2025-03-23 16:46:56 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 16:46:56 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 16:46:56 [INFO]: - Total retail value: 29.16
2025-03-23 16:46:56 [INFO]: Discount factor: 0.3944 (campaign price / retail price)
2025-03-23 16:46:56 [INFO]: Fine-tuned prices to match total exactly. Difference: -0.02
2025-03-23 16:46:56 [INFO]: Final total check: 11.52 (should equal 11.50)
2025-03-23 16:46:56 [INFO]: Final component prices (pre-tax):
2025-03-23 16:46:56 [INFO]: - Soil adjusted price: 0.85 (39.5% of retail)
2025-03-23 16:46:56 [INFO]: - Concentrate adjusted price: 1.18 (39.5% of retail)
2025-03-23 16:46:56 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:46:56 [INFO]: - Quantity: 8
2025-03-23 16:46:56 [INFO]: - Unit price: 0.85
2025-03-23 16:46:56 [INFO]: - Total price: 6.80
2025-03-23 16:46:56 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:46:56 [INFO]: - Quantity: 4
2025-03-23 16:46:56 [INFO]: - Unit price: 1.18
2025-03-23 16:46:56 [INFO]: - Total price: 4.72
2025-03-23 16:46:56 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 16:46:56 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 16:46:56 [INFO]: Adjusted discount from 1.64 to 1.28 (removed tax)
2025-03-23 16:46:56 [INFO]: Discount: aednik, Amount=-1.28
2025-03-23 16:46:56 [INFO]: Row total for Toalillemuld 2, 5 l: 0.85 × 8 = 6.80
2025-03-23 16:46:56 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.18 × 4 = 4.72
2025-03-23 16:46:56 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 16:46:56 [INFO]: Row total for Allahindlus (aednik): -1.28 × 1 = -1.28
2025-03-23 16:46:56 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 16:46:56 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:46:56 [INFO]: - Rows total without VAT: 12.06
2025-03-23 16:46:56 [INFO]: - VAT amount (22%): 2.65
2025-03-23 16:46:56 [INFO]: - Merit calculated total: 14.71
2025-03-23 16:46:56 [INFO]: - Difference: 6.13
2025-03-23 16:46:56 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 16:46:56 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.85 to 1.48
2025-03-23 16:46:56 [INFO]: - Original item total: 6.80
2025-03-23 16:46:56 [INFO]: - Adjusted item total: 11.82
2025-03-23 16:46:56 [INFO]: - Adjustment: 5.02 (pre-tax)
2025-03-23 16:46:56 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 16:46:56 [INFO]: - Adjusted rows total without VAT: 17.10
2025-03-23 16:46:56 [INFO]: - Adjusted VAT amount (22%): 3.76
2025-03-23 16:46:56 [INFO]: - Adjusted Merit calculated total: 20.86
2025-03-23 16:46:56 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:46:56 [INFO]: - New difference: -0.02
2025-03-23 16:46:56 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:46:56 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323144656&signature=AhIPP8WYiipZIJQytbjM87YPvrxdhPn%2FQVQeKPR0H1Y%3D
2025-03-23 16:46:57 [INFO]: Next invoice number will be: 1829
2025-03-23 16:46:57 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:46:57 [INFO]: Sending invoice to Merit:
2025-03-23 16:46:57 [INFO]: - Total amount without VAT: 17.10
2025-03-23 16:46:57 [INFO]: - VAT amount: 3.76
2025-03-23 16:46:57 [INFO]: - Rounding amount: 0.00 (no rounding is applied)
2025-03-23 16:46:57 [INFO]: - Final total should be: 20.86
2025-03-23 16:46:57 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:46:57 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323144657&signature=sNEjTn5aOzKyVfSTBHqMUAZQmUYEB5Ht1gRmsQsjTmE%3D
2025-03-23 16:46:58 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"f98b1a22-033b-414b-959f-26f70aab9fd0","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:46:58 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 16:49:22 [INFO]: Logger initialized
2025-03-23 16:49:23 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:49:23 [INFO]: Automatic synchronization is disabled
2025-03-23 16:49:23 [INFO]: Server running on port 3001
2025-03-23 16:49:23 [INFO]: API-only mode enabled
2025-03-23 16:49:24 [INFO]: Logger initialized
2025-03-23 16:49:24 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:49:24 [INFO]: Automatic synchronization is disabled
2025-03-23 16:49:24 [INFO]: Server running on port 3001
2025-03-23 16:49:24 [INFO]: API-only mode enabled
2025-03-23 16:49:33 [INFO]: Logger initialized
2025-03-23 16:49:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:49:33 [INFO]: Automatic synchronization is disabled
2025-03-23 16:49:33 [INFO]: Server running on port 3001
2025-03-23 16:49:33 [INFO]: API-only mode enabled
2025-03-23 16:49:46 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 16:49:46 [INFO]: Using order data from request body for order #1751
2025-03-23 16:49:46 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 16:49:46 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 16:49:46 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 16:49:46 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:49:46 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:49:46 [INFO]: Calculating pre-tax amount: 14.75 - 3.25 = 11.5
2025-03-23 16:49:46 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 11.50
2025-03-23 16:49:46 [INFO]: Retail component values:
2025-03-23 16:49:46 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 16:49:46 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 16:49:46 [INFO]: - Total retail value: 29.16
2025-03-23 16:49:46 [INFO]: Discount factor: 0.3944 (campaign price / retail price)
2025-03-23 16:49:46 [INFO]: Fine-tuned prices to match total exactly. Difference: -0.02
2025-03-23 16:49:46 [INFO]: Final total check: 11.52 (should equal 11.50)
2025-03-23 16:49:46 [INFO]: Final component prices (pre-tax):
2025-03-23 16:49:46 [INFO]: - Soil adjusted price: 0.85 (39.5% of retail)
2025-03-23 16:49:46 [INFO]: - Concentrate adjusted price: 1.18 (39.5% of retail)
2025-03-23 16:49:46 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:49:46 [INFO]: - Quantity: 8
2025-03-23 16:49:46 [INFO]: - Unit price: 0.85
2025-03-23 16:49:46 [INFO]: - Total price: 6.80
2025-03-23 16:49:46 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:49:46 [INFO]: - Quantity: 4
2025-03-23 16:49:46 [INFO]: - Unit price: 1.18
2025-03-23 16:49:46 [INFO]: - Total price: 4.72
2025-03-23 16:49:46 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 16:49:46 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 16:49:46 [INFO]: Adjusted discount from 1.64 to 1.28 (removed tax)
2025-03-23 16:49:46 [INFO]: Discount: aednik, Amount=-1.28
2025-03-23 16:49:46 [INFO]: Row total for Toalillemuld 2, 5 l: 0.85 × 8 = 6.80
2025-03-23 16:49:46 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.18 × 4 = 4.72
2025-03-23 16:49:46 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 16:49:46 [INFO]: Row total for Allahindlus (aednik): -1.28 × 1 = -1.28
2025-03-23 16:49:46 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 16:49:46 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:49:46 [INFO]: - Rows total without VAT: 12.06
2025-03-23 16:49:46 [INFO]: - VAT amount (22%): 2.65
2025-03-23 16:49:46 [INFO]: - Merit calculated total: 14.71
2025-03-23 16:49:46 [INFO]: - Difference: 6.13
2025-03-23 16:49:46 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 16:49:46 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 16:49:46 [INFO]: - Target pre-tax total: 17.08
2025-03-23 16:49:46 [INFO]: - Current pre-tax total: 12.06
2025-03-23 16:49:46 [INFO]: - Required pre-tax adjustment: 5.02
2025-03-23 16:49:46 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.85 to 1.4775
2025-03-23 16:49:46 [INFO]: - Original item total: 6.80
2025-03-23 16:49:46 [INFO]: - Adjusted item total: 11.82
2025-03-23 16:49:46 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 16:49:46 [INFO]: - Adjusted rows total without VAT: 17.08
2025-03-23 16:49:46 [INFO]: - Adjusted VAT amount (22%): 3.76
2025-03-23 16:49:46 [INFO]: - Adjusted Merit calculated total: 20.84
2025-03-23 16:49:46 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 16:49:46 [INFO]: - New difference: 0.0000
2025-03-23 16:49:46 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:49:46 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323144946&signature=FNEJuO2keV9seea%2BnDtaE8rW4R69WtSGh2FELmT%2BruY%3D
2025-03-23 16:49:47 [INFO]: Next invoice number will be: 1829
2025-03-23 16:49:47 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:49:47 [INFO]: Sending invoice to Merit:
2025-03-23 16:49:47 [INFO]: - Total amount without VAT: 17.08
2025-03-23 16:49:47 [INFO]: - VAT amount: 3.76
2025-03-23 16:49:47 [INFO]: - Rounding amount: 0.00 (no rounding is applied)
2025-03-23 16:49:47 [INFO]: - Final total should be: 20.84
2025-03-23 16:49:47 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:49:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323144947&signature=JBgqlNol4G8oRQIgDwsmY516KHjOv1QmU1ae6r9R%2Bfc%3D
2025-03-23 16:49:47 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"7b071c76-6630-4d77-80fc-1615cc2751d1","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 16:49:47 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 16:51:27 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:51:28 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 16:51:40 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 16:51:40 [INFO]: Using order data from request body for order #1750
2025-03-23 16:51:40 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 16:51:40 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 16:51:40 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 16:51:40 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:51:40 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:51:40 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 16:51:40 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 16:51:40 [INFO]: Retail component values:
2025-03-23 16:51:40 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 16:51:40 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 16:51:40 [INFO]: - Total retail value: 43.74
2025-03-23 16:51:40 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 16:51:40 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 16:51:40 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 16:51:40 [INFO]: Final component prices (pre-tax):
2025-03-23 16:51:40 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 16:51:40 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 16:51:40 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:51:40 [INFO]: - Quantity: 12
2025-03-23 16:51:40 [INFO]: - Unit price: 0.75
2025-03-23 16:51:40 [INFO]: - Total price: 9.00
2025-03-23 16:51:40 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:51:40 [INFO]: - Quantity: 6
2025-03-23 16:51:40 [INFO]: - Unit price: 1.05
2025-03-23 16:51:40 [INFO]: - Total price: 6.30
2025-03-23 16:51:40 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 16:51:40 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 16:51:40 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 16:51:40 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 16:51:40 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 16:51:40 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 16:51:40 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 16:51:40 [INFO]: - Rows total without VAT: 11.46
2025-03-23 16:51:40 [INFO]: - VAT amount (22%): 2.52
2025-03-23 16:51:40 [INFO]: - Merit calculated total: 13.98
2025-03-23 16:51:40 [INFO]: - Difference: 10.02
2025-03-23 16:51:40 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 16:51:40 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 16:51:40 [INFO]: - Target pre-tax total: 19.67
2025-03-23 16:51:40 [INFO]: - Current pre-tax total: 11.46
2025-03-23 16:51:40 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 16:51:40 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.4342
2025-03-23 16:51:40 [INFO]: - Original item total: 9.00
2025-03-23 16:51:40 [INFO]: - Adjusted item total: 17.21
2025-03-23 16:51:40 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 16:51:40 [INFO]: - Adjusted rows total without VAT: 19.67
2025-03-23 16:51:40 [INFO]: - Adjusted VAT amount (22%): 4.33
2025-03-23 16:51:40 [INFO]: - Adjusted Merit calculated total: 24.00
2025-03-23 16:51:40 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 16:51:40 [INFO]: - New difference: 0.0000
2025-03-23 16:51:40 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:51:40 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323145140&signature=Arv0MJd%2BrDVJKVbKJ72Qs811DvnsZrt%2BlQ6gD6mWgqU%3D
2025-03-23 16:51:41 [INFO]: Next invoice number will be: 1830
2025-03-23 16:51:41 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:51:41 [INFO]: Sending invoice to Merit:
2025-03-23 16:51:41 [INFO]: - Total amount without VAT: 19.67
2025-03-23 16:51:41 [INFO]: - VAT amount: 4.33
2025-03-23 16:51:41 [INFO]: - Rounding amount: 0.00 (no rounding is applied)
2025-03-23 16:51:41 [INFO]: - Final total should be: 24.00
2025-03-23 16:51:41 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:51:41 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323145141&signature=guylE%2B2%2FucpTO3CmOGVq2VKK1fO2Q5wjD7064N%2Fvi%2BY%3D
2025-03-23 16:51:42 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"71d52f38-69bb-431b-9764-f3d11366fc68","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 16:51:42 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 16:57:10 [INFO]: Logger initialized
2025-03-23 16:57:10 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:57:10 [INFO]: Automatic synchronization is disabled
2025-03-23 16:57:10 [INFO]: Server running on port 3001
2025-03-23 16:57:10 [INFO]: API-only mode enabled
2025-03-23 16:57:11 [INFO]: Logger initialized
2025-03-23 16:57:12 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:57:12 [INFO]: Automatic synchronization is disabled
2025-03-23 16:57:12 [INFO]: Server running on port 3001
2025-03-23 16:57:12 [INFO]: API-only mode enabled
2025-03-23 16:57:15 [INFO]: Logger initialized
2025-03-23 16:57:15 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:57:15 [INFO]: Automatic synchronization is disabled
2025-03-23 16:57:15 [INFO]: Server running on port 3001
2025-03-23 16:57:15 [INFO]: API-only mode enabled
2025-03-23 16:57:26 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 16:57:26 [INFO]: Using order data from request body for order #1750
2025-03-23 16:57:26 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 16:57:26 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 16:57:26 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 16:57:26 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:57:26 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:57:26 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 16:57:26 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 16:57:26 [INFO]: Retail component values:
2025-03-23 16:57:26 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 16:57:26 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 16:57:26 [INFO]: - Total retail value: 43.74
2025-03-23 16:57:26 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 16:57:26 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 16:57:26 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 16:57:26 [INFO]: Final component prices (pre-tax):
2025-03-23 16:57:26 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 16:57:26 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 16:57:26 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:57:26 [INFO]: - Quantity: 12
2025-03-23 16:57:26 [INFO]: - Unit price: 0.75
2025-03-23 16:57:26 [INFO]: - Total price: 9.00
2025-03-23 16:57:26 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:57:26 [INFO]: - Quantity: 6
2025-03-23 16:57:26 [INFO]: - Unit price: 1.05
2025-03-23 16:57:26 [INFO]: - Total price: 6.30
2025-03-23 16:57:26 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 16:57:26 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 16:57:26 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 16:57:26 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 16:57:26 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 16:57:26 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 16:57:26 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 16:57:26 [INFO]: - Rows total without VAT: 11.46
2025-03-23 16:57:26 [INFO]: - VAT amount (22%): 2.52
2025-03-23 16:57:26 [INFO]: - Merit calculated total: 13.98
2025-03-23 16:57:26 [INFO]: - Difference: 10.02
2025-03-23 16:57:26 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 16:57:26 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 16:57:26 [INFO]: - Target pre-tax total: 19.67
2025-03-23 16:57:26 [INFO]: - Current pre-tax total: 11.46
2025-03-23 16:57:26 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 16:57:26 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.434167
2025-03-23 16:57:26 [INFO]: - Original item total: 9.00
2025-03-23 16:57:26 [INFO]: - Adjusted item total: 17.21
2025-03-23 16:57:26 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 16:57:26 [INFO]: - Adjusted rows total without VAT: 19.67
2025-03-23 16:57:26 [INFO]: - Adjusted VAT amount (22%): 4.33
2025-03-23 16:57:26 [INFO]: - Adjusted Merit calculated total: 24.00
2025-03-23 16:57:26 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 16:57:26 [INFO]: - New difference: 0.000000
2025-03-23 16:57:26 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:57:26 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323145726&signature=A212UWbPG%2FJy2rwHGdkcFJ5OopIBacO653a42z0Gp08%3D
2025-03-23 16:57:27 [INFO]: Next invoice number will be: 1830
2025-03-23 16:57:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:57:27 [INFO]: Sending invoice to Merit:
2025-03-23 16:57:27 [INFO]: - Total amount without VAT: 19.67
2025-03-23 16:57:27 [INFO]: - VAT amount: 4.33
2025-03-23 16:57:27 [INFO]: - Rounding amount: 0.00 (no rounding is applied)
2025-03-23 16:57:27 [INFO]: - Final total should be: 24.00
2025-03-23 16:57:27 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:57:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323145727&signature=iswn9DpX7ulNVX2BPO%2Fqqc5R6Mi29ZNdk2WHemkGz%2B0%3D
2025-03-23 16:57:28 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"e88d9d53-5f17-4781-96cb-750c4ae015f8","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 16:57:28 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 16:58:46 [INFO]: Logger initialized
2025-03-23 16:58:46 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:58:46 [INFO]: Automatic synchronization is disabled
2025-03-23 16:58:46 [INFO]: Server running on port 3001
2025-03-23 16:58:46 [INFO]: API-only mode enabled
2025-03-23 16:58:48 [INFO]: Logger initialized
2025-03-23 16:58:48 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:58:48 [INFO]: Automatic synchronization is disabled
2025-03-23 16:58:48 [INFO]: Server running on port 3001
2025-03-23 16:58:48 [INFO]: API-only mode enabled
2025-03-23 16:58:51 [INFO]: Logger initialized
2025-03-23 16:58:51 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:58:51 [INFO]: Automatic synchronization is disabled
2025-03-23 16:58:51 [INFO]: Server running on port 3001
2025-03-23 16:58:51 [INFO]: API-only mode enabled
2025-03-23 16:58:53 [INFO]: Logger initialized
2025-03-23 16:58:53 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 16:58:53 [INFO]: Automatic synchronization is disabled
2025-03-23 16:58:53 [INFO]: Server running on port 3001
2025-03-23 16:58:53 [INFO]: API-only mode enabled
2025-03-23 16:59:00 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 16:59:00 [INFO]: Using order data from request body for order #1750
2025-03-23 16:59:00 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 16:59:00 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 16:59:00 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 16:59:00 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:59:00 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 16:59:00 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 16:59:00 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 16:59:00 [INFO]: Retail component values:
2025-03-23 16:59:00 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 16:59:00 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 16:59:00 [INFO]: - Total retail value: 43.74
2025-03-23 16:59:00 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 16:59:00 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 16:59:00 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 16:59:00 [INFO]: Final component prices (pre-tax):
2025-03-23 16:59:00 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 16:59:00 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 16:59:00 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 16:59:00 [INFO]: - Quantity: 12
2025-03-23 16:59:00 [INFO]: - Unit price: 0.75
2025-03-23 16:59:00 [INFO]: - Total price: 9.00
2025-03-23 16:59:00 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 16:59:00 [INFO]: - Quantity: 6
2025-03-23 16:59:00 [INFO]: - Unit price: 1.05
2025-03-23 16:59:00 [INFO]: - Total price: 6.30
2025-03-23 16:59:00 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 16:59:00 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 16:59:00 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 16:59:00 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 16:59:00 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 16:59:00 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 16:59:00 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 16:59:00 [INFO]: - Rows total without VAT: 11.46
2025-03-23 16:59:00 [INFO]: - VAT amount (22%): 2.52
2025-03-23 16:59:00 [INFO]: - Merit calculated total: 13.98
2025-03-23 16:59:00 [INFO]: - Difference: 10.02
2025-03-23 16:59:00 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 16:59:00 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 16:59:00 [INFO]: - Target pre-tax total: 19.67
2025-03-23 16:59:00 [INFO]: - Current pre-tax total: 11.46
2025-03-23 16:59:00 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 16:59:00 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 16:59:00 [INFO]: - Original item total: 9.00
2025-03-23 16:59:00 [INFO]: - Adjusted item total: 17.21
2025-03-23 16:59:00 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 16:59:00 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 16:59:00 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 16:59:00 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 16:59:00 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 16:59:00 [INFO]: - New difference: 0.060000
2025-03-23 16:59:00 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 16:59:00 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 16:59:00 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 16:59:00 [INFO]: Final difference: 0.000000
2025-03-23 16:59:00 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 16:59:00 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323145900&signature=R9xG3VUbvN%2BOnHn1crxE%2B3p1BusUj5VNM%2B4EHekvN9s%3D
2025-03-23 16:59:02 [INFO]: Next invoice number will be: 1830
2025-03-23 16:59:02 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 16:59:02 [INFO]: Sending invoice to Merit:
2025-03-23 16:59:02 [INFO]: - Total amount without VAT: 19.62
2025-03-23 16:59:02 [INFO]: - VAT amount: 4.38
2025-03-23 16:59:02 [INFO]: - Rounding amount: 0.00 (no rounding is applied)
2025-03-23 16:59:02 [INFO]: - Final total should be: 24.00
2025-03-23 16:59:02 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 16:59:02 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323145902&signature=ki1wLo5t9t97BjPPClztUZ4jjm6cQJjPDCUVEBjv4og%3D
2025-03-23 16:59:02 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"f93c2276-846c-4bd5-a289-2326a754852d","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 16:59:02 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:01:22 [INFO]: Logger initialized
2025-03-23 17:01:22 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:01:22 [INFO]: Automatic synchronization is disabled
2025-03-23 17:01:22 [INFO]: Server running on port 3001
2025-03-23 17:01:22 [INFO]: API-only mode enabled
2025-03-23 17:01:27 [INFO]: Logger initialized
2025-03-23 17:01:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:01:27 [INFO]: Automatic synchronization is disabled
2025-03-23 17:01:27 [INFO]: Server running on port 3001
2025-03-23 17:01:27 [INFO]: API-only mode enabled
2025-03-23 17:01:32 [INFO]: Logger initialized
2025-03-23 17:01:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:01:33 [INFO]: Automatic synchronization is disabled
2025-03-23 17:01:33 [INFO]: Server running on port 3001
2025-03-23 17:01:33 [INFO]: API-only mode enabled
2025-03-23 17:01:47 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:01:47 [INFO]: Using order data from request body for order #1750
2025-03-23 17:01:47 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:01:47 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:01:47 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:01:47 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:01:47 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:01:47 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:01:47 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:01:47 [INFO]: Retail component values:
2025-03-23 17:01:47 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:01:47 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:01:47 [INFO]: - Total retail value: 43.74
2025-03-23 17:01:47 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:01:47 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:01:47 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:01:47 [INFO]: Final component prices (pre-tax):
2025-03-23 17:01:47 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:01:47 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:01:47 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:01:47 [INFO]: - Quantity: 12
2025-03-23 17:01:47 [INFO]: - Unit price: 0.75
2025-03-23 17:01:47 [INFO]: - Total price: 9.00
2025-03-23 17:01:47 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:01:47 [INFO]: - Quantity: 6
2025-03-23 17:01:47 [INFO]: - Unit price: 1.05
2025-03-23 17:01:47 [INFO]: - Total price: 6.30
2025-03-23 17:01:47 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:01:47 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:01:47 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:01:47 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:01:47 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:01:47 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:01:47 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:01:47 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:01:47 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:01:47 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:01:47 [INFO]: - Difference: 10.02
2025-03-23 17:01:47 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:01:47 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:01:47 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:01:47 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:01:47 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:01:47 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:01:47 [INFO]: - Original item total: 9.00
2025-03-23 17:01:47 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:01:47 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:01:47 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:01:47 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:01:47 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:01:47 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:01:47 [INFO]: - New difference: 0.060000
2025-03-23 17:01:47 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:01:47 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:01:47 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:01:47 [INFO]: Final difference: 0.000000
2025-03-23 17:01:47 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:01:47 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150147&signature=S5m0GPPhRYk9eIlB70DBznW6EwKI3Kje9MTRDeewGSg%3D
2025-03-23 17:01:48 [INFO]: Next invoice number will be: 1830
2025-03-23 17:01:48 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:01:48 [INFO]: FINAL VERIFICATION:
2025-03-23 17:01:48 [INFO]: - Total amount without VAT (forced): 19.67
2025-03-23 17:01:48 [INFO]: - VAT amount (forced): 4.33
2025-03-23 17:01:48 [INFO]: - Final total: 24.00
2025-03-23 17:01:48 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:01:48 [INFO]: - Difference: 0.0000
2025-03-23 17:01:48 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:01:48 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150148&signature=LDVdZkcdMxl6BRPJO%2BDPlm6M30KLWxNNEzA4vbP5Ttw%3D
2025-03-23 17:01:48 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 17:01:48 [ERROR]: API response status: 400
2025-03-23 17:01:48 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:01:48 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 17:01:48 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=19.67, Rows=3
2025-03-23 17:01:48 [ERROR]: Invoice rows total: 19.62, Invoice total: 19.67
2025-03-23 17:01:48 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:01:48 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 17:01:48 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 17:01:48 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:1011:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:01:48 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:02:43 [INFO]: Logger initialized
2025-03-23 17:02:43 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:02:43 [INFO]: Automatic synchronization is disabled
2025-03-23 17:02:43 [INFO]: Server running on port 3001
2025-03-23 17:02:43 [INFO]: API-only mode enabled
2025-03-23 17:03:42 [INFO]: Logger initialized
2025-03-23 17:03:42 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:03:42 [INFO]: Automatic synchronization is disabled
2025-03-23 17:03:42 [INFO]: Server running on port 3001
2025-03-23 17:03:42 [INFO]: API-only mode enabled
2025-03-23 17:03:48 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:03:48 [INFO]: Using order data from request body for order #1750
2025-03-23 17:03:48 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:03:48 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:03:48 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:03:48 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:03:48 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:03:48 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:03:48 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:03:48 [INFO]: Retail component values:
2025-03-23 17:03:48 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:03:48 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:03:48 [INFO]: - Total retail value: 43.74
2025-03-23 17:03:48 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:03:48 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:03:48 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:03:48 [INFO]: Final component prices (pre-tax):
2025-03-23 17:03:48 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:03:48 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:03:48 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:03:48 [INFO]: - Quantity: 12
2025-03-23 17:03:48 [INFO]: - Unit price: 0.75
2025-03-23 17:03:48 [INFO]: - Total price: 9.00
2025-03-23 17:03:48 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:03:48 [INFO]: - Quantity: 6
2025-03-23 17:03:48 [INFO]: - Unit price: 1.05
2025-03-23 17:03:48 [INFO]: - Total price: 6.30
2025-03-23 17:03:48 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:03:48 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:03:48 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:03:48 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:03:48 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:03:48 [INFO]: INITIAL CALCULATIONS:
2025-03-23 17:03:48 [INFO]: - WooCommerce total with VAT: 24.00
2025-03-23 17:03:48 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:03:48 [INFO]: - Current rows pre-tax total: 11.46
2025-03-23 17:03:48 [INFO]: - Difference in pre-tax total: 8.21
2025-03-23 17:03:48 [INFO]: Adjusting row prices to match the target pre-tax total of 19.67
2025-03-23 17:03:48 [INFO]: Adjusting largest item "Toalillemuld 2, 5 l":
2025-03-23 17:03:48 [INFO]: - Current price: 0.75, Current total: 9.00
2025-03-23 17:03:48 [INFO]: - Adjusted price: 1.43, Adjusted total: 17.21
2025-03-23 17:03:48 [INFO]: - Adjustment amount: 8.21
2025-03-23 17:03:48 [INFO]: Verified rows total after adjustment: 19.62
2025-03-23 17:03:48 [INFO]: ESTIMATED FINAL VALUES:
2025-03-23 17:03:48 [INFO]: - Adjusted pre-tax total: 19.62
2025-03-23 17:03:48 [INFO]: - Estimated VAT (22%): 4.32
2025-03-23 17:03:48 [INFO]: - Estimated final total: 23.94
2025-03-23 17:03:48 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:03:48 [INFO]: - Estimated difference: 0.06
2025-03-23 17:03:48 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:03:48 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150348&signature=bhXqh6hQAa2DikMXh5yxpTo1t5JdnZ4zrpoSRkrFE9Y%3D
2025-03-23 17:03:49 [INFO]: Next invoice number will be: 1830
2025-03-23 17:03:49 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:03:49 [INFO]: Sending invoice to Merit with 3 line items and NO forced totals.
2025-03-23 17:03:49 [INFO]: Merit will calculate VAT for each row individually following their bookkeeping standard.
2025-03-23 17:03:49 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:03:49 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150349&signature=etulxxtpRyMIr%2BQB6nek9NZ0H4u4tT0BrHuLnVeC9o4%3D
2025-03-23 17:03:49 [ERROR]: Merit API request failed: Request failed with status code 500
2025-03-23 17:03:49 [ERROR]: API response status: 500
2025-03-23 17:03:49 [ERROR]: API response data: {"Id":"c15b22bd-2f6f-4de5-b5bd-8eb95291a548","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:03:49 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 500
2025-03-23 17:03:49 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=undefined, Rows=3
2025-03-23 17:03:49 [ERROR]: Invoice rows total: 19.62, Invoice total: undefined
2025-03-23 17:03:49 [ERROR]: API error details: {"Id":"c15b22bd-2f6f-4de5-b5bd-8eb95291a548","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:03:49 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 500
2025-03-23 17:03:49 [ERROR]: Error creating invoice for order: Request failed with status code 500
2025-03-23 17:03:49 [ERROR]: Stack trace: AxiosError: Request failed with status code 500
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:968:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:03:49 [ERROR]: API response data: {"Id":"c15b22bd-2f6f-4de5-b5bd-8eb95291a548","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:04:03 [INFO]: Logger initialized
2025-03-23 17:04:03 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:04:03 [INFO]: Automatic synchronization is disabled
2025-03-23 17:04:03 [INFO]: Server running on port 3001
2025-03-23 17:04:03 [INFO]: API-only mode enabled
2025-03-23 17:04:08 [INFO]: Logger initialized
2025-03-23 17:04:09 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:04:09 [INFO]: Automatic synchronization is disabled
2025-03-23 17:04:09 [INFO]: Server running on port 3001
2025-03-23 17:04:09 [INFO]: API-only mode enabled
2025-03-23 17:04:10 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:04:10 [INFO]: Using order data from request body for order #1750
2025-03-23 17:04:10 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:04:10 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:04:10 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:04:10 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:04:10 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:04:10 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:04:10 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:04:10 [INFO]: Retail component values:
2025-03-23 17:04:10 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:04:10 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:04:10 [INFO]: - Total retail value: 43.74
2025-03-23 17:04:10 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:04:10 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:04:10 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:04:10 [INFO]: Final component prices (pre-tax):
2025-03-23 17:04:10 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:04:10 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:04:10 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:04:10 [INFO]: - Quantity: 12
2025-03-23 17:04:10 [INFO]: - Unit price: 0.75
2025-03-23 17:04:10 [INFO]: - Total price: 9.00
2025-03-23 17:04:10 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:04:10 [INFO]: - Quantity: 6
2025-03-23 17:04:10 [INFO]: - Unit price: 1.05
2025-03-23 17:04:10 [INFO]: - Total price: 6.30
2025-03-23 17:04:10 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:04:10 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:04:10 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:04:10 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:04:10 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:04:10 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:04:10 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:04:10 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:04:10 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:04:10 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:04:10 [INFO]: - Difference: 10.02
2025-03-23 17:04:10 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:04:10 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:04:10 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:04:10 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:04:10 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:04:10 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:04:10 [INFO]: - Original item total: 9.00
2025-03-23 17:04:10 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:04:10 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:04:10 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:04:10 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:04:10 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:04:10 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:04:10 [INFO]: - New difference: 0.060000
2025-03-23 17:04:10 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:04:10 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:04:10 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:04:10 [INFO]: Final difference: 0.000000
2025-03-23 17:04:10 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:04:10 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150410&signature=41u%2BXLFkhjfHo710N%2FBhheJn0DgBx354tTtKBeMHbdg%3D
2025-03-23 17:04:11 [INFO]: Next invoice number will be: 1830
2025-03-23 17:04:11 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:04:11 [INFO]: FINAL VERIFICATION:
2025-03-23 17:04:11 [INFO]: - Total amount without VAT (forced): 19.67
2025-03-23 17:04:11 [INFO]: - VAT amount (forced): 4.33
2025-03-23 17:04:11 [INFO]: - Final total: 24.00
2025-03-23 17:04:11 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:04:11 [INFO]: - Difference: 0.0000
2025-03-23 17:04:11 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:04:11 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150411&signature=H0yoHW62qD5iPGltAX2Ozh7rdjErj1vKDxI8r1l3QeQ%3D
2025-03-23 17:04:11 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 17:04:11 [ERROR]: API response status: 400
2025-03-23 17:04:11 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:04:11 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 17:04:11 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=19.67, Rows=3
2025-03-23 17:04:11 [ERROR]: Invoice rows total: 19.62, Invoice total: 19.67
2025-03-23 17:04:11 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:04:11 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 17:04:11 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 17:04:11 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:1011:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:04:11 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:04:57 [INFO]: Logger initialized
2025-03-23 17:04:57 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:04:57 [INFO]: Automatic synchronization is disabled
2025-03-23 17:04:57 [INFO]: Server running on port 3001
2025-03-23 17:04:57 [INFO]: API-only mode enabled
2025-03-23 17:04:59 [INFO]: Logger initialized
2025-03-23 17:04:59 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:04:59 [INFO]: Automatic synchronization is disabled
2025-03-23 17:04:59 [INFO]: Server running on port 3001
2025-03-23 17:04:59 [INFO]: API-only mode enabled
2025-03-23 17:05:01 [INFO]: Logger initialized
2025-03-23 17:05:01 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:05:01 [INFO]: Automatic synchronization is disabled
2025-03-23 17:05:01 [INFO]: Server running on port 3001
2025-03-23 17:05:01 [INFO]: API-only mode enabled
2025-03-23 17:05:04 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:05:04 [INFO]: Using order data from request body for order #1750
2025-03-23 17:05:04 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:05:04 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:05:04 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:05:04 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:05:04 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:05:04 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:05:04 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:05:04 [INFO]: Retail component values:
2025-03-23 17:05:04 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:05:04 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:05:04 [INFO]: - Total retail value: 43.74
2025-03-23 17:05:04 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:05:04 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:05:04 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:05:04 [INFO]: Final component prices (pre-tax):
2025-03-23 17:05:04 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:05:04 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:05:04 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:05:04 [INFO]: - Quantity: 12
2025-03-23 17:05:04 [INFO]: - Unit price: 0.75
2025-03-23 17:05:04 [INFO]: - Total price: 9.00
2025-03-23 17:05:04 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:05:04 [INFO]: - Quantity: 6
2025-03-23 17:05:04 [INFO]: - Unit price: 1.05
2025-03-23 17:05:04 [INFO]: - Total price: 6.30
2025-03-23 17:05:04 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:05:04 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:05:04 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:05:04 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:05:04 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:05:04 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:05:04 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:05:04 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:05:04 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:05:04 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:05:04 [INFO]: - Difference: 10.02
2025-03-23 17:05:04 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:05:04 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:05:04 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:05:04 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:05:04 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:05:04 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:05:04 [INFO]: - Original item total: 9.00
2025-03-23 17:05:04 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:05:04 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:05:04 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:05:04 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:05:04 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:05:04 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:05:04 [INFO]: - New difference: 0.060000
2025-03-23 17:05:04 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:05:04 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:05:04 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:05:04 [INFO]: Final difference: 0.000000
2025-03-23 17:05:04 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:05:04 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150504&signature=fP3AHAe70SArzivhuCr4Z14nxBzmVWb8xK01bnaAtaA%3D
2025-03-23 17:05:05 [INFO]: Next invoice number will be: 1830
2025-03-23 17:05:05 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:05:05 [INFO]: FINAL VERIFICATION:
2025-03-23 17:05:05 [INFO]: - Total amount without VAT (forced): 19.67
2025-03-23 17:05:05 [INFO]: - VAT amount (forced): 4.33
2025-03-23 17:05:05 [INFO]: - Final total: 24.00
2025-03-23 17:05:05 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:05:05 [INFO]: - Difference: 0.0000
2025-03-23 17:05:05 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:05:05 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150505&signature=1R8KqZhwM5Dq2y09pmsSP%2BPEOqAnVC0BI6b0liqpzTU%3D
2025-03-23 17:05:05 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 17:05:05 [ERROR]: API response status: 400
2025-03-23 17:05:05 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:05:05 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 17:05:05 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=19.67, Rows=3
2025-03-23 17:05:05 [ERROR]: Invoice rows total: 19.62, Invoice total: 19.67
2025-03-23 17:05:05 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:05:05 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 17:05:05 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 17:05:05 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:1011:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:05:05 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:06:19 [INFO]: Logger initialized
2025-03-23 17:06:19 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:06:19 [INFO]: Automatic synchronization is disabled
2025-03-23 17:06:19 [INFO]: Server running on port 3001
2025-03-23 17:06:19 [INFO]: API-only mode enabled
2025-03-23 17:06:21 [INFO]: Logger initialized
2025-03-23 17:06:21 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:06:21 [INFO]: Automatic synchronization is disabled
2025-03-23 17:06:21 [INFO]: Server running on port 3001
2025-03-23 17:06:21 [INFO]: API-only mode enabled
2025-03-23 17:06:24 [INFO]: Logger initialized
2025-03-23 17:06:24 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:06:24 [INFO]: Automatic synchronization is disabled
2025-03-23 17:06:24 [INFO]: Server running on port 3001
2025-03-23 17:06:24 [INFO]: API-only mode enabled
2025-03-23 17:06:27 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:06:27 [INFO]: Using order data from request body for order #1750
2025-03-23 17:06:27 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:06:27 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:06:27 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:06:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:06:27 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:06:27 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:06:27 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:06:27 [INFO]: Retail component values:
2025-03-23 17:06:27 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:06:27 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:06:27 [INFO]: - Total retail value: 43.74
2025-03-23 17:06:27 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:06:27 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:06:27 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:06:27 [INFO]: Final component prices (pre-tax):
2025-03-23 17:06:27 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:06:27 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:06:27 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:06:27 [INFO]: - Quantity: 12
2025-03-23 17:06:27 [INFO]: - Unit price: 0.75
2025-03-23 17:06:27 [INFO]: - Total price: 9.00
2025-03-23 17:06:27 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:06:27 [INFO]: - Quantity: 6
2025-03-23 17:06:27 [INFO]: - Unit price: 1.05
2025-03-23 17:06:27 [INFO]: - Total price: 6.30
2025-03-23 17:06:27 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:06:27 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:06:27 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:06:27 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:06:27 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:06:27 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:06:27 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:06:27 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:06:27 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:06:27 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:06:27 [INFO]: - Difference: 10.02
2025-03-23 17:06:27 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:06:27 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:06:27 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:06:27 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:06:27 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:06:27 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:06:27 [INFO]: - Original item total: 9.00
2025-03-23 17:06:27 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:06:27 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:06:27 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:06:27 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:06:27 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:06:27 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:06:27 [INFO]: - New difference: 0.060000
2025-03-23 17:06:27 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:06:27 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:06:27 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:06:27 [INFO]: Final difference: 0.000000
2025-03-23 17:06:27 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:06:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150627&signature=EtKI7hB%2B6BXbbl7JVFLKpaIzDQXPT40QErXXKJ9OLbs%3D
2025-03-23 17:06:28 [INFO]: Next invoice number will be: 1830
2025-03-23 17:06:28 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:06:28 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:06:28 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:06:28 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:06:28 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:06:28 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150628&signature=qTOUqIA40%2BLtqi1LXZIUeHJ1AvDLnYpTCae8pXuVeuU%3D
2025-03-23 17:06:28 [ERROR]: Merit API request failed: Request failed with status code 500
2025-03-23 17:06:28 [ERROR]: API response status: 500
2025-03-23 17:06:28 [ERROR]: API response data: {"Id":"09cc4179-6bac-4880-af98-1a82b10487ae","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:06:28 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 500
2025-03-23 17:06:28 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=undefined, Rows=3
2025-03-23 17:06:28 [ERROR]: Invoice rows total: 19.62, Invoice total: undefined
2025-03-23 17:06:28 [ERROR]: API error details: {"Id":"09cc4179-6bac-4880-af98-1a82b10487ae","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:06:28 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 500
2025-03-23 17:06:28 [ERROR]: Error creating invoice for order: Request failed with status code 500
2025-03-23 17:06:28 [ERROR]: Stack trace: AxiosError: Request failed with status code 500
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:997:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:06:28 [ERROR]: API response data: {"Id":"09cc4179-6bac-4880-af98-1a82b10487ae","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:07:26 [INFO]: Logger initialized
2025-03-23 17:07:26 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:07:26 [INFO]: Automatic synchronization is disabled
2025-03-23 17:07:26 [INFO]: Server running on port 3001
2025-03-23 17:07:26 [INFO]: API-only mode enabled
2025-03-23 17:07:27 [INFO]: Logger initialized
2025-03-23 17:07:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:07:27 [INFO]: Automatic synchronization is disabled
2025-03-23 17:07:27 [INFO]: Server running on port 3001
2025-03-23 17:07:27 [INFO]: API-only mode enabled
2025-03-23 17:07:30 [INFO]: Logger initialized
2025-03-23 17:07:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:07:31 [INFO]: Automatic synchronization is disabled
2025-03-23 17:07:31 [INFO]: Server running on port 3001
2025-03-23 17:07:31 [INFO]: API-only mode enabled
2025-03-23 17:07:34 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:07:34 [INFO]: Using order data from request body for order #1750
2025-03-23 17:07:34 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:07:34 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:07:34 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:07:34 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:07:34 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:07:34 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:07:34 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:07:34 [INFO]: Retail component values:
2025-03-23 17:07:34 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:07:34 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:07:34 [INFO]: - Total retail value: 43.74
2025-03-23 17:07:34 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:07:34 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:07:34 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:07:34 [INFO]: Final component prices (pre-tax):
2025-03-23 17:07:34 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:07:34 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:07:34 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:07:34 [INFO]: - Quantity: 12
2025-03-23 17:07:34 [INFO]: - Unit price: 0.75
2025-03-23 17:07:34 [INFO]: - Total price: 9.00
2025-03-23 17:07:34 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:07:34 [INFO]: - Quantity: 6
2025-03-23 17:07:34 [INFO]: - Unit price: 1.05
2025-03-23 17:07:34 [INFO]: - Total price: 6.30
2025-03-23 17:07:34 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:07:34 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:07:34 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:07:34 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:07:34 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:07:34 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:07:34 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:07:34 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:07:34 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:07:34 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:07:34 [INFO]: - Difference: 10.02
2025-03-23 17:07:34 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:07:34 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:07:34 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:07:34 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:07:34 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:07:34 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:07:34 [INFO]: - Original item total: 9.00
2025-03-23 17:07:34 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:07:34 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:07:34 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:07:34 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:07:34 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:07:34 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:07:34 [INFO]: - New difference: 0.060000
2025-03-23 17:07:34 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:07:34 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:07:34 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:07:34 [INFO]: Final difference: 0.000000
2025-03-23 17:07:34 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:07:34 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150734&signature=XUcTOTLlpf5Q0tzoQ4rQT2frN%2BOG2JV7gsv8VibvfaU%3D
2025-03-23 17:07:35 [INFO]: Next invoice number will be: 1830
2025-03-23 17:07:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:07:35 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:07:35 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:07:35 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:07:35 [INFO]: Added calculated totals for API requirements:
2025-03-23 17:07:35 [INFO]: - TotalAmount: 19.62
2025-03-23 17:07:35 [INFO]: - TaxAmount: 4.32
2025-03-23 17:07:35 [INFO]: - Combined (with tax): 23.94
2025-03-23 17:07:35 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:07:35 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150735&signature=2iua05B6cVHFMs8sO%2BkekK5OVHGO04bpuFhQKO4wvyY%3D
2025-03-23 17:07:35 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"0458f4bb-437d-4304-8c21-948d8c5ecccc","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:07:35 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:09:32 [INFO]: Logger initialized
2025-03-23 17:09:32 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:09:32 [INFO]: Automatic synchronization is disabled
2025-03-23 17:09:32 [INFO]: Server running on port 3001
2025-03-23 17:09:32 [INFO]: API-only mode enabled
2025-03-23 17:09:33 [INFO]: Logger initialized
2025-03-23 17:09:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:09:33 [INFO]: Automatic synchronization is disabled
2025-03-23 17:09:33 [INFO]: Server running on port 3001
2025-03-23 17:09:33 [INFO]: API-only mode enabled
2025-03-23 17:09:36 [INFO]: Logger initialized
2025-03-23 17:09:36 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:09:36 [INFO]: Automatic synchronization is disabled
2025-03-23 17:09:36 [INFO]: Server running on port 3001
2025-03-23 17:09:36 [INFO]: API-only mode enabled
2025-03-23 17:09:43 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:09:43 [INFO]: Using order data from request body for order #1750
2025-03-23 17:09:43 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:09:43 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:09:43 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:09:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:09:43 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:09:43 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:09:43 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:09:43 [INFO]: Retail component values:
2025-03-23 17:09:43 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:09:43 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:09:43 [INFO]: - Total retail value: 43.74
2025-03-23 17:09:43 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:09:43 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:09:43 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:09:43 [INFO]: Final component prices (pre-tax):
2025-03-23 17:09:43 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:09:43 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:09:43 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:09:43 [INFO]: - Quantity: 12
2025-03-23 17:09:43 [INFO]: - Unit price: 0.75
2025-03-23 17:09:43 [INFO]: - Total price: 9.00
2025-03-23 17:09:43 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:09:43 [INFO]: - Quantity: 6
2025-03-23 17:09:43 [INFO]: - Unit price: 1.05
2025-03-23 17:09:43 [INFO]: - Total price: 6.30
2025-03-23 17:09:43 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:09:43 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:09:43 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:09:43 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:09:43 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:09:43 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:09:43 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:09:43 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:09:43 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:09:43 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:09:43 [INFO]: - Difference: 10.02
2025-03-23 17:09:43 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:09:43 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:09:43 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:09:43 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:09:43 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:09:43 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:09:43 [INFO]: - Original item total: 9.00
2025-03-23 17:09:43 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:09:43 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:09:43 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:09:43 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:09:43 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:09:43 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:09:43 [INFO]: - New difference: 0.060000
2025-03-23 17:09:43 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:09:43 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:09:43 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:09:43 [INFO]: Final difference: 0.000000
2025-03-23 17:09:43 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:09:43 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150943&signature=y8wgbXfNm105H4nj7iTaN5F4XdnSWDnoIBvrohiLmmY%3D
2025-03-23 17:09:44 [INFO]: Next invoice number will be: 1830
2025-03-23 17:09:44 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:09:44 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:09:44 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:09:44 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:09:44 [INFO]: Added calculated totals for API requirements with fine adjustment:
2025-03-23 17:09:44 [INFO]: - Original calculated total amount: 19.62
2025-03-23 17:09:44 [INFO]: - Adjusted TotalAmount: 19.66
2025-03-23 17:09:44 [INFO]: - TaxAmount: 4.33
2025-03-23 17:09:44 [INFO]: - Projected total: 23.99
2025-03-23 17:09:44 [INFO]: - WooCommerce total (goal): 24.00
2025-03-23 17:09:44 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:09:44 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323150944&signature=8MxOXq%2FLbdBIsXaCVwOTqJ6F14JjUoRKbQPCy5b6S%2Bs%3D
2025-03-23 17:09:44 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 17:09:44 [ERROR]: API response status: 400
2025-03-23 17:09:44 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:09:44 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 17:09:44 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=19.66, Rows=3
2025-03-23 17:09:44 [ERROR]: Invoice rows total: 19.62, Invoice total: 19.66
2025-03-23 17:09:44 [ERROR]: API error details: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:09:44 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 17:09:44 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 17:09:44 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:1031:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:09:44 [ERROR]: API response data: {"Message":"Ridade summa ei võrdu arve summaga\n"}
2025-03-23 17:10:28 [INFO]: Logger initialized
2025-03-23 17:10:28 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:10:28 [INFO]: Automatic synchronization is disabled
2025-03-23 17:10:28 [INFO]: Server running on port 3001
2025-03-23 17:10:28 [INFO]: API-only mode enabled
2025-03-23 17:10:30 [INFO]: Logger initialized
2025-03-23 17:10:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:10:31 [INFO]: Automatic synchronization is disabled
2025-03-23 17:10:31 [INFO]: Server running on port 3001
2025-03-23 17:10:31 [INFO]: API-only mode enabled
2025-03-23 17:10:33 [INFO]: Logger initialized
2025-03-23 17:10:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:10:33 [INFO]: Automatic synchronization is disabled
2025-03-23 17:10:33 [INFO]: Server running on port 3001
2025-03-23 17:10:33 [INFO]: API-only mode enabled
2025-03-23 17:10:37 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:10:37 [INFO]: Using order data from request body for order #1750
2025-03-23 17:10:37 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:10:37 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:10:37 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:10:37 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:10:37 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:10:37 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:10:37 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:10:37 [INFO]: Retail component values:
2025-03-23 17:10:37 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:10:37 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:10:37 [INFO]: - Total retail value: 43.74
2025-03-23 17:10:37 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:10:37 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:10:37 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:10:37 [INFO]: Final component prices (pre-tax):
2025-03-23 17:10:37 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:10:37 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:10:37 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:10:37 [INFO]: - Quantity: 12
2025-03-23 17:10:37 [INFO]: - Unit price: 0.75
2025-03-23 17:10:37 [INFO]: - Total price: 9.00
2025-03-23 17:10:37 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:10:37 [INFO]: - Quantity: 6
2025-03-23 17:10:37 [INFO]: - Unit price: 1.05
2025-03-23 17:10:37 [INFO]: - Total price: 6.30
2025-03-23 17:10:37 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:10:37 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:10:37 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:10:37 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:10:37 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:10:37 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:10:37 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:10:37 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:10:37 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:10:37 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:10:37 [INFO]: - Difference: 10.02
2025-03-23 17:10:37 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:10:37 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:10:37 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:10:37 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:10:37 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:10:37 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:10:37 [INFO]: - Original item total: 9.00
2025-03-23 17:10:37 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:10:37 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:10:37 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:10:37 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:10:37 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:10:37 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:10:37 [INFO]: - New difference: 0.060000
2025-03-23 17:10:37 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:10:37 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:10:37 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:10:37 [INFO]: Final difference: 0.000000
2025-03-23 17:10:37 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:10:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151037&signature=Rtj%2Bd%2FxQKzra8Gy6ftx%2B5S4s2DkaMs13aJ6Ioxn8xNA%3D
2025-03-23 17:10:37 [INFO]: Next invoice number will be: 1830
2025-03-23 17:10:37 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:10:37 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:10:37 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:10:37 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:10:37 [INFO]: Added calculated totals that exactly match row sum:
2025-03-23 17:10:37 [INFO]: - TotalAmount (sum of rows): 19.62
2025-03-23 17:10:37 [INFO]: - TaxAmount (22%): 4.32
2025-03-23 17:10:37 [INFO]: - Total with tax: 23.94
2025-03-23 17:10:37 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:10:37 [INFO]: - Difference: 0.06
2025-03-23 17:10:37 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:10:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151037&signature=xICXouPnKlRcdSyVqMwg0nwRZcwCQdYdQJKGR9CsEIU%3D
2025-03-23 17:10:38 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"fe6b569b-5155-4082-a339-62226e96f227","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:10:38 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:12:15 [INFO]: Logger initialized
2025-03-23 17:12:16 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:12:16 [INFO]: Automatic synchronization is disabled
2025-03-23 17:12:16 [INFO]: Server running on port 3001
2025-03-23 17:12:16 [INFO]: API-only mode enabled
2025-03-23 17:12:23 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:12:23 [INFO]: Using order data from request body for order #1750
2025-03-23 17:12:23 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:12:23 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:12:23 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:12:23 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:12:23 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:12:23 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:12:23 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:12:23 [INFO]: Retail component values:
2025-03-23 17:12:23 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:12:23 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:12:23 [INFO]: - Total retail value: 43.74
2025-03-23 17:12:23 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:12:23 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:12:23 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:12:23 [INFO]: Final component prices (pre-tax):
2025-03-23 17:12:23 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:12:23 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:12:23 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:12:23 [INFO]: - Quantity: 12
2025-03-23 17:12:23 [INFO]: - Unit price: 0.75
2025-03-23 17:12:23 [INFO]: - Total price: 9.00
2025-03-23 17:12:23 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:12:23 [INFO]: - Quantity: 6
2025-03-23 17:12:23 [INFO]: - Unit price: 1.05
2025-03-23 17:12:23 [INFO]: - Total price: 6.30
2025-03-23 17:12:23 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:12:23 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:12:23 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:12:23 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:12:23 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:12:23 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:12:23 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:12:23 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:12:23 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:12:23 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:12:23 [INFO]: - Difference: 10.02
2025-03-23 17:12:23 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:12:23 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:12:23 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:12:23 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:12:23 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:12:23 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:12:23 [INFO]: - Original item total: 9.00
2025-03-23 17:12:23 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:12:23 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:12:23 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:12:23 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:12:23 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:12:23 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:12:23 [INFO]: - New difference: 0.060000
2025-03-23 17:12:23 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:12:23 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:12:23 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:12:23 [INFO]: Final difference: 0.000000
2025-03-23 17:12:23 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:12:23 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151223&signature=7woSUTjwFn4bC1j3GO%2FwPSfQm9gtrx43NTdJyWXqUSY%3D
2025-03-23 17:12:24 [INFO]: Next invoice number will be: 1830
2025-03-23 17:12:24 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:12:24 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:12:24 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:12:24 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:12:24 [INFO]: Final adjustment needed: 0.05 to reach exactly 24.00
2025-03-23 17:12:24 [INFO]: Making final adjustment to item "Toalillemuld 2, 5 l":
2025-03-23 17:12:24 [INFO]: - Current price: 1.43
2025-03-23 17:12:24 [INFO]: - Adjustment: +0.00
2025-03-23 17:12:24 [INFO]: - New price: 1.43
2025-03-23 17:12:24 [INFO]: Updated TotalAmount: 19.62
2025-03-23 17:12:24 [INFO]: Expected new total with VAT: 23.94
2025-03-23 17:12:24 [INFO]: Final invoice data:
2025-03-23 17:12:24 [INFO]: - TotalAmount (sum of rows): 19.62
2025-03-23 17:12:24 [INFO]: - Letting Merit calculate tax per row
2025-03-23 17:12:24 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:12:24 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:12:24 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151224&signature=63JndlXrrR14zyBspmPGK%2B43faZJIU7UjUlX%2FA4Lkys%3D
2025-03-23 17:12:25 [ERROR]: Merit API request failed: Request failed with status code 500
2025-03-23 17:12:25 [ERROR]: API response status: 500
2025-03-23 17:12:25 [ERROR]: API response data: {"Id":"dc54b7b5-decd-4c75-bdb3-69332356c54b","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:12:25 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 500
2025-03-23 17:12:25 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=19.62, Rows=3
2025-03-23 17:12:25 [ERROR]: Invoice rows total: 19.62, Invoice total: 19.62
2025-03-23 17:12:25 [ERROR]: API error details: {"Id":"dc54b7b5-decd-4c75-bdb3-69332356c54b","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:12:25 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 500
2025-03-23 17:12:25 [ERROR]: Error creating invoice for order: Request failed with status code 500
2025-03-23 17:12:25 [ERROR]: Stack trace: AxiosError: Request failed with status code 500
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:1075:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:12:25 [ERROR]: API response data: {"Id":"dc54b7b5-decd-4c75-bdb3-69332356c54b","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:13:27 [INFO]: Logger initialized
2025-03-23 17:13:28 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:13:28 [INFO]: Automatic synchronization is disabled
2025-03-23 17:13:28 [INFO]: Server running on port 3001
2025-03-23 17:13:28 [INFO]: API-only mode enabled
2025-03-23 17:13:29 [INFO]: Logger initialized
2025-03-23 17:13:29 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:13:29 [INFO]: Automatic synchronization is disabled
2025-03-23 17:13:29 [INFO]: Server running on port 3001
2025-03-23 17:13:29 [INFO]: API-only mode enabled
2025-03-23 17:13:33 [INFO]: Logger initialized
2025-03-23 17:13:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:13:33 [INFO]: Automatic synchronization is disabled
2025-03-23 17:13:33 [INFO]: Server running on port 3001
2025-03-23 17:13:33 [INFO]: API-only mode enabled
2025-03-23 17:13:35 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:13:35 [INFO]: Using order data from request body for order #1750
2025-03-23 17:13:35 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:13:35 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:13:35 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:13:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:13:35 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:13:35 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:13:35 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:13:35 [INFO]: Retail component values:
2025-03-23 17:13:35 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:13:35 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:13:35 [INFO]: - Total retail value: 43.74
2025-03-23 17:13:35 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:13:35 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:13:35 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:13:35 [INFO]: Final component prices (pre-tax):
2025-03-23 17:13:35 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:13:35 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:13:35 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:13:35 [INFO]: - Quantity: 12
2025-03-23 17:13:35 [INFO]: - Unit price: 0.75
2025-03-23 17:13:35 [INFO]: - Total price: 9.00
2025-03-23 17:13:35 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:13:35 [INFO]: - Quantity: 6
2025-03-23 17:13:35 [INFO]: - Unit price: 1.05
2025-03-23 17:13:35 [INFO]: - Total price: 6.30
2025-03-23 17:13:35 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:13:35 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:13:35 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:13:35 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:13:35 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:13:35 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:13:35 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:13:35 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:13:35 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:13:35 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:13:35 [INFO]: - Difference: 10.02
2025-03-23 17:13:35 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:13:35 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:13:35 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:13:35 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:13:35 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:13:35 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:13:35 [INFO]: - Original item total: 9.00
2025-03-23 17:13:35 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:13:35 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:13:35 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:13:35 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:13:35 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:13:35 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:13:35 [INFO]: - New difference: 0.060000
2025-03-23 17:13:35 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:13:35 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:13:35 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:13:35 [INFO]: Final difference: 0.000000
2025-03-23 17:13:35 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:13:35 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151335&signature=EuFuUY42cyBM7IKcK2ssGGsnLiGVDCnVpwFrGHEe0dY%3D
2025-03-23 17:13:35 [INFO]: Next invoice number will be: 1830
2025-03-23 17:13:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:13:35 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:13:35 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:13:35 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:13:35 [INFO]: Added properly structured data for Merit API:
2025-03-23 17:13:35 [INFO]: - TotalAmount: 19.62
2025-03-23 17:13:35 [INFO]: - TaxAmount[0].Amount: 4.32
2025-03-23 17:13:35 [INFO]: - Total with tax: 23.94
2025-03-23 17:13:35 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:13:35 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:13:35 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151335&signature=AxnXchSIL8TvtYVbM4QkFdbxddPifXiqQmbNL3BOh3o%3D
2025-03-23 17:13:36 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"7bdf0bd8-7a7a-4895-8102-d0d8c367c262","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:13:36 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:14:51 [INFO]: Logger initialized
2025-03-23 17:14:52 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:14:52 [INFO]: Automatic synchronization is disabled
2025-03-23 17:14:52 [INFO]: Server running on port 3001
2025-03-23 17:14:52 [INFO]: API-only mode enabled
2025-03-23 17:14:53 [INFO]: Logger initialized
2025-03-23 17:14:53 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:14:53 [INFO]: Automatic synchronization is disabled
2025-03-23 17:14:53 [INFO]: Server running on port 3001
2025-03-23 17:14:53 [INFO]: API-only mode enabled
2025-03-23 17:14:55 [INFO]: Logger initialized
2025-03-23 17:14:55 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:14:55 [INFO]: Automatic synchronization is disabled
2025-03-23 17:14:55 [INFO]: Server running on port 3001
2025-03-23 17:14:55 [INFO]: API-only mode enabled
2025-03-23 17:14:59 [INFO]: Logger initialized
2025-03-23 17:14:59 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:14:59 [INFO]: Automatic synchronization is disabled
2025-03-23 17:14:59 [INFO]: Server running on port 3001
2025-03-23 17:14:59 [INFO]: API-only mode enabled
2025-03-23 17:15:17 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:15:17 [INFO]: Using order data from request body for order #1750
2025-03-23 17:15:17 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:15:17 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:15:17 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:15:17 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:15:17 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:15:17 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:15:17 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:15:17 [INFO]: Retail component values:
2025-03-23 17:15:17 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:15:17 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:15:17 [INFO]: - Total retail value: 43.74
2025-03-23 17:15:17 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:15:17 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:15:17 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:15:17 [INFO]: Final component prices (pre-tax):
2025-03-23 17:15:17 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:15:17 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:15:17 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:15:17 [INFO]: - Quantity: 12
2025-03-23 17:15:17 [INFO]: - Unit price: 0.75
2025-03-23 17:15:17 [INFO]: - Total price: 9.00
2025-03-23 17:15:17 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:15:17 [INFO]: - Quantity: 6
2025-03-23 17:15:17 [INFO]: - Unit price: 1.05
2025-03-23 17:15:17 [INFO]: - Total price: 6.30
2025-03-23 17:15:17 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:15:17 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:15:17 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:15:17 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:15:17 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:15:17 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:15:17 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:15:17 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:15:17 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:15:17 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:15:17 [INFO]: - Difference: 10.02
2025-03-23 17:15:17 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:15:17 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:15:17 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:15:17 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:15:17 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:15:17 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:15:17 [INFO]: - Original item total: 9.00
2025-03-23 17:15:17 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:15:17 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:15:17 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:15:17 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:15:17 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:15:17 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:15:17 [INFO]: - New difference: 0.060000
2025-03-23 17:15:17 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:15:17 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:15:17 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:15:17 [INFO]: Final difference: 0.000000
2025-03-23 17:15:17 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:15:17 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151517&signature=IRjnJYrUVr7dgs5hK4cW3ONC4UT7gIdYInOYA4j3mWg%3D
2025-03-23 17:15:18 [INFO]: Next invoice number will be: 1830
2025-03-23 17:15:18 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:15:18 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:15:18 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:15:18 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:15:18 [INFO]: Added properly structured data for Merit API:
2025-03-23 17:15:18 [INFO]: - TotalAmount: 19.62
2025-03-23 17:15:18 [INFO]: - TaxAmount[0].Amount: 4.32
2025-03-23 17:15:18 [INFO]: - RoundingAmount: 0.06
2025-03-23 17:15:18 [INFO]: - Total with tax and rounding: 24.00
2025-03-23 17:15:18 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:15:18 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:15:18 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151518&signature=lSLKdhWCeb%2FOcjtceBTvECXXxYgkDcpqG%2BTKgcKcbCM%3D
2025-03-23 17:15:18 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"af51fc98-56e6-4fe3-b915-758c5e490a6f","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:15:18 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:16:26 [INFO]: Logger initialized
2025-03-23 17:16:26 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:16:26 [INFO]: Automatic synchronization is disabled
2025-03-23 17:16:26 [INFO]: Server running on port 3001
2025-03-23 17:16:26 [INFO]: API-only mode enabled
2025-03-23 17:16:28 [INFO]: Logger initialized
2025-03-23 17:16:28 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:16:28 [INFO]: Automatic synchronization is disabled
2025-03-23 17:16:28 [INFO]: Server running on port 3001
2025-03-23 17:16:28 [INFO]: API-only mode enabled
2025-03-23 17:16:30 [INFO]: Logger initialized
2025-03-23 17:16:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:16:31 [INFO]: Automatic synchronization is disabled
2025-03-23 17:16:31 [INFO]: Server running on port 3001
2025-03-23 17:16:31 [INFO]: API-only mode enabled
2025-03-23 17:16:37 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:16:37 [INFO]: Using order data from request body for order #1750
2025-03-23 17:16:37 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:16:37 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:16:37 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:16:37 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:16:37 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:16:37 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:16:37 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:16:37 [INFO]: Retail component values:
2025-03-23 17:16:37 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:16:37 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:16:37 [INFO]: - Total retail value: 43.74
2025-03-23 17:16:37 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:16:37 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:16:37 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:16:37 [INFO]: Final component prices (pre-tax):
2025-03-23 17:16:37 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:16:37 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:16:37 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:16:37 [INFO]: - Quantity: 12
2025-03-23 17:16:37 [INFO]: - Unit price: 0.75
2025-03-23 17:16:37 [INFO]: - Total price: 9.00
2025-03-23 17:16:37 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:16:37 [INFO]: - Quantity: 6
2025-03-23 17:16:37 [INFO]: - Unit price: 1.05
2025-03-23 17:16:37 [INFO]: - Total price: 6.30
2025-03-23 17:16:37 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:16:37 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:16:37 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:16:37 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:16:37 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:16:37 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:16:37 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:16:37 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:16:37 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:16:37 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:16:37 [INFO]: - Difference: 10.02
2025-03-23 17:16:37 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:16:37 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:16:37 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:16:37 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:16:37 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:16:37 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:16:37 [INFO]: - Original item total: 9.00
2025-03-23 17:16:37 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:16:37 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:16:37 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:16:37 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:16:37 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:16:37 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:16:37 [INFO]: - New difference: 0.060000
2025-03-23 17:16:37 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:16:37 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:16:37 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:16:37 [INFO]: Final difference: 0.000000
2025-03-23 17:16:37 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:16:37 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151637&signature=odJeJ8fYIoFmk2Lp6T7VgAM1wxh3VpSGSwvORGQzHBE%3D
2025-03-23 17:16:38 [INFO]: Next invoice number will be: 1830
2025-03-23 17:16:38 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:16:38 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:16:38 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:16:38 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:16:38 [INFO]: Added properly structured data for Merit API:
2025-03-23 17:16:38 [INFO]: - TotalAmount: 19.62
2025-03-23 17:16:38 [INFO]: - TaxAmount[0].Amount: 4.32
2025-03-23 17:16:38 [INFO]: - RoundingAmount: 0.06
2025-03-23 17:16:38 [INFO]: - Total with tax and rounding: 24.00
2025-03-23 17:16:38 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:16:38 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:16:38 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151638&signature=%2BGWnvJsyGOG8QZdsfiDnRRaro0JStDhKd0csgFdobpY%3D
2025-03-23 17:16:38 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"e36c7076-ab2f-4457-8c3d-ca3f48f463a0","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:16:38 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:18:07 [INFO]: Logger initialized
2025-03-23 17:18:07 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:18:07 [INFO]: Automatic synchronization is disabled
2025-03-23 17:18:07 [INFO]: Server running on port 3001
2025-03-23 17:18:07 [INFO]: API-only mode enabled
2025-03-23 17:18:22 [INFO]: Logger initialized
2025-03-23 17:18:22 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:18:22 [INFO]: Automatic synchronization is disabled
2025-03-23 17:18:22 [INFO]: Server running on port 3001
2025-03-23 17:18:22 [INFO]: API-only mode enabled
2025-03-23 17:19:08 [INFO]: Logger initialized
2025-03-23 17:19:08 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:19:08 [INFO]: Automatic synchronization is disabled
2025-03-23 17:19:08 [INFO]: Server running on port 3001
2025-03-23 17:19:08 [INFO]: API-only mode enabled
2025-03-23 17:19:14 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:19:14 [INFO]: Using order data from request body for order #1750
2025-03-23 17:19:14 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:19:14 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:19:14 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:19:14 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:19:14 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:19:14 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:19:14 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:19:14 [INFO]: Retail component values:
2025-03-23 17:19:14 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:19:14 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:19:14 [INFO]: - Total retail value: 43.74
2025-03-23 17:19:14 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:19:14 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:19:14 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:19:14 [INFO]: Final component prices (pre-tax):
2025-03-23 17:19:14 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:19:14 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:19:14 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:19:14 [INFO]: - Quantity: 12
2025-03-23 17:19:14 [INFO]: - Unit price: 0.75
2025-03-23 17:19:14 [INFO]: - Total price: 9.00
2025-03-23 17:19:14 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:19:14 [INFO]: - Quantity: 6
2025-03-23 17:19:14 [INFO]: - Unit price: 1.05
2025-03-23 17:19:14 [INFO]: - Total price: 6.30
2025-03-23 17:19:14 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:19:14 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:19:14 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:19:14 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:19:14 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:19:14 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:19:14 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:19:14 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:19:14 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:19:14 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:19:14 [INFO]: - Difference: 10.02
2025-03-23 17:19:14 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:19:14 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:19:14 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:19:14 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:19:14 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:19:14 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:19:14 [INFO]: - Original item total: 9.00
2025-03-23 17:19:14 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:19:14 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:19:14 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:19:14 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:19:14 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:19:14 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:19:14 [INFO]: - New difference: 0.060000
2025-03-23 17:19:14 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:19:14 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:19:14 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:19:14 [INFO]: Final difference: 0.000000
2025-03-23 17:19:14 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:19:14 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151914&signature=j%2Flxg3oSjsl%2F6oQdj%2FaF4hJ83l2N6BV6eQHEs%2BAxxHk%3D
2025-03-23 17:19:15 [INFO]: Next invoice number will be: 1830
2025-03-23 17:19:15 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:19:15 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:19:15 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:19:15 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:19:15 [INFO]: Added properly structured data for Merit API with forced rounding:
2025-03-23 17:19:15 [INFO]: - TotalAmount: 19.62
2025-03-23 17:19:15 [INFO]: - TaxAmount[0].Amount: 4.32
2025-03-23 17:19:15 [INFO]: - RoundingAmount (forced): 0.05
2025-03-23 17:19:15 [INFO]: - Expected total with VAT and rounding: 24.00
2025-03-23 17:19:15 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:19:15 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:19:15 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151915&signature=6gkgqx9JIc%2FmxqdiB%2FU4NCtiXsovyXdtU77FBSX4ml4%3D
2025-03-23 17:19:15 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"d754ea86-bbc8-4116-90c2-e6cf3b3e024f","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:19:15 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:19:31 [INFO]: Logger initialized
2025-03-23 17:19:31 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:19:31 [INFO]: Automatic synchronization is disabled
2025-03-23 17:19:31 [INFO]: Server running on port 3001
2025-03-23 17:19:31 [INFO]: API-only mode enabled
2025-03-23 17:19:46 [INFO]: Logger initialized
2025-03-23 17:19:46 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:19:46 [INFO]: Automatic synchronization is disabled
2025-03-23 17:19:46 [INFO]: Server running on port 3001
2025-03-23 17:19:46 [INFO]: API-only mode enabled
2025-03-23 17:19:48 [INFO]: Logger initialized
2025-03-23 17:19:48 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:19:48 [INFO]: Automatic synchronization is disabled
2025-03-23 17:19:48 [INFO]: Server running on port 3001
2025-03-23 17:19:48 [INFO]: API-only mode enabled
2025-03-23 17:19:53 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:19:53 [INFO]: Using order data from request body for order #1750
2025-03-23 17:19:53 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:19:53 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:19:53 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:19:53 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:19:53 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:19:53 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:19:53 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:19:53 [INFO]: Retail component values:
2025-03-23 17:19:53 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:19:53 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:19:53 [INFO]: - Total retail value: 43.74
2025-03-23 17:19:53 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:19:53 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:19:53 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:19:53 [INFO]: Final component prices (pre-tax):
2025-03-23 17:19:53 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:19:53 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:19:53 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:19:53 [INFO]: - Quantity: 12
2025-03-23 17:19:53 [INFO]: - Unit price: 0.75
2025-03-23 17:19:53 [INFO]: - Total price: 9.00
2025-03-23 17:19:53 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:19:53 [INFO]: - Quantity: 6
2025-03-23 17:19:53 [INFO]: - Unit price: 1.05
2025-03-23 17:19:53 [INFO]: - Total price: 6.30
2025-03-23 17:19:53 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:19:53 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:19:53 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:19:53 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:19:53 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:19:53 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:19:53 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:19:53 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151953&signature=P7SBmxiTCH7TWo0GK9OYfMJL9h5tFYh1qJwUeu5l0pY%3D
2025-03-23 17:19:54 [INFO]: Next invoice number will be: 1830
2025-03-23 17:19:54 [INFO]: Invoice prepared with rows properly rounded to 2 decimal places:
2025-03-23 17:19:54 [INFO]: - Each row price rounded to 2 decimals before multiplying by quantity
2025-03-23 17:19:54 [INFO]: - Each row total rounded to 2 decimals before summing
2025-03-23 17:19:54 [INFO]: - TotalAmount: 11.46
2025-03-23 17:19:54 [INFO]: - Total rows: 3
2025-03-23 17:19:54 [INFO]: - Let Merit calculate VAT per row and total according to bookkeeping standards
2025-03-23 17:19:54 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:19:54 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323151954&signature=7RnIZmGiYTRjwzNtDFX6be7XQ3shmBRnhGUtFmbtTTc%3D
2025-03-23 17:19:54 [ERROR]: Merit API request failed: Request failed with status code 500
2025-03-23 17:19:54 [ERROR]: API response status: 500
2025-03-23 17:19:54 [ERROR]: API response data: {"Id":"51b0fb41-6def-4c83-8fa9-d7a8b68bbd47","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:19:54 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 500
2025-03-23 17:19:54 [ERROR]: Invoice data that caused error: InvoiceNo=1830, Total=11.46, Rows=3
2025-03-23 17:19:54 [ERROR]: Invoice rows total: 11.46, Invoice total: 11.46
2025-03-23 17:19:54 [ERROR]: API error details: {"Id":"51b0fb41-6def-4c83-8fa9-d7a8b68bbd47","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:19:54 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 500
2025-03-23 17:19:54 [ERROR]: Error creating invoice for order: Request failed with status code 500
2025-03-23 17:19:54 [ERROR]: Stack trace: AxiosError: Request failed with status code 500
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:898:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:19:54 [ERROR]: API response data: {"Id":"51b0fb41-6def-4c83-8fa9-d7a8b68bbd47","ErrorCode":"NullReferenceException","Message":"Unexpected error has occured.","Details":null}
2025-03-23 17:20:02 [INFO]: Logger initialized
2025-03-23 17:20:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:20:02 [INFO]: Automatic synchronization is disabled
2025-03-23 17:20:02 [INFO]: Server running on port 3001
2025-03-23 17:20:02 [INFO]: API-only mode enabled
2025-03-23 17:20:06 [INFO]: Logger initialized
2025-03-23 17:20:06 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:20:06 [INFO]: Automatic synchronization is disabled
2025-03-23 17:20:06 [INFO]: Server running on port 3001
2025-03-23 17:20:06 [INFO]: API-only mode enabled
2025-03-23 17:20:09 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:20:09 [INFO]: Using order data from request body for order #1750
2025-03-23 17:20:09 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:20:09 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:20:09 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:20:09 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:20:09 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:20:09 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:20:09 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:20:09 [INFO]: Retail component values:
2025-03-23 17:20:09 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:20:09 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:20:09 [INFO]: - Total retail value: 43.74
2025-03-23 17:20:09 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:20:09 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:20:09 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:20:09 [INFO]: Final component prices (pre-tax):
2025-03-23 17:20:09 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:20:09 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:20:09 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:20:09 [INFO]: - Quantity: 12
2025-03-23 17:20:09 [INFO]: - Unit price: 0.75
2025-03-23 17:20:09 [INFO]: - Total price: 9.00
2025-03-23 17:20:09 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:20:09 [INFO]: - Quantity: 6
2025-03-23 17:20:09 [INFO]: - Unit price: 1.05
2025-03-23 17:20:09 [INFO]: - Total price: 6.30
2025-03-23 17:20:09 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:20:09 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:20:09 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:20:09 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:20:09 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:20:09 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:20:09 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:20:09 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:20:09 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:20:09 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:20:09 [INFO]: - Difference: 10.02
2025-03-23 17:20:09 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:20:09 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:20:09 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:20:09 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:20:09 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:20:09 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:20:09 [INFO]: - Original item total: 9.00
2025-03-23 17:20:09 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:20:09 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:20:09 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:20:09 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:20:09 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:20:09 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:20:09 [INFO]: - New difference: 0.060000
2025-03-23 17:20:09 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:20:09 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:20:09 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:20:09 [INFO]: Final difference: 0.000000
2025-03-23 17:20:09 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:20:09 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152009&signature=V4EiTX4VEAr9Xlm7TAYMg9T%2B8zCAtxbjN2XpihJHKKU%3D
2025-03-23 17:20:10 [INFO]: Next invoice number will be: 1830
2025-03-23 17:20:10 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:20:10 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:20:10 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:20:10 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:20:10 [INFO]: Added properly structured data for Merit API with forced rounding:
2025-03-23 17:20:10 [INFO]: - TotalAmount: 19.62
2025-03-23 17:20:10 [INFO]: - TaxAmount[0].Amount: 4.32
2025-03-23 17:20:10 [INFO]: - RoundingAmount (forced): 0.05
2025-03-23 17:20:10 [INFO]: - Expected total with VAT and rounding: 24.00
2025-03-23 17:20:10 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:20:10 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:20:10 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152010&signature=XH5YtZEm1No3nnkf9FpUUH%2B1nOPCEqro3UCqmhAtnQs%3D
2025-03-23 17:20:11 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"b7effe0a-7f1c-4a50-9deb-7f37c5fe16d8","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:20:11 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:20:13 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:20:14 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:20:21 [INFO]: Fetching WooCommerce order: 1749
2025-03-23 17:20:24 [INFO]: Manually creating invoice for WooCommerce order #1749
2025-03-23 17:20:24 [INFO]: Using order data from request body for order #1749
2025-03-23 17:20:24 [INFO]: Creating Merit invoice for WooCommerce order #1749 from provided data
2025-03-23 17:20:24 [INFO]: Processing WooCommerce order #1749 to create Merit invoice
2025-03-23 17:20:24 [INFO]: Order details: Currency: EUR, Total: 11.84, Subtotal: undefined, Tax: 2.13
2025-03-23 17:20:24 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:20:24 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:20:24 [INFO]: Calculating pre-tax amount: 7.38 - 1.62 = 5.76
2025-03-23 17:20:24 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 5.76
2025-03-23 17:20:24 [INFO]: Retail component values:
2025-03-23 17:20:24 [INFO]: - Soil (4 x 2.15): 8.60
2025-03-23 17:20:24 [INFO]: - Concentrate (2 x 2.99): 5.98
2025-03-23 17:20:24 [INFO]: - Total retail value: 14.58
2025-03-23 17:20:24 [INFO]: Discount factor: 0.3951 (campaign price / retail price)
2025-03-23 17:20:24 [INFO]: Final component prices (pre-tax):
2025-03-23 17:20:24 [INFO]: - Soil adjusted price: 0.85 (39.5% of retail)
2025-03-23 17:20:24 [INFO]: - Concentrate adjusted price: 1.18 (39.5% of retail)
2025-03-23 17:20:24 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:20:24 [INFO]: - Quantity: 4
2025-03-23 17:20:24 [INFO]: - Unit price: 0.85
2025-03-23 17:20:24 [INFO]: - Total price: 3.40
2025-03-23 17:20:24 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:20:24 [INFO]: - Quantity: 2
2025-03-23 17:20:24 [INFO]: - Unit price: 1.18
2025-03-23 17:20:24 [INFO]: - Total price: 2.36
2025-03-23 17:20:24 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 17:20:24 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 17:20:24 [INFO]: Adjusted discount from 0.82 to 0.64 (removed tax)
2025-03-23 17:20:24 [INFO]: Discount: aednik, Amount=-0.64
2025-03-23 17:20:24 [INFO]: Row total for Toalillemuld 2, 5 l: 0.85 × 4 = 3.40
2025-03-23 17:20:24 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.18 × 2 = 2.36
2025-03-23 17:20:24 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 17:20:24 [INFO]: Row total for Allahindlus (aednik): -0.64 × 1 = -0.64
2025-03-23 17:20:24 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:20:24 [INFO]: - WooCommerce total (expected): 11.84
2025-03-23 17:20:24 [INFO]: - Rows total without VAT: 6.94
2025-03-23 17:20:24 [INFO]: - VAT amount (22%): 1.53
2025-03-23 17:20:24 [INFO]: - Merit calculated total: 8.47
2025-03-23 17:20:24 [INFO]: - Difference: 3.37
2025-03-23 17:20:24 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:20:24 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:20:24 [INFO]: - Target pre-tax total: 9.70
2025-03-23 17:20:24 [INFO]: - Current pre-tax total: 6.94
2025-03-23 17:20:24 [INFO]: - Required pre-tax adjustment: 2.76
2025-03-23 17:20:24 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.85 to 1.54
2025-03-23 17:20:24 [INFO]: - Original item total: 3.40
2025-03-23 17:20:24 [INFO]: - Adjusted item total: 6.16
2025-03-23 17:20:24 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:20:24 [INFO]: - Adjusted rows total without VAT: 9.70
2025-03-23 17:20:24 [INFO]: - Adjusted VAT amount (22%): 2.13
2025-03-23 17:20:24 [INFO]: - Adjusted Merit calculated total: 11.83
2025-03-23 17:20:24 [INFO]: - WooCommerce total (expected): 11.84
2025-03-23 17:20:24 [INFO]: - New difference: 0.010000
2025-03-23 17:20:24 [INFO]: Still detected a small difference of 0.01. Making final micro-adjustment.
2025-03-23 17:20:24 [INFO]: Adjusted tax amount from 2.13 to 2.14 to ensure exact match.
2025-03-23 17:20:24 [INFO]: Final verification: 11.84 should exactly match 11.84
2025-03-23 17:20:24 [INFO]: Final difference: 0.000000
2025-03-23 17:20:24 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:20:24 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152024&signature=bxR9GSjJ%2FPMk7FI78aYfZSnAqXPxqh0Q1afh0KC9AKg%3D
2025-03-23 17:20:25 [INFO]: Next invoice number will be: 1831
2025-03-23 17:20:25 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:20:25 [INFO]: Sending invoice to Merit with 4 line items.
2025-03-23 17:20:25 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:20:25 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:20:25 [INFO]: Added properly structured data for Merit API with forced rounding:
2025-03-23 17:20:25 [INFO]: - TotalAmount: 9.70
2025-03-23 17:20:25 [INFO]: - TaxAmount[0].Amount: 2.13
2025-03-23 17:20:25 [INFO]: - RoundingAmount (forced): 0.05
2025-03-23 17:20:25 [INFO]: - Expected total with VAT and rounding: 14.08
2025-03-23 17:20:25 [INFO]: - WooCommerce total: 11.84
2025-03-23 17:20:25 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:20:25 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152025&signature=XAMz8LP7gKgXKcysWBcb%2Bg24A%2FOlGQCjHTJB3qwBCsk%3D
2025-03-23 17:20:25 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"869a5846-f376-46cb-9e64-551de6ff4e6f","InvoiceNo":"1831","RefNo":"18319","NewCustomer":null}
2025-03-23 17:20:25 [INFO]: Successfully created Merit invoice for WooCommerce order #1749: Invoice number 1831
2025-03-23 17:22:33 [INFO]: Logger initialized
2025-03-23 17:22:33 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:22:33 [INFO]: Automatic synchronization is disabled
2025-03-23 17:22:33 [INFO]: Server running on port 3001
2025-03-23 17:22:33 [INFO]: API-only mode enabled
2025-03-23 17:22:40 [INFO]: Logger initialized
2025-03-23 17:22:40 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:22:40 [INFO]: Automatic synchronization is disabled
2025-03-23 17:22:40 [INFO]: Server running on port 3001
2025-03-23 17:22:40 [INFO]: API-only mode enabled
2025-03-23 17:22:41 [INFO]: Logger initialized
2025-03-23 17:22:42 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:22:42 [INFO]: Automatic synchronization is disabled
2025-03-23 17:22:42 [INFO]: Server running on port 3001
2025-03-23 17:22:42 [INFO]: API-only mode enabled
2025-03-23 17:22:46 [INFO]: Logger initialized
2025-03-23 17:22:46 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:22:46 [INFO]: Automatic synchronization is disabled
2025-03-23 17:22:46 [INFO]: Server running on port 3001
2025-03-23 17:22:46 [INFO]: API-only mode enabled
2025-03-23 17:22:51 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:22:53 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:22:56 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 17:22:56 [INFO]: Using order data from request body for order #1753
2025-03-23 17:22:56 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 17:22:56 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 17:22:56 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 17:22:56 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:22:56 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.37
2025-03-23 17:22:56 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.37, Total=2.74
2025-03-23 17:22:56 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.01
2025-03-23 17:22:56 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.01, Total=2.01
2025-03-23 17:22:56 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 17:22:56 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 17:22:56 [INFO]: Row total for Toalillemuld 2, 5 l: 1.37 × 2 = 2.74
2025-03-23 17:22:56 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.01 × 1 = 2.01
2025-03-23 17:22:56 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 17:22:56 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:22:56 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:22:56 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152256&signature=ZR5KOTkdYHUkSE7R70%2BetzreJV8iBeYvoCG%2B5Sq%2Bhms%3D
2025-03-23 17:22:56 [INFO]: Next invoice number will be: 1828
2025-03-23 17:22:56 [INFO]: Comparing totals:
2025-03-23 17:22:56 [INFO]: - Merit calculated total (rows + VAT): 8.02
2025-03-23 17:22:56 [INFO]: - WooCommerce total: 10.29
2025-03-23 17:22:56 [INFO]: - Difference: 2.27
2025-03-23 17:22:56 [INFO]: Adding RoundingAmount: 2.27 to match WooCommerce total exactly
2025-03-23 17:22:56 [INFO]: Final invoice total: 10.29 (should match WooCommerce: 10.29)
2025-03-23 17:22:56 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:22:56 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152256&signature=OnPrt4nfQGBwcpnRX8PTC1q6HWt5luEy164yrOoPpxQ%3D
2025-03-23 17:22:56 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"6063fc45-8594-4a06-83fb-f1b29d0e2abd","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 17:22:56 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 17:23:20 [INFO]: Logger initialized
2025-03-23 17:23:20 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:23:20 [INFO]: Automatic synchronization is disabled
2025-03-23 17:23:20 [INFO]: Server running on port 3001
2025-03-23 17:23:20 [INFO]: API-only mode enabled
2025-03-23 17:23:41 [INFO]: Logger initialized
2025-03-23 17:23:41 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:23:41 [INFO]: Automatic synchronization is disabled
2025-03-23 17:23:41 [INFO]: Server running on port 3001
2025-03-23 17:23:41 [INFO]: API-only mode enabled
2025-03-23 17:23:45 [INFO]: Logger initialized
2025-03-23 17:23:45 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:23:45 [INFO]: Automatic synchronization is disabled
2025-03-23 17:23:45 [INFO]: Server running on port 3001
2025-03-23 17:23:45 [INFO]: API-only mode enabled
2025-03-23 17:23:54 [INFO]: Logger initialized
2025-03-23 17:23:54 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:23:54 [INFO]: Automatic synchronization is disabled
2025-03-23 17:23:54 [INFO]: Server running on port 3001
2025-03-23 17:23:54 [INFO]: API-only mode enabled
2025-03-23 17:23:59 [INFO]: Logger initialized
2025-03-23 17:23:59 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:23:59 [INFO]: Automatic synchronization is disabled
2025-03-23 17:23:59 [INFO]: Server running on port 3001
2025-03-23 17:23:59 [INFO]: API-only mode enabled
2025-03-23 17:24:06 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 17:24:06 [INFO]: Using order data from request body for order #1753
2025-03-23 17:24:06 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 17:24:06 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 17:24:06 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 17:24:06 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:24:06 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.37
2025-03-23 17:24:06 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.37, Total=2.74
2025-03-23 17:24:06 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.01
2025-03-23 17:24:06 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.01, Total=2.01
2025-03-23 17:24:06 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 17:24:06 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 17:24:06 [INFO]: Row total for Toalillemuld 2, 5 l: 1.37 × 2 = 2.74
2025-03-23 17:24:06 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.01 × 1 = 2.01
2025-03-23 17:24:06 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 17:24:06 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:24:06 [INFO]: - WooCommerce total (expected): 10.29
2025-03-23 17:24:06 [INFO]: - Rows total without VAT: 6.57
2025-03-23 17:24:06 [INFO]: - VAT amount (22%): 1.45
2025-03-23 17:24:06 [INFO]: - Merit calculated total: 8.02
2025-03-23 17:24:06 [INFO]: - Difference: 2.27
2025-03-23 17:24:06 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:24:06 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:24:06 [INFO]: - Target pre-tax total: 8.43
2025-03-23 17:24:06 [INFO]: - Current pre-tax total: 6.57
2025-03-23 17:24:06 [INFO]: - Required pre-tax adjustment: 1.86
2025-03-23 17:24:06 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 1.37 to 2.30
2025-03-23 17:24:06 [INFO]: - Original item total: 2.74
2025-03-23 17:24:06 [INFO]: - Adjusted item total: 4.60
2025-03-23 17:24:06 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:24:06 [INFO]: - Adjusted rows total without VAT: 8.43
2025-03-23 17:24:06 [INFO]: - Adjusted VAT amount (22%): 1.85
2025-03-23 17:24:06 [INFO]: - Adjusted Merit calculated total: 10.28
2025-03-23 17:24:06 [INFO]: - WooCommerce total (expected): 10.29
2025-03-23 17:24:06 [INFO]: - New difference: 0.010000
2025-03-23 17:24:06 [INFO]: Still detected a small difference of 0.01. Making final micro-adjustment.
2025-03-23 17:24:06 [INFO]: Adjusted tax amount from 1.85 to 1.86 to ensure exact match.
2025-03-23 17:24:06 [INFO]: Final verification: 10.29 should exactly match 10.29
2025-03-23 17:24:06 [INFO]: Final difference: 0.000000
2025-03-23 17:24:06 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:24:06 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152406&signature=ox2lfXeW73fIX4PaOqvn712w4h1T74epwXD5geULAps%3D
2025-03-23 17:24:07 [INFO]: Next invoice number will be: 1828
2025-03-23 17:24:07 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:24:07 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:24:07 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:24:07 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:24:07 [INFO]: Added properly structured data for Merit API with forced rounding:
2025-03-23 17:24:07 [INFO]: - TotalAmount: 8.43
2025-03-23 17:24:07 [INFO]: - TaxAmount[0].Amount: 1.85
2025-03-23 17:24:07 [INFO]: - RoundingAmount (forced): 0.05
2025-03-23 17:24:07 [INFO]: - Expected total with VAT and rounding: 12.81
2025-03-23 17:24:07 [INFO]: - WooCommerce total: 10.29
2025-03-23 17:24:07 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:24:07 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152407&signature=ryPbxhfJsVRzPTk%2BVkWyhvBodvIjD%2BvxuqueC46ZymE%3D
2025-03-23 17:24:07 [ERROR]: Merit API request failed: Request failed with status code 400
2025-03-23 17:24:07 [ERROR]: API response status: 400
2025-03-23 17:24:07 [ERROR]: API response data: {"Message":"Cannot convert null to a value type."}
2025-03-23 17:24:07 [ERROR]: Error creating invoice in Merit Aktiva: Request failed with status code 400
2025-03-23 17:24:07 [ERROR]: Invoice data that caused error: InvoiceNo=1828, Total=8.43, Rows=3
2025-03-23 17:24:07 [ERROR]: Invoice rows total: 8.43, Invoice total: 8.43
2025-03-23 17:24:07 [ERROR]: API error details: {"Message":"Cannot convert null to a value type."}
2025-03-23 17:24:07 [ERROR]: Failed to create invoice from WooCommerce order: Request failed with status code 400
2025-03-23 17:24:07 [ERROR]: Error creating invoice for order: Request failed with status code 400
2025-03-23 17:24:07 [ERROR]: Stack trace: AxiosError: Request failed with status code 400
    at settle (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:2031:12)
    at IncomingMessage.handleStreamEnd (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:3148:11)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/node_modules/axios/dist/node/axios.cjs:4258:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MeritService.makeRequest (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:49:24)
    at async MeritService.createInvoice (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:106:24)
    at async MeritService.createInvoiceFromWooCommerceOrder (/Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/services/merit.js:1028:14)
    at async /Users/jonas/Documents/ussimo-bills/ussimo-bills/montonio-merit-middleware/src/routes/woocommerce.js:183:23
2025-03-23 17:24:07 [ERROR]: API response data: {"Message":"Cannot convert null to a value type."}
2025-03-23 17:24:26 [INFO]: Logger initialized
2025-03-23 17:24:26 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:24:26 [INFO]: Automatic synchronization is disabled
2025-03-23 17:24:26 [INFO]: Server running on port 3001
2025-03-23 17:24:26 [INFO]: API-only mode enabled
2025-03-23 17:27:57 [INFO]: Logger initialized
2025-03-23 17:27:57 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:27:57 [INFO]: Automatic synchronization is disabled
2025-03-23 17:27:57 [INFO]: Server running on port 3001
2025-03-23 17:27:57 [INFO]: API-only mode enabled
2025-03-23 17:27:58 [INFO]: Logger initialized
2025-03-23 17:27:58 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:27:59 [INFO]: Automatic synchronization is disabled
2025-03-23 17:27:59 [INFO]: Server running on port 3001
2025-03-23 17:27:59 [INFO]: API-only mode enabled
2025-03-23 17:28:00 [INFO]: Logger initialized
2025-03-23 17:28:00 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:28:00 [INFO]: Automatic synchronization is disabled
2025-03-23 17:28:00 [INFO]: Server running on port 3001
2025-03-23 17:28:00 [INFO]: API-only mode enabled
2025-03-23 17:28:02 [INFO]: Logger initialized
2025-03-23 17:28:02 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:28:02 [INFO]: Automatic synchronization is disabled
2025-03-23 17:28:02 [INFO]: Server running on port 3001
2025-03-23 17:28:02 [INFO]: API-only mode enabled
2025-03-23 17:28:06 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 17:28:06 [INFO]: Using order data from request body for order #1753
2025-03-23 17:28:06 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 17:28:06 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 17:28:06 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 17:28:06 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:28:06 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.37
2025-03-23 17:28:06 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.37, Total=2.74
2025-03-23 17:28:06 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.01
2025-03-23 17:28:06 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.01, Total=2.01
2025-03-23 17:28:06 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 17:28:06 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 17:28:06 [INFO]: Row total for Toalillemuld 2, 5 l: 1.37 × 2 = 2.74
2025-03-23 17:28:06 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.01 × 1 = 2.01
2025-03-23 17:28:06 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 17:28:06 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:28:06 [INFO]: - WooCommerce total (expected): 10.29
2025-03-23 17:28:06 [INFO]: - Rows total without VAT: 6.57
2025-03-23 17:28:06 [INFO]: - VAT amount (22%): 1.45
2025-03-23 17:28:06 [INFO]: - Merit calculated total: 8.02
2025-03-23 17:28:06 [INFO]: - Difference: 2.27
2025-03-23 17:28:06 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:28:06 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:28:06 [INFO]: - Target pre-tax total: 8.43
2025-03-23 17:28:06 [INFO]: - Current pre-tax total: 6.57
2025-03-23 17:28:06 [INFO]: - Required pre-tax adjustment: 1.86
2025-03-23 17:28:06 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 1.37 to 2.30
2025-03-23 17:28:06 [INFO]: - Original item total: 2.74
2025-03-23 17:28:06 [INFO]: - Adjusted item total: 4.60
2025-03-23 17:28:06 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:28:06 [INFO]: - Adjusted rows total without VAT: 8.43
2025-03-23 17:28:06 [INFO]: - Adjusted VAT amount (22%): 1.85
2025-03-23 17:28:06 [INFO]: - Adjusted Merit calculated total: 10.28
2025-03-23 17:28:06 [INFO]: - WooCommerce total (expected): 10.29
2025-03-23 17:28:06 [INFO]: - New difference: 0.010000
2025-03-23 17:28:06 [INFO]: Still detected a small difference of 0.01. Making final micro-adjustment.
2025-03-23 17:28:06 [INFO]: Adjusted tax amount from 1.85 to 1.86 to ensure exact match.
2025-03-23 17:28:06 [INFO]: Final verification: 10.29 should exactly match 10.29
2025-03-23 17:28:06 [INFO]: Final difference: 0.000000
2025-03-23 17:28:06 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:28:06 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152806&signature=jSuINmhmpAB%2FkTmiN9n4r2TOlLI42t3NuekRb3yasuo%3D
2025-03-23 17:28:07 [INFO]: Next invoice number will be: 1828
2025-03-23 17:28:07 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:28:07 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:28:07 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:28:07 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:28:07 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:28:07 [INFO]: - WooCommerce total: 10.29
2025-03-23 17:28:07 [INFO]: - Merit calculated total before rounding: 10.28
2025-03-23 17:28:07 [INFO]: - Required rounding adjustment: 0.01
2025-03-23 17:28:07 [INFO]: Added properly structured data for Merit API with dynamic rounding:
2025-03-23 17:28:07 [INFO]: - TotalAmount: 8.43
2025-03-23 17:28:07 [INFO]: - TaxAmount[0].Amount: 1.85
2025-03-23 17:28:07 [INFO]: - RoundingAmount (dynamic): 0.01
2025-03-23 17:28:07 [INFO]: - Expected total with VAT and rounding: 10.29
2025-03-23 17:28:07 [INFO]: - WooCommerce total: 10.29
2025-03-23 17:28:07 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:28:07 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152807&signature=wozMRnW%2FD2gMDRQlmo%2BmMUMYs%2Frh88OfurkOFia7M%2BE%3D
2025-03-23 17:28:07 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"0de6ee61-68a7-4ba0-bcc2-3910d81eeae3","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 17:28:07 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1828
2025-03-23 17:28:16 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:28:17 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:28:20 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 17:28:20 [INFO]: Using order data from request body for order #1751
2025-03-23 17:28:20 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 17:28:20 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 17:28:20 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 17:28:20 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:28:20 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:28:20 [INFO]: Calculating pre-tax amount: 14.75 - 3.25 = 11.5
2025-03-23 17:28:20 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 11.50
2025-03-23 17:28:20 [INFO]: Retail component values:
2025-03-23 17:28:20 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 17:28:20 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 17:28:20 [INFO]: - Total retail value: 29.16
2025-03-23 17:28:20 [INFO]: Discount factor: 0.3944 (campaign price / retail price)
2025-03-23 17:28:20 [INFO]: Fine-tuned prices to match total exactly. Difference: -0.02
2025-03-23 17:28:20 [INFO]: Final total check: 11.52 (should equal 11.50)
2025-03-23 17:28:20 [INFO]: Final component prices (pre-tax):
2025-03-23 17:28:20 [INFO]: - Soil adjusted price: 0.85 (39.5% of retail)
2025-03-23 17:28:20 [INFO]: - Concentrate adjusted price: 1.18 (39.5% of retail)
2025-03-23 17:28:20 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:28:20 [INFO]: - Quantity: 8
2025-03-23 17:28:20 [INFO]: - Unit price: 0.85
2025-03-23 17:28:20 [INFO]: - Total price: 6.80
2025-03-23 17:28:20 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:28:20 [INFO]: - Quantity: 4
2025-03-23 17:28:20 [INFO]: - Unit price: 1.18
2025-03-23 17:28:20 [INFO]: - Total price: 4.72
2025-03-23 17:28:20 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 17:28:20 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 17:28:20 [INFO]: Adjusted discount from 1.64 to 1.28 (removed tax)
2025-03-23 17:28:20 [INFO]: Discount: aednik, Amount=-1.28
2025-03-23 17:28:20 [INFO]: Row total for Toalillemuld 2, 5 l: 0.85 × 8 = 6.80
2025-03-23 17:28:20 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.18 × 4 = 4.72
2025-03-23 17:28:20 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 17:28:20 [INFO]: Row total for Allahindlus (aednik): -1.28 × 1 = -1.28
2025-03-23 17:28:20 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:28:20 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 17:28:20 [INFO]: - Rows total without VAT: 12.06
2025-03-23 17:28:20 [INFO]: - VAT amount (22%): 2.65
2025-03-23 17:28:20 [INFO]: - Merit calculated total: 14.71
2025-03-23 17:28:20 [INFO]: - Difference: 6.13
2025-03-23 17:28:20 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:28:20 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:28:20 [INFO]: - Target pre-tax total: 17.08
2025-03-23 17:28:20 [INFO]: - Current pre-tax total: 12.06
2025-03-23 17:28:20 [INFO]: - Required pre-tax adjustment: 5.02
2025-03-23 17:28:20 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.85 to 1.48
2025-03-23 17:28:20 [INFO]: - Original item total: 6.80
2025-03-23 17:28:20 [INFO]: - Adjusted item total: 11.82
2025-03-23 17:28:20 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:28:20 [INFO]: - Adjusted rows total without VAT: 17.10
2025-03-23 17:28:20 [INFO]: - Adjusted VAT amount (22%): 3.76
2025-03-23 17:28:20 [INFO]: - Adjusted Merit calculated total: 20.86
2025-03-23 17:28:20 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 17:28:20 [INFO]: - New difference: -0.020000
2025-03-23 17:28:20 [INFO]: Still detected a small difference of -0.02. Making final micro-adjustment.
2025-03-23 17:28:20 [INFO]: Adjusted tax amount from 3.76 to 3.74 to ensure exact match.
2025-03-23 17:28:20 [INFO]: Final verification: 20.84 should exactly match 20.84
2025-03-23 17:28:20 [INFO]: Final difference: 0.000000
2025-03-23 17:28:20 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:28:20 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152820&signature=OcfmthNJ1pFyi7CUa5RON984YIggRJoQGqVCsh%2FM9ZI%3D
2025-03-23 17:28:20 [INFO]: Next invoice number will be: 1829
2025-03-23 17:28:20 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:28:20 [INFO]: Sending invoice to Merit with 4 line items.
2025-03-23 17:28:20 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:28:20 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:28:20 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:28:20 [INFO]: - WooCommerce total: 20.84
2025-03-23 17:28:20 [INFO]: - Merit calculated total before rounding: 20.86
2025-03-23 17:28:20 [INFO]: - Required rounding adjustment: -0.02
2025-03-23 17:28:20 [INFO]: Added properly structured data for Merit API with dynamic rounding:
2025-03-23 17:28:20 [INFO]: - TotalAmount: 17.10
2025-03-23 17:28:20 [INFO]: - TaxAmount[0].Amount: 3.76
2025-03-23 17:28:20 [INFO]: - RoundingAmount (dynamic): -0.02
2025-03-23 17:28:20 [INFO]: - Expected total with VAT and rounding: 20.84
2025-03-23 17:28:20 [INFO]: - WooCommerce total: 20.84
2025-03-23 17:28:20 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:28:20 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152820&signature=ZWnUDjaK11L5i0E9rdu5DF9UoZDA3lCgccX%2FthSKnGQ%3D
2025-03-23 17:28:21 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"f8e6ffe8-3287-4ff0-affa-7d6c4f72ace4","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 17:28:21 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1829
2025-03-23 17:28:28 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:28:30 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:28:33 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:28:33 [INFO]: Using order data from request body for order #1750
2025-03-23 17:28:33 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:28:33 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:28:33 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:28:33 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:28:33 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:28:33 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:28:33 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:28:33 [INFO]: Retail component values:
2025-03-23 17:28:33 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:28:33 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:28:33 [INFO]: - Total retail value: 43.74
2025-03-23 17:28:33 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:28:33 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:28:33 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:28:33 [INFO]: Final component prices (pre-tax):
2025-03-23 17:28:33 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:28:33 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:28:33 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:28:33 [INFO]: - Quantity: 12
2025-03-23 17:28:33 [INFO]: - Unit price: 0.75
2025-03-23 17:28:33 [INFO]: - Total price: 9.00
2025-03-23 17:28:33 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:28:33 [INFO]: - Quantity: 6
2025-03-23 17:28:33 [INFO]: - Unit price: 1.05
2025-03-23 17:28:33 [INFO]: - Total price: 6.30
2025-03-23 17:28:33 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:28:33 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:28:33 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:28:33 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:28:33 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:28:33 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:28:33 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:28:33 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:28:33 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:28:33 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:28:33 [INFO]: - Difference: 10.02
2025-03-23 17:28:33 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:28:33 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:28:33 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:28:33 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:28:33 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:28:33 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:28:33 [INFO]: - Original item total: 9.00
2025-03-23 17:28:33 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:28:33 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:28:33 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:28:33 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:28:33 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:28:33 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:28:33 [INFO]: - New difference: 0.060000
2025-03-23 17:28:33 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:28:33 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:28:33 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:28:33 [INFO]: Final difference: 0.000000
2025-03-23 17:28:33 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:28:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152833&signature=Vvc2891NliOcdtbFSTydCzHnrdwBaC5OKMfab6uzvHc%3D
2025-03-23 17:28:35 [INFO]: Next invoice number will be: 1830
2025-03-23 17:28:35 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:28:35 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:28:35 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:28:35 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:28:35 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:28:35 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:28:35 [INFO]: - Merit calculated total before rounding: 23.94
2025-03-23 17:28:35 [INFO]: - Required rounding adjustment: 0.06
2025-03-23 17:28:35 [INFO]: Added properly structured data for Merit API with dynamic rounding:
2025-03-23 17:28:35 [INFO]: - TotalAmount: 19.62
2025-03-23 17:28:35 [INFO]: - TaxAmount[0].Amount: 4.32
2025-03-23 17:28:35 [INFO]: - RoundingAmount (dynamic): 0.06
2025-03-23 17:28:35 [INFO]: - Expected total with VAT and rounding: 24.00
2025-03-23 17:28:35 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:28:35 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:28:35 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323152835&signature=1eVlCkWaD1vHPpYDA84aPId%2F8O%2FnDYhJj4plfH%2BVkCY%3D
2025-03-23 17:28:35 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"07e7b314-61d1-4746-88e5-aa8915324699","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:28:35 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1830
2025-03-23 17:31:26 [INFO]: Logger initialized
2025-03-23 17:31:27 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:31:27 [INFO]: Automatic synchronization is disabled
2025-03-23 17:31:27 [INFO]: Server running on port 3001
2025-03-23 17:31:27 [INFO]: API-only mode enabled
2025-03-23 17:31:31 [INFO]: Logger initialized
2025-03-23 17:31:32 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:31:32 [INFO]: Automatic synchronization is disabled
2025-03-23 17:31:32 [INFO]: Server running on port 3001
2025-03-23 17:31:32 [INFO]: API-only mode enabled
2025-03-23 17:31:34 [INFO]: Logger initialized
2025-03-23 17:31:34 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:31:34 [INFO]: Automatic synchronization is disabled
2025-03-23 17:31:34 [INFO]: Server running on port 3001
2025-03-23 17:31:34 [INFO]: API-only mode enabled
2025-03-23 17:31:56 [INFO]: Manually creating invoice for WooCommerce order #1750
2025-03-23 17:31:56 [INFO]: Using order data from request body for order #1750
2025-03-23 17:31:56 [INFO]: Creating Merit invoice for WooCommerce order #1750 from provided data
2025-03-23 17:31:56 [INFO]: Processing WooCommerce order #1750 to create Merit invoice
2025-03-23 17:31:56 [INFO]: Order details: Currency: EUR, Total: 24.00, Subtotal: undefined, Tax: 4.33
2025-03-23 17:31:56 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:31:56 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:31:56 [INFO]: Calculating pre-tax amount: 19.67 - 4.33 = 15.34
2025-03-23 17:31:56 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 15.34
2025-03-23 17:31:56 [INFO]: Retail component values:
2025-03-23 17:31:56 [INFO]: - Soil (12 x 2.15): 25.80
2025-03-23 17:31:56 [INFO]: - Concentrate (6 x 2.99): 17.94
2025-03-23 17:31:56 [INFO]: - Total retail value: 43.74
2025-03-23 17:31:56 [INFO]: Discount factor: 0.3507 (campaign price / retail price)
2025-03-23 17:31:56 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.04
2025-03-23 17:31:56 [INFO]: Final total check: 15.30 (should equal 15.34)
2025-03-23 17:31:56 [INFO]: Final component prices (pre-tax):
2025-03-23 17:31:56 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:31:56 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:31:56 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:31:56 [INFO]: - Quantity: 12
2025-03-23 17:31:56 [INFO]: - Unit price: 0.75
2025-03-23 17:31:56 [INFO]: - Total price: 9.00
2025-03-23 17:31:56 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:31:56 [INFO]: - Quantity: 6
2025-03-23 17:31:56 [INFO]: - Unit price: 1.05
2025-03-23 17:31:56 [INFO]: - Total price: 6.30
2025-03-23 17:31:56 [INFO]: Adjusted discount from 4.92 to 3.84 (removed tax)
2025-03-23 17:31:56 [INFO]: Discount: seemned20, Amount=-3.84
2025-03-23 17:31:56 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 12 = 9.00
2025-03-23 17:31:56 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 6 = 6.30
2025-03-23 17:31:56 [INFO]: Row total for Allahindlus (seemned20): -3.84 × 1 = -3.84
2025-03-23 17:31:56 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:31:56 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:31:56 [INFO]: - Rows total without VAT: 11.46
2025-03-23 17:31:56 [INFO]: - VAT amount (22%): 2.52
2025-03-23 17:31:56 [INFO]: - Merit calculated total: 13.98
2025-03-23 17:31:56 [INFO]: - Difference: 10.02
2025-03-23 17:31:56 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:31:56 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:31:56 [INFO]: - Target pre-tax total: 19.67
2025-03-23 17:31:56 [INFO]: - Current pre-tax total: 11.46
2025-03-23 17:31:56 [INFO]: - Required pre-tax adjustment: 8.21
2025-03-23 17:31:56 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.75 to 1.43
2025-03-23 17:31:56 [INFO]: - Original item total: 9.00
2025-03-23 17:31:56 [INFO]: - Adjusted item total: 17.21
2025-03-23 17:31:56 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:31:56 [INFO]: - Adjusted rows total without VAT: 19.62
2025-03-23 17:31:56 [INFO]: - Adjusted VAT amount (22%): 4.32
2025-03-23 17:31:56 [INFO]: - Adjusted Merit calculated total: 23.94
2025-03-23 17:31:56 [INFO]: - WooCommerce total (expected): 24.00
2025-03-23 17:31:56 [INFO]: - New difference: 0.060000
2025-03-23 17:31:56 [INFO]: Still detected a small difference of 0.06. Making final micro-adjustment.
2025-03-23 17:31:56 [INFO]: Adjusted tax amount from 4.32 to 4.38 to ensure exact match.
2025-03-23 17:31:56 [INFO]: Final verification: 24.00 should exactly match 24.00
2025-03-23 17:31:56 [INFO]: Final difference: 0.000000
2025-03-23 17:31:56 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:31:56 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153156&signature=Y1neil%2ByzV6wnSB6yGgdrM0K5Q6BVZAtGCfGlhuIAaM%3D
2025-03-23 17:31:57 [INFO]: Next invoice number will be: 1828
2025-03-23 17:31:57 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:31:57 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:31:57 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:31:57 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:31:57 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:31:57 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:31:57 [INFO]: - Merit calculated total before rounding: 23.94
2025-03-23 17:31:57 [INFO]: - Initial rounding adjustment: 0.06
2025-03-23 17:31:57 [INFO]: - Our calculated tax amount: 4.32
2025-03-23 17:31:57 [INFO]: - Predicted Merit tax calculation: 4.33
2025-03-23 17:31:57 [INFO]: - Tax calculation difference: 0.01
2025-03-23 17:31:57 [INFO]: - Final adjusted rounding amount: 0.05
2025-03-23 17:31:57 [INFO]: Added properly structured data for Merit API with compensated rounding:
2025-03-23 17:31:57 [INFO]: - TotalAmount: 19.62
2025-03-23 17:31:57 [INFO]: - TaxAmount[0].Amount: 4.32
2025-03-23 17:31:57 [INFO]: - RoundingAmount (adjusted): 0.05
2025-03-23 17:31:57 [INFO]: - Predicted Merit total after tax recalculation: 24.00
2025-03-23 17:31:57 [INFO]: - WooCommerce total: 24.00
2025-03-23 17:31:57 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:31:57 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153157&signature=kcs77UwtGHtIh%2BZ4geXSPbMYfnUlxrH4tAvyfROVNOw%3D
2025-03-23 17:31:57 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"69711bfb-70a5-4a99-9fd8-c4b9765d9e74","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 17:31:57 [INFO]: Successfully created Merit invoice for WooCommerce order #1750: Invoice number 1828
2025-03-23 17:32:07 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:32:09 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:32:11 [INFO]: Manually creating invoice for WooCommerce order #1753
2025-03-23 17:32:11 [INFO]: Using order data from request body for order #1753
2025-03-23 17:32:11 [INFO]: Creating Merit invoice for WooCommerce order #1753 from provided data
2025-03-23 17:32:11 [INFO]: Processing WooCommerce order #1753 to create Merit invoice
2025-03-23 17:32:11 [INFO]: Order details: Currency: EUR, Total: 10.29, Subtotal: undefined, Tax: 1.86
2025-03-23 17:32:11 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:32:11 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.762295, Calculated price: 1.37
2025-03-23 17:32:11 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=2, Price=1.37, Total=2.74
2025-03-23 17:32:11 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.581967, Calculated price: 2.01
2025-03-23 17:32:11 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.01, Total=2.01
2025-03-23 17:32:11 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 17:32:11 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 17:32:11 [INFO]: Row total for Toalillemuld 2, 5 l: 1.37 × 2 = 2.74
2025-03-23 17:32:11 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.01 × 1 = 2.01
2025-03-23 17:32:11 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 17:32:11 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:32:11 [INFO]: - WooCommerce total (expected): 10.29
2025-03-23 17:32:11 [INFO]: - Rows total without VAT: 6.57
2025-03-23 17:32:11 [INFO]: - VAT amount (22%): 1.45
2025-03-23 17:32:11 [INFO]: - Merit calculated total: 8.02
2025-03-23 17:32:11 [INFO]: - Difference: 2.27
2025-03-23 17:32:11 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:32:11 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:32:11 [INFO]: - Target pre-tax total: 8.43
2025-03-23 17:32:11 [INFO]: - Current pre-tax total: 6.57
2025-03-23 17:32:11 [INFO]: - Required pre-tax adjustment: 1.86
2025-03-23 17:32:11 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 1.37 to 2.30
2025-03-23 17:32:11 [INFO]: - Original item total: 2.74
2025-03-23 17:32:11 [INFO]: - Adjusted item total: 4.60
2025-03-23 17:32:11 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:32:11 [INFO]: - Adjusted rows total without VAT: 8.43
2025-03-23 17:32:11 [INFO]: - Adjusted VAT amount (22%): 1.85
2025-03-23 17:32:11 [INFO]: - Adjusted Merit calculated total: 10.28
2025-03-23 17:32:11 [INFO]: - WooCommerce total (expected): 10.29
2025-03-23 17:32:11 [INFO]: - New difference: 0.010000
2025-03-23 17:32:11 [INFO]: Still detected a small difference of 0.01. Making final micro-adjustment.
2025-03-23 17:32:11 [INFO]: Adjusted tax amount from 1.85 to 1.86 to ensure exact match.
2025-03-23 17:32:11 [INFO]: Final verification: 10.29 should exactly match 10.29
2025-03-23 17:32:11 [INFO]: Final difference: 0.000000
2025-03-23 17:32:11 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:32:11 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153211&signature=kxiPKwVzwTpFy3a%2B3YsNS4ovivZT7iCxQTWwCG74e0k%3D
2025-03-23 17:32:12 [INFO]: Next invoice number will be: 1829
2025-03-23 17:32:12 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:32:12 [INFO]: Sending invoice to Merit with 3 line items.
2025-03-23 17:32:12 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:32:12 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:32:12 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:32:12 [INFO]: - WooCommerce total: 10.29
2025-03-23 17:32:12 [INFO]: - Merit calculated total before rounding: 10.28
2025-03-23 17:32:12 [INFO]: - Initial rounding adjustment: 0.01
2025-03-23 17:32:12 [INFO]: - Our calculated tax amount: 1.85
2025-03-23 17:32:12 [INFO]: - Predicted Merit tax calculation: 1.85
2025-03-23 17:32:12 [INFO]: - Tax calculation difference: 0.00
2025-03-23 17:32:12 [INFO]: - Final adjusted rounding amount: 0.01
2025-03-23 17:32:12 [INFO]: Added properly structured data for Merit API with compensated rounding:
2025-03-23 17:32:12 [INFO]: - TotalAmount: 8.43
2025-03-23 17:32:12 [INFO]: - TaxAmount[0].Amount: 1.85
2025-03-23 17:32:12 [INFO]: - RoundingAmount (adjusted): 0.01
2025-03-23 17:32:12 [INFO]: - Predicted Merit total after tax recalculation: 10.29
2025-03-23 17:32:12 [INFO]: - WooCommerce total: 10.29
2025-03-23 17:32:12 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:32:12 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153212&signature=m4LDp4UCoO7m1NJYT1GJYZCqaDn31iTahCYDt8Qn1DA%3D
2025-03-23 17:32:12 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"59e3f04b-05aa-48fe-bca7-9ca98bd6e3e6","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 17:32:12 [INFO]: Successfully created Merit invoice for WooCommerce order #1753: Invoice number 1829
2025-03-23 17:32:23 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:32:25 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:32:33 [INFO]: Manually creating invoice for WooCommerce order #1751
2025-03-23 17:32:33 [INFO]: Using order data from request body for order #1751
2025-03-23 17:32:33 [INFO]: Creating Merit invoice for WooCommerce order #1751 from provided data
2025-03-23 17:32:33 [INFO]: Processing WooCommerce order #1751 to create Merit invoice
2025-03-23 17:32:33 [INFO]: Order details: Currency: EUR, Total: 20.84, Subtotal: undefined, Tax: 3.76
2025-03-23 17:32:33 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:32:33 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:32:33 [INFO]: Calculating pre-tax amount: 14.75 - 3.25 = 11.5
2025-03-23 17:32:33 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 11.50
2025-03-23 17:32:33 [INFO]: Retail component values:
2025-03-23 17:32:33 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 17:32:33 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 17:32:33 [INFO]: - Total retail value: 29.16
2025-03-23 17:32:33 [INFO]: Discount factor: 0.3944 (campaign price / retail price)
2025-03-23 17:32:33 [INFO]: Fine-tuned prices to match total exactly. Difference: -0.02
2025-03-23 17:32:33 [INFO]: Final total check: 11.52 (should equal 11.50)
2025-03-23 17:32:33 [INFO]: Final component prices (pre-tax):
2025-03-23 17:32:33 [INFO]: - Soil adjusted price: 0.85 (39.5% of retail)
2025-03-23 17:32:33 [INFO]: - Concentrate adjusted price: 1.18 (39.5% of retail)
2025-03-23 17:32:33 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:32:33 [INFO]: - Quantity: 8
2025-03-23 17:32:33 [INFO]: - Unit price: 0.85
2025-03-23 17:32:33 [INFO]: - Total price: 6.80
2025-03-23 17:32:33 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:32:33 [INFO]: - Quantity: 4
2025-03-23 17:32:33 [INFO]: - Unit price: 1.18
2025-03-23 17:32:33 [INFO]: - Total price: 4.72
2025-03-23 17:32:33 [INFO]: Adjusted shipping price from 2.33 to 1.82 (removed tax)
2025-03-23 17:32:33 [INFO]: Shipping: Transport Pakiautomaat, Price=1.82
2025-03-23 17:32:33 [INFO]: Adjusted discount from 1.64 to 1.28 (removed tax)
2025-03-23 17:32:33 [INFO]: Discount: aednik, Amount=-1.28
2025-03-23 17:32:33 [INFO]: Row total for Toalillemuld 2, 5 l: 0.85 × 8 = 6.80
2025-03-23 17:32:33 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.18 × 4 = 4.72
2025-03-23 17:32:33 [INFO]: Row total for Pakiautomaat: 1.82 × 1 = 1.82
2025-03-23 17:32:33 [INFO]: Row total for Allahindlus (aednik): -1.28 × 1 = -1.28
2025-03-23 17:32:33 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:32:33 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 17:32:33 [INFO]: - Rows total without VAT: 12.06
2025-03-23 17:32:33 [INFO]: - VAT amount (22%): 2.65
2025-03-23 17:32:33 [INFO]: - Merit calculated total: 14.71
2025-03-23 17:32:33 [INFO]: - Difference: 6.13
2025-03-23 17:32:33 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:32:33 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:32:33 [INFO]: - Target pre-tax total: 17.08
2025-03-23 17:32:33 [INFO]: - Current pre-tax total: 12.06
2025-03-23 17:32:33 [INFO]: - Required pre-tax adjustment: 5.02
2025-03-23 17:32:33 [INFO]: Adjusting price of item "Toalillemuld 2, 5 l" from 0.85 to 1.48
2025-03-23 17:32:33 [INFO]: - Original item total: 6.80
2025-03-23 17:32:33 [INFO]: - Adjusted item total: 11.82
2025-03-23 17:32:33 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:32:33 [INFO]: - Adjusted rows total without VAT: 17.10
2025-03-23 17:32:33 [INFO]: - Adjusted VAT amount (22%): 3.76
2025-03-23 17:32:33 [INFO]: - Adjusted Merit calculated total: 20.86
2025-03-23 17:32:33 [INFO]: - WooCommerce total (expected): 20.84
2025-03-23 17:32:33 [INFO]: - New difference: -0.020000
2025-03-23 17:32:33 [INFO]: Still detected a small difference of -0.02. Making final micro-adjustment.
2025-03-23 17:32:33 [INFO]: Adjusted tax amount from 3.76 to 3.74 to ensure exact match.
2025-03-23 17:32:33 [INFO]: Final verification: 20.84 should exactly match 20.84
2025-03-23 17:32:33 [INFO]: Final difference: 0.000000
2025-03-23 17:32:33 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:32:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153233&signature=Vt5sdKd9NHpHnnu52lFEjtxj6P9l%2F4UwwKQcYOenkwY%3D
2025-03-23 17:32:33 [INFO]: Next invoice number will be: 1830
2025-03-23 17:32:33 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:32:33 [INFO]: Sending invoice to Merit with 4 line items.
2025-03-23 17:32:33 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:32:33 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:32:33 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:32:33 [INFO]: - WooCommerce total: 20.84
2025-03-23 17:32:33 [INFO]: - Merit calculated total before rounding: 20.86
2025-03-23 17:32:33 [INFO]: - Initial rounding adjustment: -0.02
2025-03-23 17:32:33 [INFO]: - Our calculated tax amount: 3.76
2025-03-23 17:32:33 [INFO]: - Predicted Merit tax calculation: 3.76
2025-03-23 17:32:33 [INFO]: - Tax calculation difference: 0.00
2025-03-23 17:32:33 [INFO]: - Final adjusted rounding amount: -0.02
2025-03-23 17:32:33 [INFO]: Added properly structured data for Merit API with compensated rounding:
2025-03-23 17:32:33 [INFO]: - TotalAmount: 17.10
2025-03-23 17:32:33 [INFO]: - TaxAmount[0].Amount: 3.76
2025-03-23 17:32:33 [INFO]: - RoundingAmount (adjusted): -0.02
2025-03-23 17:32:33 [INFO]: - Predicted Merit total after tax recalculation: 20.84
2025-03-23 17:32:33 [INFO]: - WooCommerce total: 20.84
2025-03-23 17:32:33 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:32:33 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153233&signature=cCMR4NsFm%2FlUePi9NqwkH7WhfxTLDavR9py5mslu47M%3D
2025-03-23 17:32:34 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"e928ec68-c009-4ab8-8b95-16daded02a6d","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:32:34 [INFO]: Successfully created Merit invoice for WooCommerce order #1751: Invoice number 1830
2025-03-23 17:32:59 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:33:00 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:33:27 [INFO]: Manually creating invoice for WooCommerce order #1739
2025-03-23 17:33:27 [INFO]: Using order data from request body for order #1739
2025-03-23 17:33:27 [INFO]: Creating Merit invoice for WooCommerce order #1739 from provided data
2025-03-23 17:33:27 [INFO]: Processing WooCommerce order #1739 to create Merit invoice
2025-03-23 17:33:27 [INFO]: Order details: Currency: EUR, Total: 51.78, Subtotal: undefined, Tax: 9.32
2025-03-23 17:33:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:33:27 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:33:27 [INFO]: Calculating pre-tax amount: 13.11 - 2.89 = 10.22
2025-03-23 17:33:27 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 10.22
2025-03-23 17:33:27 [INFO]: Retail component values:
2025-03-23 17:33:27 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 17:33:27 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 17:33:27 [INFO]: - Total retail value: 29.16
2025-03-23 17:33:27 [INFO]: Discount factor: 0.3505 (campaign price / retail price)
2025-03-23 17:33:27 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.02
2025-03-23 17:33:27 [INFO]: Final total check: 10.20 (should equal 10.22)
2025-03-23 17:33:27 [INFO]: Final component prices (pre-tax):
2025-03-23 17:33:27 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:33:27 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:33:27 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:33:27 [INFO]: - Quantity: 8
2025-03-23 17:33:27 [INFO]: - Unit price: 0.75
2025-03-23 17:33:27 [INFO]: - Total price: 6.00
2025-03-23 17:33:27 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:33:27 [INFO]: - Quantity: 4
2025-03-23 17:33:27 [INFO]: - Unit price: 1.05
2025-03-23 17:33:27 [INFO]: - Total price: 4.20
2025-03-23 17:33:27 [INFO]: Item: Biohuumus Universaalne Maheväetis 5l, Original price: 3.0491805, Calculated price: 2.97
2025-03-23 17:33:27 [INFO]: Line item: Code=384, Name=Biohuumus Universaalne Maheväetis 5l, Quantity=2, Price=2.97, Total=5.94
2025-03-23 17:33:27 [INFO]: Item: Ettekasvatussegu biohuumusega, Original price: 2.42213125, Calculated price: 2.37
2025-03-23 17:33:27 [INFO]: Line item: Code=4744278011011, Name=Ettekasvatussegu biohuumusega 5 l, Quantity=4, Price=2.37, Total=9.48
2025-03-23 17:33:27 [INFO]: Item: Biohuumuse kontsentraat lilledele, Original price: 1.967213, Calculated price: 1.91
2025-03-23 17:33:27 [INFO]: Line item: Code=4742022540022, Name=Biohuumuse kontsentraat Lilledele, 500ml, Quantity=1, Price=1.91, Total=1.91
2025-03-23 17:33:27 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.065574, Calculated price: 2.01
2025-03-23 17:33:27 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.01, Total=2.01
2025-03-23 17:33:27 [INFO]: Item: Rammus püsikusegu biohuumusega, Original price: 2.622951, Calculated price: 2.55
2025-03-23 17:33:27 [INFO]: Line item: Code=4744278011110, Name=Rammus püsikusegu biohuumusega 5, 0 l, Quantity=1, Price=2.55, Total=2.55
2025-03-23 17:33:27 [INFO]: Item: Tomat Maike, Original price: 2.295082, Calculated price: 2.24
2025-03-23 17:33:27 [INFO]: Line item: Code=1698, Name=Tomat Maike, Quantity=1, Price=2.24, Total=2.24
2025-03-23 17:33:27 [INFO]: Item: Tomat Mato, Original price: 2.295082, Calculated price: 2.24
2025-03-23 17:33:27 [INFO]: Line item: Code=1685, Name=Tomat Mato, Quantity=1, Price=2.24, Total=2.24
2025-03-23 17:33:27 [INFO]: Item: Tomat Pille, Original price: 2.295082, Calculated price: 2.24
2025-03-23 17:33:27 [INFO]: Line item: Code=1673, Name=Tomat Pille, Quantity=1, Price=2.24, Total=2.24
2025-03-23 17:33:27 [INFO]: Adjusted discount from 10.61 to 8.27 (removed tax)
2025-03-23 17:33:27 [INFO]: Discount: seemned20, Amount=-8.27
2025-03-23 17:33:27 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 8 = 6.00
2025-03-23 17:33:27 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 4 = 4.20
2025-03-23 17:33:27 [INFO]: Row total for Biohuumus Universaalne Maheväetis 5l: 2.97 × 2 = 5.94
2025-03-23 17:33:27 [INFO]: Row total for Ettekasvatussegu biohuumusega 5 l: 2.37 × 4 = 9.48
2025-03-23 17:33:27 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.91 × 1 = 1.91
2025-03-23 17:33:27 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.01 × 1 = 2.01
2025-03-23 17:33:27 [INFO]: Row total for Rammus püsikusegu biohuumusega 5, 0 l: 2.55 × 1 = 2.55
2025-03-23 17:33:27 [INFO]: Row total for Tomat Maike: 2.24 × 1 = 2.24
2025-03-23 17:33:27 [INFO]: Row total for Tomat Mato: 2.24 × 1 = 2.24
2025-03-23 17:33:27 [INFO]: Row total for Tomat Pille: 2.24 × 1 = 2.24
2025-03-23 17:33:27 [INFO]: Row total for Allahindlus (seemned20): -8.27 × 1 = -8.27
2025-03-23 17:33:27 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:33:27 [INFO]: - WooCommerce total (expected): 51.78
2025-03-23 17:33:27 [INFO]: - Rows total without VAT: 30.54
2025-03-23 17:33:27 [INFO]: - VAT amount (22%): 6.72
2025-03-23 17:33:27 [INFO]: - Merit calculated total: 37.26
2025-03-23 17:33:27 [INFO]: - Difference: 14.52
2025-03-23 17:33:27 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:33:27 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:33:27 [INFO]: - Target pre-tax total: 42.44
2025-03-23 17:33:27 [INFO]: - Current pre-tax total: 30.54
2025-03-23 17:33:27 [INFO]: - Required pre-tax adjustment: 11.90
2025-03-23 17:33:27 [INFO]: Adjusting price of item "Ettekasvatussegu biohuumusega 5 l" from 2.37 to 5.34
2025-03-23 17:33:27 [INFO]: - Original item total: 9.48
2025-03-23 17:33:27 [INFO]: - Adjusted item total: 21.38
2025-03-23 17:33:27 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:33:27 [INFO]: - Adjusted rows total without VAT: 42.42
2025-03-23 17:33:27 [INFO]: - Adjusted VAT amount (22%): 9.33
2025-03-23 17:33:27 [INFO]: - Adjusted Merit calculated total: 51.75
2025-03-23 17:33:27 [INFO]: - WooCommerce total (expected): 51.78
2025-03-23 17:33:27 [INFO]: - New difference: 0.030000
2025-03-23 17:33:27 [INFO]: Still detected a small difference of 0.03. Making final micro-adjustment.
2025-03-23 17:33:27 [INFO]: Adjusted tax amount from 9.33 to 9.36 to ensure exact match.
2025-03-23 17:33:27 [INFO]: Final verification: 51.78 should exactly match 51.78
2025-03-23 17:33:27 [INFO]: Final difference: 0.000000
2025-03-23 17:33:27 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:33:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153327&signature=xsEayDDtk1cLmC3tpgzpfp7KTktj8ZD1Iv0xz6BAFwQ%3D
2025-03-23 17:33:27 [INFO]: Next invoice number will be: 1828
2025-03-23 17:33:27 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:33:27 [INFO]: Sending invoice to Merit with 11 line items.
2025-03-23 17:33:27 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:33:27 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:33:27 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:33:27 [INFO]: - WooCommerce total: 51.78
2025-03-23 17:33:27 [INFO]: - Merit calculated total before rounding: 51.75
2025-03-23 17:33:27 [INFO]: - Initial rounding adjustment: 0.03
2025-03-23 17:33:27 [INFO]: - Our calculated tax amount: 9.33
2025-03-23 17:33:27 [INFO]: - Predicted Merit tax calculation: 9.32
2025-03-23 17:33:27 [INFO]: - Tax calculation difference: -0.01
2025-03-23 17:33:27 [INFO]: - Final adjusted rounding amount: 0.04
2025-03-23 17:33:27 [INFO]: Added properly structured data for Merit API with compensated rounding:
2025-03-23 17:33:27 [INFO]: - TotalAmount: 42.42
2025-03-23 17:33:27 [INFO]: - TaxAmount[0].Amount: 9.33
2025-03-23 17:33:27 [INFO]: - RoundingAmount (adjusted): 0.04
2025-03-23 17:33:27 [INFO]: - Predicted Merit total after tax recalculation: 51.78
2025-03-23 17:33:27 [INFO]: - WooCommerce total: 51.78
2025-03-23 17:33:27 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:33:27 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153327&signature=xNssggR5JOgVTup125hJ%2BVIIh2UbtKSCUH36ftSSgt4%3D
2025-03-23 17:33:28 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"98d32d93-a436-445b-9eda-35295d884206","InvoiceNo":"1828","RefNo":"18283","NewCustomer":null}
2025-03-23 17:33:28 [INFO]: Successfully created Merit invoice for WooCommerce order #1739: Invoice number 1828
2025-03-23 17:33:59 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:34:00 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:34:12 [INFO]: Fetching WooCommerce order: 1740
2025-03-23 17:34:13 [INFO]: Manually creating invoice for WooCommerce order #1740
2025-03-23 17:34:13 [INFO]: Using order data from request body for order #1740
2025-03-23 17:34:13 [INFO]: Creating Merit invoice for WooCommerce order #1740 from provided data
2025-03-23 17:34:13 [INFO]: Processing WooCommerce order #1740 to create Merit invoice
2025-03-23 17:34:13 [INFO]: Order details: Currency: EUR, Total: 23.62, Subtotal: undefined, Tax: 4.26
2025-03-23 17:34:13 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:34:13 [INFO]: Item: Ettekasvatussegu biohuumusega, Original price: 2.727459, Calculated price: 2.37
2025-03-23 17:34:13 [INFO]: Line item: Code=4744278011011, Name=Ettekasvatussegu biohuumusega 5 l, Quantity=4, Price=2.37, Total=9.48
2025-03-23 17:34:13 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.3237705, Calculated price: 2.01
2025-03-23 17:34:13 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=2, Price=2.01, Total=4.02
2025-03-23 17:34:13 [INFO]: Item: Biohuumuse kontsentraat lilledele, Original price: 2.213115, Calculated price: 1.91
2025-03-23 17:34:13 [INFO]: Line item: Code=4742022540022, Name=Biohuumuse kontsentraat Lilledele, 500ml, Quantity=1, Price=1.91, Total=1.91
2025-03-23 17:34:13 [INFO]: Item: Toalillemuld biohuumusega, Original price: 1.590164, Calculated price: 1.37
2025-03-23 17:34:13 [INFO]: Line item: Code=4744278011219, Name=Toalillemuld 2, 5 l, Quantity=1, Price=1.37, Total=1.37
2025-03-23 17:34:13 [INFO]: Adjusted discount from 2.15 to 1.68 (removed tax)
2025-03-23 17:34:13 [INFO]: Discount: aednik, Amount=-1.68
2025-03-23 17:34:13 [INFO]: Row total for Ettekasvatussegu biohuumusega 5 l: 2.37 × 4 = 9.48
2025-03-23 17:34:13 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.01 × 2 = 4.02
2025-03-23 17:34:13 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.91 × 1 = 1.91
2025-03-23 17:34:13 [INFO]: Row total for Toalillemuld 2, 5 l: 1.37 × 1 = 1.37
2025-03-23 17:34:13 [INFO]: Row total for Allahindlus (aednik): -1.68 × 1 = -1.68
2025-03-23 17:34:13 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:34:13 [INFO]: - WooCommerce total (expected): 23.62
2025-03-23 17:34:13 [INFO]: - Rows total without VAT: 15.10
2025-03-23 17:34:13 [INFO]: - VAT amount (22%): 3.32
2025-03-23 17:34:13 [INFO]: - Merit calculated total: 18.42
2025-03-23 17:34:13 [INFO]: - Difference: 5.20
2025-03-23 17:34:13 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:34:13 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:34:13 [INFO]: - Target pre-tax total: 19.36
2025-03-23 17:34:13 [INFO]: - Current pre-tax total: 15.10
2025-03-23 17:34:13 [INFO]: - Required pre-tax adjustment: 4.26
2025-03-23 17:34:13 [INFO]: Adjusting price of item "Ettekasvatussegu biohuumusega 5 l" from 2.37 to 3.44
2025-03-23 17:34:13 [INFO]: - Original item total: 9.48
2025-03-23 17:34:13 [INFO]: - Adjusted item total: 13.74
2025-03-23 17:34:13 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:34:13 [INFO]: - Adjusted rows total without VAT: 19.38
2025-03-23 17:34:13 [INFO]: - Adjusted VAT amount (22%): 4.26
2025-03-23 17:34:13 [INFO]: - Adjusted Merit calculated total: 23.64
2025-03-23 17:34:13 [INFO]: - WooCommerce total (expected): 23.62
2025-03-23 17:34:13 [INFO]: - New difference: -0.020000
2025-03-23 17:34:13 [INFO]: Still detected a small difference of -0.02. Making final micro-adjustment.
2025-03-23 17:34:13 [INFO]: Adjusted tax amount from 4.26 to 4.24 to ensure exact match.
2025-03-23 17:34:13 [INFO]: Final verification: 23.62 should exactly match 23.62
2025-03-23 17:34:13 [INFO]: Final difference: 0.000000
2025-03-23 17:34:13 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:34:13 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153413&signature=g0nGLlNvBDYvAMRkOClLvQab0jSPhxTabTmQ2qyZAng%3D
2025-03-23 17:34:14 [INFO]: Next invoice number will be: 1829
2025-03-23 17:34:14 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:34:14 [INFO]: Sending invoice to Merit with 5 line items.
2025-03-23 17:34:14 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:34:14 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:34:14 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:34:14 [INFO]: - WooCommerce total: 23.62
2025-03-23 17:34:14 [INFO]: - Merit calculated total before rounding: 23.64
2025-03-23 17:34:14 [INFO]: - Initial rounding adjustment: -0.02
2025-03-23 17:34:14 [INFO]: - Our calculated tax amount: 4.26
2025-03-23 17:34:14 [INFO]: - Predicted Merit tax calculation: 4.26
2025-03-23 17:34:14 [INFO]: - Tax calculation difference: 0.00
2025-03-23 17:34:14 [INFO]: - Final adjusted rounding amount: -0.02
2025-03-23 17:34:14 [INFO]: Added properly structured data for Merit API with compensated rounding:
2025-03-23 17:34:14 [INFO]: - TotalAmount: 19.38
2025-03-23 17:34:14 [INFO]: - TaxAmount[0].Amount: 4.26
2025-03-23 17:34:14 [INFO]: - RoundingAmount (adjusted): -0.02
2025-03-23 17:34:14 [INFO]: - Predicted Merit total after tax recalculation: 23.62
2025-03-23 17:34:14 [INFO]: - WooCommerce total: 23.62
2025-03-23 17:34:14 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:34:14 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153414&signature=KhMo1kIQR63rEieqpvBBb5l7zLF9WFkIYaTlr9zWibg%3D
2025-03-23 17:34:15 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"f5f79d77-76fc-48ea-9813-630f3ee7685b","InvoiceNo":"1829","RefNo":"18296","NewCustomer":null}
2025-03-23 17:34:15 [INFO]: Successfully created Merit invoice for WooCommerce order #1740: Invoice number 1829
2025-03-23 17:37:29 [INFO]: Logger initialized
2025-03-23 17:37:30 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:37:30 [INFO]: Automatic synchronization is disabled
2025-03-23 17:37:30 [INFO]: Server running on port 3001
2025-03-23 17:37:30 [INFO]: API-only mode enabled
2025-03-23 17:37:36 [INFO]: Logger initialized
2025-03-23 17:37:36 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 17:37:36 [INFO]: Automatic synchronization is disabled
2025-03-23 17:37:36 [INFO]: Server running on port 3001
2025-03-23 17:37:36 [INFO]: API-only mode enabled
2025-03-23 17:38:09 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:38:10 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:38:14 [INFO]: Manually creating invoice for WooCommerce order #1739
2025-03-23 17:38:14 [INFO]: Using order data from request body for order #1739
2025-03-23 17:38:14 [INFO]: Creating Merit invoice for WooCommerce order #1739 from provided data
2025-03-23 17:38:14 [INFO]: Processing WooCommerce order #1739 to create Merit invoice
2025-03-23 17:38:14 [INFO]: Order details: Currency: EUR, Total: 51.78, Subtotal: undefined, Tax: 9.32
2025-03-23 17:38:14 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:38:14 [INFO]: Found special product "Toataimede Uus Algus" - replacing with component products
2025-03-23 17:38:14 [INFO]: Calculating pre-tax amount: 13.11 - 2.89 = 10.22
2025-03-23 17:38:14 [INFO]: Original pre-tax total price for Toataimede Uus Algus: 10.22
2025-03-23 17:38:14 [INFO]: Retail component values:
2025-03-23 17:38:14 [INFO]: - Soil (8 x 2.15): 17.20
2025-03-23 17:38:14 [INFO]: - Concentrate (4 x 2.99): 11.96
2025-03-23 17:38:14 [INFO]: - Total retail value: 29.16
2025-03-23 17:38:14 [INFO]: Discount factor: 0.3505 (campaign price / retail price)
2025-03-23 17:38:14 [INFO]: Fine-tuned prices to match total exactly. Difference: 0.02
2025-03-23 17:38:14 [INFO]: Final total check: 10.20 (should equal 10.22)
2025-03-23 17:38:14 [INFO]: Final component prices (pre-tax):
2025-03-23 17:38:14 [INFO]: - Soil adjusted price: 0.75 (34.9% of retail)
2025-03-23 17:38:14 [INFO]: - Concentrate adjusted price: 1.05 (35.1% of retail)
2025-03-23 17:38:14 [INFO]: Replacement product: Ussimo Toalillemuld Biohuumusega
2025-03-23 17:38:14 [INFO]: - Quantity: 8
2025-03-23 17:38:14 [INFO]: - Unit price: 0.75
2025-03-23 17:38:14 [INFO]: - Total price: 6.00
2025-03-23 17:38:14 [INFO]: Replacement product: Ussimo Biohuumuse Kontsentraat Lilledele
2025-03-23 17:38:14 [INFO]: - Quantity: 4
2025-03-23 17:38:14 [INFO]: - Unit price: 1.05
2025-03-23 17:38:14 [INFO]: - Total price: 4.20
2025-03-23 17:38:14 [INFO]: Item: Biohuumus Universaalne Maheväetis 5l, Original price: 3.0491805, Calculated price: 2.97
2025-03-23 17:38:14 [INFO]: Line item: Code=4744278010014, Name=Biohuumus 5 l Ussimo, Quantity=2, Price=2.97, Total=5.94
2025-03-23 17:38:14 [INFO]: Item: Ettekasvatussegu biohuumusega, Original price: 2.42213125, Calculated price: 2.37
2025-03-23 17:38:14 [INFO]: Line item: Code=4744278011011, Name=Ettekasvatussegu biohuumusega 5 l, Quantity=4, Price=2.37, Total=9.48
2025-03-23 17:38:14 [INFO]: Item: Biohuumuse kontsentraat lilledele, Original price: 1.967213, Calculated price: 1.91
2025-03-23 17:38:14 [INFO]: Line item: Code=4742022540022, Name=Biohuumuse kontsentraat Lilledele, 500ml, Quantity=1, Price=1.91, Total=1.91
2025-03-23 17:38:14 [INFO]: Item: Biohuumuse kontsentraat mahekasvatuseks, Original price: 2.065574, Calculated price: 2.01
2025-03-23 17:38:14 [INFO]: Line item: Code=4742022540015, Name=Biohuumuse kontsentraat mahekasvatuseks, 500ml, Quantity=1, Price=2.01, Total=2.01
2025-03-23 17:38:14 [INFO]: Item: Rammus püsikusegu biohuumusega, Original price: 2.622951, Calculated price: 2.55
2025-03-23 17:38:14 [INFO]: Line item: Code=4744278011110, Name=Rammus püsikusegu biohuumusega 5, 0 l, Quantity=1, Price=2.55, Total=2.55
2025-03-23 17:38:14 [INFO]: Item: Tomat Maike, Original price: 2.295082, Calculated price: 2.24
2025-03-23 17:38:14 [INFO]: Line item: Code=1698, Name=Tomat Maike, Quantity=1, Price=2.24, Total=2.24
2025-03-23 17:38:14 [INFO]: Item: Tomat Mato, Original price: 2.295082, Calculated price: 2.24
2025-03-23 17:38:14 [INFO]: Line item: Code=1685, Name=Tomat Mato, Quantity=1, Price=2.24, Total=2.24
2025-03-23 17:38:14 [INFO]: Item: Tomat Pille, Original price: 2.295082, Calculated price: 2.24
2025-03-23 17:38:14 [INFO]: Line item: Code=1673, Name=Tomat Pille, Quantity=1, Price=2.24, Total=2.24
2025-03-23 17:38:14 [INFO]: Adjusted discount from 10.61 to 8.27 (removed tax)
2025-03-23 17:38:14 [INFO]: Discount: seemned20, Amount=-8.27
2025-03-23 17:38:14 [INFO]: Row total for Toalillemuld 2, 5 l: 0.75 × 8 = 6.00
2025-03-23 17:38:14 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.05 × 4 = 4.20
2025-03-23 17:38:14 [INFO]: Row total for Biohuumus 5 l Ussimo: 2.97 × 2 = 5.94
2025-03-23 17:38:14 [INFO]: Row total for Ettekasvatussegu biohuumusega 5 l: 2.37 × 4 = 9.48
2025-03-23 17:38:14 [INFO]: Row total for Biohuumuse kontsentraat Lilledele, 500ml: 1.91 × 1 = 1.91
2025-03-23 17:38:14 [INFO]: Row total for Biohuumuse kontsentraat mahekasvatuseks, 500ml: 2.01 × 1 = 2.01
2025-03-23 17:38:14 [INFO]: Row total for Rammus püsikusegu biohuumusega 5, 0 l: 2.55 × 1 = 2.55
2025-03-23 17:38:14 [INFO]: Row total for Tomat Maike: 2.24 × 1 = 2.24
2025-03-23 17:38:14 [INFO]: Row total for Tomat Mato: 2.24 × 1 = 2.24
2025-03-23 17:38:14 [INFO]: Row total for Tomat Pille: 2.24 × 1 = 2.24
2025-03-23 17:38:14 [INFO]: Row total for Allahindlus (seemned20): -8.27 × 1 = -8.27
2025-03-23 17:38:14 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:38:14 [INFO]: - WooCommerce total (expected): 51.78
2025-03-23 17:38:14 [INFO]: - Rows total without VAT: 30.54
2025-03-23 17:38:14 [INFO]: - VAT amount (22%): 6.72
2025-03-23 17:38:14 [INFO]: - Merit calculated total: 37.26
2025-03-23 17:38:14 [INFO]: - Difference: 14.52
2025-03-23 17:38:14 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:38:14 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:38:14 [INFO]: - Target pre-tax total: 42.44
2025-03-23 17:38:14 [INFO]: - Current pre-tax total: 30.54
2025-03-23 17:38:14 [INFO]: - Required pre-tax adjustment: 11.90
2025-03-23 17:38:14 [INFO]: Adjusting price of item "Ettekasvatussegu biohuumusega 5 l" from 2.37 to 5.34
2025-03-23 17:38:14 [INFO]: - Original item total: 9.48
2025-03-23 17:38:14 [INFO]: - Adjusted item total: 21.38
2025-03-23 17:38:14 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:38:14 [INFO]: - Adjusted rows total without VAT: 42.42
2025-03-23 17:38:14 [INFO]: - Adjusted VAT amount (22%): 9.33
2025-03-23 17:38:14 [INFO]: - Adjusted Merit calculated total: 51.75
2025-03-23 17:38:14 [INFO]: - WooCommerce total (expected): 51.78
2025-03-23 17:38:14 [INFO]: - New difference: 0.030000
2025-03-23 17:38:14 [INFO]: Still detected a small difference of 0.03. Making final micro-adjustment.
2025-03-23 17:38:14 [INFO]: Adjusted tax amount from 9.33 to 9.36 to ensure exact match.
2025-03-23 17:38:14 [INFO]: Final verification: 51.78 should exactly match 51.78
2025-03-23 17:38:14 [INFO]: Final difference: 0.000000
2025-03-23 17:38:14 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:38:14 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153814&signature=kSerAhNZyDwsN62a0fYDCgITSzH%2B15i8B3VkN2B9%2Fag%3D
2025-03-23 17:38:15 [INFO]: Next invoice number will be: 1830
2025-03-23 17:38:15 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:38:15 [INFO]: Sending invoice to Merit with 11 line items.
2025-03-23 17:38:15 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:38:15 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:38:15 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:38:15 [INFO]: - WooCommerce total: 51.78
2025-03-23 17:38:15 [INFO]: - Merit calculated total before rounding: 51.75
2025-03-23 17:38:15 [INFO]: - Initial rounding adjustment: 0.03
2025-03-23 17:38:15 [INFO]: - Our calculated tax amount: 9.33
2025-03-23 17:38:15 [INFO]: - Predicted Merit tax calculation: 9.32
2025-03-23 17:38:15 [INFO]: - Tax calculation difference: -0.01
2025-03-23 17:38:15 [INFO]: - Final adjusted rounding amount: 0.04
2025-03-23 17:38:15 [INFO]: Added properly structured data for Merit API with compensated rounding:
2025-03-23 17:38:15 [INFO]: - TotalAmount: 42.42
2025-03-23 17:38:15 [INFO]: - TaxAmount[0].Amount: 9.33
2025-03-23 17:38:15 [INFO]: - RoundingAmount (adjusted): 0.04
2025-03-23 17:38:15 [INFO]: - Predicted Merit total after tax recalculation: 51.78
2025-03-23 17:38:15 [INFO]: - WooCommerce total: 51.78
2025-03-23 17:38:15 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:38:15 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153815&signature=nNzZW1CRzFiNBy3ph67kd887sHVxnewzDbz79EisXeM%3D
2025-03-23 17:38:15 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"863de974-6b32-465f-b4cd-9628cbd47193","InvoiceNo":"1830","RefNo":"18306","NewCustomer":null}
2025-03-23 17:38:15 [INFO]: Successfully created Merit invoice for WooCommerce order #1739: Invoice number 1830
2025-03-23 17:38:33 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:38:34 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 17:38:38 [INFO]: Fetching WooCommerce order: 1741
2025-03-23 17:38:43 [INFO]: Manually creating invoice for WooCommerce order #1741
2025-03-23 17:38:43 [INFO]: Using order data from request body for order #1741
2025-03-23 17:38:43 [INFO]: Creating Merit invoice for WooCommerce order #1741 from provided data
2025-03-23 17:38:43 [INFO]: Processing WooCommerce order #1741 to create Merit invoice
2025-03-23 17:38:43 [INFO]: Order details: Currency: EUR, Total: 22.20, Subtotal: undefined, Tax: 4.00
2025-03-23 17:38:43 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:38:43 [INFO]: Item: Ettekasvatussegu biohuumusega, Original price: 3.032786833333333, Calculated price: 2.37
2025-03-23 17:38:43 [INFO]: Line item: Code=4744278011011, Name=Ettekasvatussegu biohuumusega 5 l, Quantity=6, Price=2.37, Total=14.22
2025-03-23 17:38:43 [INFO]: Row total for Ettekasvatussegu biohuumusega 5 l: 2.37 × 6 = 14.22
2025-03-23 17:38:43 [INFO]: INITIAL TOTALS COMPARISON:
2025-03-23 17:38:43 [INFO]: - WooCommerce total (expected): 22.20
2025-03-23 17:38:43 [INFO]: - Rows total without VAT: 14.22
2025-03-23 17:38:43 [INFO]: - VAT amount (22%): 3.13
2025-03-23 17:38:43 [INFO]: - Merit calculated total: 17.35
2025-03-23 17:38:43 [INFO]: - Difference: 4.85
2025-03-23 17:38:43 [INFO]: Adjusting item prices to match the expected total instead of using RoundingAmount
2025-03-23 17:38:43 [INFO]: Precise adjustment to match WooCommerce total exactly:
2025-03-23 17:38:43 [INFO]: - Target pre-tax total: 18.20
2025-03-23 17:38:43 [INFO]: - Current pre-tax total: 14.22
2025-03-23 17:38:43 [INFO]: - Required pre-tax adjustment: 3.98
2025-03-23 17:38:43 [INFO]: Adjusting price of item "Ettekasvatussegu biohuumusega 5 l" from 2.37 to 3.03
2025-03-23 17:38:43 [INFO]: - Original item total: 14.22
2025-03-23 17:38:43 [INFO]: - Adjusted item total: 18.20
2025-03-23 17:38:43 [INFO]: FINAL TOTALS AFTER PRICE ADJUSTMENT:
2025-03-23 17:38:43 [INFO]: - Adjusted rows total without VAT: 18.18
2025-03-23 17:38:43 [INFO]: - Adjusted VAT amount (22%): 4.00
2025-03-23 17:38:43 [INFO]: - Adjusted Merit calculated total: 22.18
2025-03-23 17:38:43 [INFO]: - WooCommerce total (expected): 22.20
2025-03-23 17:38:43 [INFO]: - New difference: 0.020000
2025-03-23 17:38:43 [INFO]: Still detected a small difference of 0.02. Making final micro-adjustment.
2025-03-23 17:38:43 [INFO]: Adjusted tax amount from 4.00 to 4.02 to ensure exact match.
2025-03-23 17:38:43 [INFO]: Final verification: 22.20 should exactly match 22.20
2025-03-23 17:38:43 [INFO]: Final difference: 0.000000
2025-03-23 17:38:43 [INFO]: Fetching latest invoice number from Merit Aktiva
2025-03-23 17:38:43 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153843&signature=0LD5Bzt%2F25YvtN7og2t%2FedRcojk7LYFteAvqP4D3Plw%3D
2025-03-23 17:38:44 [INFO]: Next invoice number will be: 1831
2025-03-23 17:38:44 [WARN]: Merit VAT tax ID not configured, using default value
2025-03-23 17:38:44 [INFO]: Sending invoice to Merit with 1 line items.
2025-03-23 17:38:44 [INFO]: Each row has TaxId: 307000b4-f1f2-4bc7-a110-24cb18d77212 (VAT 22%) set individually.
2025-03-23 17:38:44 [INFO]: Merit will calculate VAT for each row following their bookkeeping standard: each row has its own VAT calculation and is rounded before summing.
2025-03-23 17:38:44 [INFO]: Calculating dynamic rounding amount:
2025-03-23 17:38:44 [INFO]: - WooCommerce total: 22.20
2025-03-23 17:38:44 [INFO]: - Merit calculated total before rounding: 22.18
2025-03-23 17:38:44 [INFO]: - Initial rounding adjustment: 0.02
2025-03-23 17:38:44 [INFO]: - Our calculated tax amount: 4.00
2025-03-23 17:38:44 [INFO]: - Predicted Merit tax calculation: 4.00
2025-03-23 17:38:44 [INFO]: - Tax calculation difference: 0.00
2025-03-23 17:38:44 [INFO]: - Final adjusted rounding amount: 0.02
2025-03-23 17:38:44 [INFO]: Added properly structured data for Merit API with compensated rounding:
2025-03-23 17:38:44 [INFO]: - TotalAmount: 18.18
2025-03-23 17:38:44 [INFO]: - TaxAmount[0].Amount: 4.00
2025-03-23 17:38:44 [INFO]: - RoundingAmount (adjusted): 0.02
2025-03-23 17:38:44 [INFO]: - Predicted Merit total after tax recalculation: 22.20
2025-03-23 17:38:44 [INFO]: - WooCommerce total: 22.20
2025-03-23 17:38:44 [INFO]: Creating invoice in Merit Aktiva for: Eraisik
2025-03-23 17:38:44 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/sendinvoice?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323153844&signature=utZ%2F2FzK4qUUM8dSNRb9tjIAPdbof200y8O0jiEY2bE%3D
2025-03-23 17:38:44 [INFO]: Invoice created successfully: {"CustomerId":"46d2c4af-f9f3-4cd3-bef7-c5818b15b523","InvoiceId":"9b501dda-3006-4000-9e30-846c8ee41ec7","InvoiceNo":"1831","RefNo":"18319","NewCustomer":null}
2025-03-23 17:38:44 [INFO]: Successfully created Merit invoice for WooCommerce order #1741: Invoice number 1831
2025-03-23 18:15:14 [INFO]: Logger initialized
2025-03-23 18:15:14 [INFO]: Merit API configured with URL: https://aktiva.merit.ee
2025-03-23 18:15:14 [INFO]: Automatic synchronization is disabled
2025-03-23 18:15:14 [INFO]: Server running on port 3001
2025-03-23 18:15:14 [INFO]: API-only mode enabled
2025-03-23 18:15:26 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:15:27 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:18:02 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:18:04 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:20:45 [INFO]: Getting orders summary for period: 30d
2025-03-23 18:20:45 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 18:20:45 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 18:20:45 [INFO]: Fetching WooCommerce orders totals
2025-03-23 18:20:45 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 18:20:45 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 18:20:45 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 18:20:45 [INFO]: Getting popular products for period: 30d
2025-03-23 18:20:45 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 18:20:45 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 18:20:46 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 18:20:46 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 18:20:46 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 18:20:46 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 18:20:46 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 18:20:48 [INFO]: Getting orders summary for period: 30d
2025-03-23 18:20:48 [INFO]: Analytics request params: {"period":"month"}
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce orders totals
2025-03-23 18:20:48 [INFO]: Getting revenue chart data for period: 30d
2025-03-23 18:20:48 [INFO]: Revenue chart request params: {"period":"month"}
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce sales report with params: {"period":"month"}
2025-03-23 18:20:48 [INFO]: Getting popular products for period: 30d
2025-03-23 18:20:48 [INFO]: Popular products request params: {"limit":5,"period":"month"}
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce top sellers report with params: {"limit":5,"period":"month"}
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce product details for ID: 126
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce product details for ID: 207
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce product details for ID: 1226
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce product details for ID: 117
2025-03-23 18:20:48 [INFO]: Fetching WooCommerce product details for ID: 384
2025-03-23 18:21:06 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:21:07 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:21:10 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 18:21:10 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 18:21:10 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323162110&signature=0QUNZ%2FDU6iSwOZVhuRDPS5GaC0Q3mHhqHGXOHGq90D8%3D
2025-03-23 18:21:11 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 18:21:11 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 18:21:11 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323162111&signature=B4LBLXNQd8D1r%2Frac7rWmSd8%2BpyrLsrMNz1btgNxCms%3D
2025-03-23 18:21:11 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:21:12 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:21:50 [INFO]: Fetching WooCommerce orders with params: page=1&per_page=20
2025-03-23 18:24:24 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 18:24:24 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 18:24:24 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323162424&signature=9h2i5sxRtrOwkheDh8vL4RH9xNN1IPgz3jQcMwXdHoU%3D
2025-03-23 18:24:24 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 18:24:24 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 18:24:24 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323162424&signature=9h2i5sxRtrOwkheDh8vL4RH9xNN1IPgz3jQcMwXdHoU%3D
2025-03-23 18:24:26 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":2,"limit":10}
2025-03-23 18:24:26 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 18:24:26 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323162426&signature=wjOA6WnvojRg9hilyXj5JOKsC7Kxt3QzHu%2FC9yWwzOY%3D
2025-03-23 18:24:28 [INFO]: Fetching invoices with options: {"startDate":"20250221","endDate":"20250323","unpaidOnly":false,"page":1,"limit":10}
2025-03-23 18:24:28 [INFO]: Fetching invoices from Merit Aktiva: {"PeriodStart":"20250221","PeriodEnd":"20250323","UnPaid":false}
2025-03-23 18:24:28 [INFO]: Making API request to: https://aktiva.merit.ee/api/v1/getinvoices?ApiId=c113c6ed-6cd0-46b2-a9e3-6afd4179187c&timestamp=20250323162428&signature=N54ymWZ3kBae5jeh1jFR8%2BTqMDTkAMvk3xRzpG%2FCdok%3D
